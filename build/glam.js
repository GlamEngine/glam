(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function Fog(e,t){this.flags=(0,_objectAssign2["default"])({},e.flags,{recompile:!0}),this.fragSource=e.fragSource,this.vertSource=e.vertSource,this.defines=e.defines.concat("FOG"),this.shader=null,this.mode=e.mode,this.setUniforms=e.setUniforms.concat(_setUniforms2["default"]),this.setAttributes=e.setAttributes.slice(),this.shading=(0,_objectAssign2["default"])({fog:t},e.shading),this.use=_useAugment2["default"].bind(null,this)}function createFog(e,t){var s=(0,_objectAssign2["default"])({near:10,far:100,color:[.4,.4,.5]},t);return"function"==typeof e?function(){var t=e.length,r=Array.prototype.slice.call(arguments,0,t),i=(0,_objectAssign2["default"])({},s,arguments[t]);return new Fog(e.apply(this,r),i)}:new Fog(e,s)}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=createFog;var _objectAssign=require("object-assign"),_objectAssign2=_interopRequireDefault(_objectAssign),_setUniforms=require("./set-uniforms"),_setUniforms2=_interopRequireDefault(_setUniforms),_useAugment=require("../use-augment"),_useAugment2=_interopRequireDefault(_useAugment);

},{"../use-augment":7,"./set-uniforms":2,"object-assign":220}],2:[function(require,module,exports){
"use strict";function setUniforms(o,r,e){o.uniforms.uFog.near=e.material.shading.fog.near,o.uniforms.uFog.far=e.material.shading.fog.far,o.uniforms.uFog.color=e.material.shading.fog.color}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=setUniforms;

},{}],3:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function Lambert(e,t){this.flags=(0,_objectAssign2["default"])({},e.flags,{recompile:!0,useLights:!0}),this.fragSource=e.fragSource,this.vertSource=e.vertSource,this.defines=e.defines.concat("LAMBERT"),this.shader=null,this.mode=e.mode,this.setUniforms=e.setUniforms.concat([_setUniforms2["default"],_setUniforms4["default"]]),this.setAttributes=e.setAttributes.slice(),this.shading=e.shading,this.use=_useAugment2["default"].bind(null,this),this.shading=(0,_objectAssign2["default"])({lambert:t},e.shading)}function createLambert(e,t){var s=(0,_objectAssign2["default"])({diffuse:[1,1,1]},t);return"function"==typeof e?function(){var t=e.length,i=Array.prototype.slice.call(arguments,0,t),r=(0,_objectAssign2["default"])({},s,arguments[t]);return new Lambert(e.apply(this,i),r)}:new Lambert(e,s)}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=createLambert;var _objectAssign=require("object-assign"),_objectAssign2=_interopRequireDefault(_objectAssign),_setUniforms=require("./set-uniforms"),_setUniforms2=_interopRequireDefault(_setUniforms),_useAugment=require("../use-augment"),_useAugment2=_interopRequireDefault(_useAugment),_setUniforms3=require("../../light/directional/set-uniforms"),_setUniforms4=_interopRequireDefault(_setUniforms3);

},{"../../light/directional/set-uniforms":23,"../use-augment":7,"./set-uniforms":4,"object-assign":220}],4:[function(require,module,exports){
"use strict";function setUniforms(e,s,t){e.uniforms.uLambertDiffuse=t.material.shading.lambert.diffuse}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=setUniforms;

},{}],5:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function NormalColor(e,t){this.name="normalColor",this.flags=(0,_objectAssign2["default"])({},e.flags,{recompile:!0}),this.fragSource=e.fragSource,this.vertSource=e.vertSource,this.defines=e.defines.concat(["NORMAL_COLOR","NORMAL"]),this.shader=null,this.mode=e.mode,this.setUniforms=e.setUniforms.concat(_setUniforms2["default"]),this.setAttributes=e.setAttributes.slice(),this.shading=(0,_objectAssign2["default"])({normalColor:t},e.shading),this.use=_useAugment2["default"].bind(null,this)}function createNormalColor(e,t){var s=(0,_objectAssign2["default"])({amount:1},t);return"function"==typeof e?function(){var t=e.length,r=Array.prototype.slice.call(arguments,0,t),o=(0,_objectAssign2["default"])({},s,arguments[t]);return new NormalColor(e.apply(this,r),o)}:new NormalColor(e,s)}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=createNormalColor;var _objectAssign=require("object-assign"),_objectAssign2=_interopRequireDefault(_objectAssign),_setUniforms=require("./set-uniforms"),_setUniforms2=_interopRequireDefault(_setUniforms),_useAugment=require("../use-augment"),_useAugment2=_interopRequireDefault(_useAugment);

},{"../use-augment":7,"./set-uniforms":6,"object-assign":220}],6:[function(require,module,exports){
"use strict";function setUniforms(o,e,r){o.uniforms.uNormalColorAmount=r.material.shading.normalColor.amount}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=setUniforms;

},{}],7:[function(require,module,exports){
"use strict";function useAugment(e,t,u){return t(e,u)}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=useAugment;

},{}],8:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function PerspectiveCamera(e){return e.flags={autoUpdate:!0,autoUpdateViewport:!0,autoUpdateControls:!0},e.modelView=(0,_create4["default"])(),e.normal=(0,_create2["default"])(),e.updateMatrices=e.update,e.updateModelView=_updateModelView2["default"].bind(null,e),e.updateNormal=_updateNormal2["default"].bind(null,e),e.update=_update2["default"].bind(null,e),e.use=_useControls2["default"].bind(null,e),e}function perspective(e){return PerspectiveCamera((0,_perspectiveCamera2["default"])(e))}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=perspective;var _perspectiveCamera=require("perspective-camera"),_perspectiveCamera2=_interopRequireDefault(_perspectiveCamera),_create=require("gl-mat3/create"),_create2=_interopRequireDefault(_create),_create3=require("gl-mat4/create"),_create4=_interopRequireDefault(_create3),_useControls=require("../use-controls"),_useControls2=_interopRequireDefault(_useControls),_update=require("./update"),_update2=_interopRequireDefault(_update),_updateNormal=require("./update-normal"),_updateNormal2=_interopRequireDefault(_updateNormal),_updateModelView=require("./update-model-view"),_updateModelView2=_interopRequireDefault(_updateModelView);

},{"../use-controls":12,"./update":11,"./update-model-view":9,"./update-normal":10,"gl-mat3/create":145,"gl-mat4/create":150,"perspective-camera":225}],9:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function updateModelView(e,t){(0,_multiply2["default"])(e.modelView,e.view,t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=updateModelView;var _multiply=require("gl-mat4/multiply"),_multiply2=_interopRequireDefault(_multiply);

},{"gl-mat4/multiply":159}],10:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function updateNormal(e){(0,_normalFromMat2["default"])(e.normal,e.modelView)}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=updateNormal;var _normalFromMat=require("gl-mat3/normal-from-mat4"),_normalFromMat2=_interopRequireDefault(_normalFromMat);

},{"gl-mat3/normal-from-mat4":146}],11:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=function(e,t){e.flags.autoUpdateViewport&&(e.viewport[0]=0,e.viewport[1]=0,e.viewport[2]=t.width,e.viewport[3]=t.height),e.flags.autoUpdate&&e.updateMatrices()};

},{}],12:[function(require,module,exports){
"use strict";function useControls(t,e,o){var r=t.update;return t.controls=e(t,o),t.update=function(e){t.flags.autoUpdateControls&&t.controls.update(),r(e)},t}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=useControls;

},{}],13:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{"default":t}}function OrbitControls(t,e){var r=(0,_orbitControls2["default"])(e);return r.camera=t,r.updateController=r.update,r.update=_update2["default"].bind(null,r),r}function createOrbitControls(t,e){return OrbitControls(t,e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=createOrbitControls;var _orbitControls=require("orbit-controls"),_orbitControls2=_interopRequireDefault(_orbitControls),_update=require("./update"),_update2=_interopRequireDefault(_update);

},{"./update":14,"orbit-controls":221}],14:[function(require,module,exports){
"use strict";function updateOrbitControls(e){e.updateController(),e.copyInto(e.camera.position,e.camera.direction,e.camera.up)}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=updateOrbitControls;

},{}],15:[function(require,module,exports){
"use strict";function bootEngine(t,e,o){o&&t.emitter.on("ready",o),setTimeout(function(){t.start(),e.autoStart&&t.loop.start()},10)}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=bootEngine;

},{}],16:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function Engine(e){this.loop=(0,_loop2["default"])(e),this.emitter=this.loop.emitter,this.on=this.loop.on,this.off=this.loop.off,this.start=_start2["default"].bind(null,this),this.scene=null,this.renderer=null}function createEngine(e,t){var r=(0,_objectAssign2["default"])({renderer:void 0,scene:void 0,emitter:new _eventemitter2["default"],customizeEvent:void 0,autoStart:!0},e),o=new Engine(r);if(void 0===r.renderer){var n=(0,_objectAssign2["default"])({emitter:o.emitter},r.scene);o.renderer=(0,_forward2["default"])(n)}if(void 0===r.scene){var i=(0,_objectAssign2["default"])({renderer:o.renderer,emitter:o.emitter},r.renderer);o.scene=(0,_scene2["default"])(i)}return(0,_boot2["default"])(o,r,t),o}function createEngineRouter(e,t){var r,o;return"object"===("undefined"==typeof e?"undefined":_typeof(e))&&(r=e),"object"===("undefined"==typeof t?"undefined":_typeof(t))&&(r=t),"function"==typeof e&&(o=e),"function"==typeof t&&(o=t),createEngine(r,o)}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=createEngineRouter;var _forward=require("../renderer/forward"),_forward2=_interopRequireDefault(_forward),_loop=require("./loop"),_loop2=_interopRequireDefault(_loop),_boot=require("./boot"),_boot2=_interopRequireDefault(_boot),_objectAssign=require("object-assign"),_objectAssign2=_interopRequireDefault(_objectAssign),_scene=require("../scene"),_scene2=_interopRequireDefault(_scene),_start=require("./start/"),_start2=_interopRequireDefault(_start),_eventemitter=require("eventemitter3"),_eventemitter2=_interopRequireDefault(_eventemitter);

},{"../renderer/forward":37,"../scene":48,"./boot":15,"./loop":17,"./start/":18,"eventemitter3":136,"object-assign":220}],17:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function loop(e){var o;if("object"===("undefined"==typeof e?"undefined":_typeof(e)))o=e;else{if(!e)return null;o={}}var t=(0,_poemLoop2["default"])(o);return t.on=t.emitter.on.bind(t.emitter),t.off=t.emitter.removeListener.bind(t.emitter),t}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=loop;var _poemLoop=require("poem-loop"),_poemLoop2=_interopRequireDefault(_poemLoop);

},{"poem-loop":231}],18:[function(require,module,exports){
"use strict";function start(e){e.emitter.emit("ready",e,e.scene,e.renderer)}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=start;

},{}],19:[function(require,module,exports){
"use strict";function Geometry(e){this.flags={updateBuffers:!0},this.buffers=null,this.data={positions:e.positions,cells:e.cells,normals:e.normals}}function geometry(e){return new Geometry(e||{})}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=geometry;

},{}],20:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}var _index=require("./index.js"),_index2=_interopRequireDefault(_index);window.Glam=_index2["default"];

},{"./index.js":21}],21:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Transform=exports.Scene=exports.ForwardRenderer=exports.Mesh=exports.LitMaterial=exports.FlatMaterial=exports.DirectionalLight=exports.Geometry=exports.OrbitControls=exports.PerspectiveCamera=exports.Engine=exports.NormalColorAugment=exports.LambertAugment=exports.FogAugment=void 0;var _fog=require("./augment/fog"),_fog2=_interopRequireDefault(_fog),_lambert=require("./augment/lambert"),_lambert2=_interopRequireDefault(_lambert),_normalColor=require("./augment/normal-color"),_normalColor2=_interopRequireDefault(_normalColor),_engine=require("./engine"),_engine2=_interopRequireDefault(_engine),_perspective=require("./camera/perspective"),_perspective2=_interopRequireDefault(_perspective),_orbit=require("./controls/orbit"),_orbit2=_interopRequireDefault(_orbit),_geometry=require("./geometry"),_geometry2=_interopRequireDefault(_geometry),_directional=require("./light/directional"),_directional2=_interopRequireDefault(_directional),_flat=require("./material/flat"),_flat2=_interopRequireDefault(_flat),_lit=require("./material/lit"),_lit2=_interopRequireDefault(_lit),_mesh=require("./mesh"),_mesh2=_interopRequireDefault(_mesh),_forward=require("./renderer/forward"),_forward2=_interopRequireDefault(_forward),_scene=require("./scene"),_scene2=_interopRequireDefault(_scene),_transform=require("./transform"),_transform2=_interopRequireDefault(_transform);exports.FogAugment=_fog2["default"],exports.LambertAugment=_lambert2["default"],exports.NormalColorAugment=_normalColor2["default"],exports.Engine=_engine2["default"],exports.PerspectiveCamera=_perspective2["default"],exports.OrbitControls=_orbit2["default"],exports.Geometry=_geometry2["default"],exports.DirectionalLight=_directional2["default"],exports.FlatMaterial=_flat2["default"],exports.LitMaterial=_lit2["default"],exports.Mesh=_mesh2["default"],exports.ForwardRenderer=_forward2["default"],exports.Scene=_scene2["default"],exports.Transform=_transform2["default"];

},{"./augment/fog":1,"./augment/lambert":3,"./augment/normal-color":5,"./camera/perspective":8,"./controls/orbit":13,"./engine":16,"./geometry":19,"./light/directional":22,"./material/flat":25,"./material/lit":28,"./mesh":31,"./renderer/forward":37,"./scene":48,"./transform":57}],22:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function DirectionalLight(e){this.meta=(0,_meta2["default"])(),this.transform=(0,_transform2["default"])(this),this.type=["light","light/directional"],this.flags={autoNormalizeDirection:!0},this.direction=e.direction,this.color=e.color,this.update=_update2["default"].bind(null,this,{direction:Array(3)})}function createDirectionalLight(e){var t=(0,_objectAssign2["default"])({direction:[0,1,0],color:[1,1,1]},e);return new DirectionalLight(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=createDirectionalLight;var _meta=require("../../mesh/meta"),_meta2=_interopRequireDefault(_meta),_transform=require("../../transform"),_transform2=_interopRequireDefault(_transform),_update=require("./update"),_update2=_interopRequireDefault(_update),_objectAssign=require("object-assign"),_objectAssign2=_interopRequireDefault(_objectAssign);

},{"../../mesh/meta":32,"../../transform":57,"./update":24,"object-assign":220}],23:[function(require,module,exports){
"use strict";function setUniforms(e,o,i,r){for(var t=0;t<r.length;t++)e.uniforms.uDirectionalLights[t].direction=r[t].direction,e.uniforms.uDirectionalLights[t].color=r[t].color}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=setUniforms;

},{}],24:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function updateLight(e,i,t){!e.flags.autoNormalizeDirection||i.direction[0]===e.direction[0]&&i.direction[1]===e.direction[1]&&i.direction[2]===e.direction[2]||((0,_normalize2["default"])(e.direction,e.direction),(0,_copy2["default"])(i.direction,e.direction)),(0,_updateScaleless2["default"])(e.transform)}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=updateLight;var _normalize=require("gl-vec3/normalize"),_normalize2=_interopRequireDefault(_normalize),_copy=require("gl-vec3/copy"),_copy2=_interopRequireDefault(_copy),_updateScaleless=require("../../transform/update-scaleless"),_updateScaleless2=_interopRequireDefault(_updateScaleless);

},{"../../transform/update-scaleless":59,"gl-vec3/copy":190,"gl-vec3/normalize":194}],25:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function FlatMaterial(e){this.flags={visible:!0,transparent:!1,recompile:!0,useLights:!1},this.defines=["CAMERA"],this.shader=null,this.mode="TRIANGLES",this.setUniforms=[_setUniforms2["default"]],this.setAttributes=[_setAttributes2["default"]],this.shading=e,this.use=_useAugment2["default"].bind(null,this)}function createFlatMaterial(e){var n=(0,_objectAssign2["default"])({color:[.1,.1,.1],opacity:1},e);return new FlatMaterial(n)}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=createFlatMaterial;var _setUniforms=require("./set-uniforms"),_setUniforms2=_interopRequireDefault(_setUniforms),_setAttributes=require("./set-attributes"),_setAttributes2=_interopRequireDefault(_setAttributes),_objectAssign=require("object-assign"),_objectAssign2=_interopRequireDefault(_objectAssign),_useAugment=require("../../augment/use-augment"),_useAugment2=_interopRequireDefault(_useAugment);FlatMaterial.prototype.fragSource="#define GLSLIFY 1\nprecision mediump float;\n#define SHADER_NAME flat.frag\n\nstruct Fog_0_0 {\n	float near;\n	float far;\n	vec3 color;\n};\n\n#ifdef FOG\n	float calculateFog_1_1(\n		const float cameraDistance,\n		const float near,\n		const float far\n	) {\n		return 1.0 - clamp((far - cameraDistance) / (far - near), 0.0, 1.0);\n	}\n\n	#pragma GLAM_REQUIRES FOG\n	void applyFog_1_2(\n		inout vec4 fragment,\n		Fog_0_0 fog,\n		float cameraDistance\n	) {\n		fragment.rgb = mix(\n			fragment.rgb,\n			fog.color,\n			calculateFog_1_1( cameraDistance, fog.near, fog.far)\n		);\n	}\n#endif\n\nuniform vec3 uColor;\nuniform float uOpacity;\n\nvarying vec3 vCameraPosition;\nvarying vec3 vCameraDirection;\nvarying float vCameraDistance;\n\nuniform Fog_0_0 uFog;\n\nvoid main() {\n  gl_FragColor = vec4(uColor, uOpacity);\n  applyFog_1_2(gl_FragColor, uFog, vCameraDistance);\n}\n",FlatMaterial.prototype.vertSource="#define GLSLIFY 1\n#define SHADER_NAME flat.vert\n\nstruct Camera_0_0 {\n	vec3 position;\n	mat4 view;\n	mat4 projection;\n	mat4 modelView;\n	mat3 normal;\n};\n\n#pragma GLAM_REQUIRES CAMERA\nvoid applyCamera_1_1(\n	inout vec4 result,\n	vec3 position,\n	mat4 model,\n	Camera_0_0 camera,\n	inout vec3 cameraPosition,\n	inout float cameraDistance,\n	inout vec3 cameraDirection\n) {\n	vec4 globalPosition = model * vec4( position, 1.0 );\n	cameraPosition = camera.position;\n	cameraDistance = distance(camera.position, globalPosition.xyz);\n	cameraDirection = normalize(camera.position - globalPosition.xyz);\n	result = camera.projection * camera.view * globalPosition;\n}\n\nuniform mat4 uModel;\nattribute vec3 aPosition;\n\nuniform Camera_0_0 uCamera;\nvarying vec3 vCameraPosition;\nvarying vec3 vCameraDirection;\nvarying float vCameraDistance;\n\nvoid main() {\n  applyCamera_1_1(\n    gl_Position, aPosition, uModel, uCamera,\n    vCameraPosition, vCameraDistance, vCameraDirection\n  );\n}\n";

},{"../../augment/use-augment":7,"./set-attributes":26,"./set-uniforms":27,"object-assign":220}],26:[function(require,module,exports){
"use strict";function setAttributes(t,e){t.buffers.attr("aPosition",t.data.positions),t.buffers.faces(t.data.cells)}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=setAttributes;

},{}],27:[function(require,module,exports){
"use strict";function setUniforms(o,i,r){o.uniforms.uCamera.projection=i.projection,o.uniforms.uCamera.position=i.position,o.uniforms.uCamera.view=i.view,o.uniforms.uModel=r.transform.global,o.uniforms.uColor=r.material.shading.color,o.uniforms.uOpacity=r.material.shading.opacity}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=setUniforms;

},{}],28:[function(require,module,exports){
"use strict";function _interopRequireDefault(n){return n&&n.__esModule?n:{"default":n}}function LitMaterial(n){this.flags={visible:!0,transparent:!1,recompile:!0,useLights:!0},this.defines=["CAMERA","NORMAL"],this.shader=null,this.mode="TRIANGLES",this.setUniforms=[_setUniforms2["default"]],this.setAttributes=[_setAttributes2["default"]],this.shading=n,this.use=_useAugment2["default"].bind(null,this)}function createLitMaterial(n){var e=(0,_objectAssign2["default"])({color:[.1,.1,.1],opacity:1},n);return new LitMaterial(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=createLitMaterial;var _setUniforms=require("./set-uniforms"),_setUniforms2=_interopRequireDefault(_setUniforms),_setAttributes=require("./set-attributes"),_setAttributes2=_interopRequireDefault(_setAttributes),_objectAssign=require("object-assign"),_objectAssign2=_interopRequireDefault(_objectAssign),_useAugment=require("../../augment/use-augment"),_useAugment2=_interopRequireDefault(_useAugment);LitMaterial.prototype.fragSource="#define GLSLIFY 1\nprecision mediump float;\n#define SHADER_NAME lit.frag\n\nstruct Fog_0_0 {\n	float near;\n	float far;\n	vec3 color;\n};\n\n#ifdef FOG\n	float calculateFog_3_2(\n		const float cameraDistance,\n		const float near,\n		const float far\n	) {\n		return 1.0 - clamp((far - cameraDistance) / (far - near), 0.0, 1.0);\n	}\n\n	#pragma GLAM_REQUIRES FOG\n	void applyFog_3_3(\n		inout vec4 fragment,\n		Fog_0_0 fog,\n		float cameraDistance\n	) {\n		fragment.rgb = mix(\n			fragment.rgb,\n			fog.color,\n			calculateFog_3_2( cameraDistance, fog.near, fog.far)\n		);\n	}\n#endif\n\n#ifdef NORMAL_COLOR\n	#pragma GLAM_REQUIRES NORMAL_COLOR\n	void applyNormalColor_2_4(\n		inout vec4 fragment,\n		in vec3 normal,\n		in float amount\n	) {\n		fragment.rgb = mix(fragment.rgb, normal * 0.5 + 0.5, amount);\n	}\n#endif\n\nstruct DirectionalLight_1_1 {\n  vec3 direction;\n  vec3 color;\n};\n\n#if defined(LAMBERT) && defined(DIRECTIONAL_LIGHT_COUNT) && DIRECTIONAL_LIGHT_COUNT > 0\n  #pragma GLAM_REQUIRES LAMBERT && DIRECTIONAL_LIGHT_COUNT\n  void lambertianReflectance_4_5(\n    inout vec4 fragment,\n    DirectionalLight_1_1 directionalLights[DIRECTIONAL_LIGHT_COUNT],\n    in vec3 diffuse,\n    in vec3 normal_4_6\n  ) {\n\n    for(int i_4_7=0; i_4_7 < DIRECTIONAL_LIGHT_COUNT; i_4_7++) {\n      DirectionalLight_1_1 light = directionalLights[i_4_7];\n    \n      float lightDotProduct = dot(normalize(normal_4_6), light.direction);\n      float surfaceBrightness = max(0.0, lightDotProduct);\n    \n      fragment.xyz += diffuse * light.color * surfaceBrightness;\n    }\n  }\n#endif\n\nuniform vec3 uColor;\nuniform float uOpacity;\nvarying vec3 vNormal;\n\nvarying vec3 vCameraPosition;\nvarying vec3 vCameraDirection;\nvarying float vCameraDistance;\n\nuniform Fog_0_0 uFog;\n\nuniform float uNormalColorAmount;\n\n#ifdef DIRECTIONAL_LIGHT_COUNT\n  uniform DirectionalLight_1_1 uDirectionalLights[ DIRECTIONAL_LIGHT_COUNT ];\n#endif\n\nuniform vec3 uLambertDiffuse;\n\nvoid main() {\n  gl_FragColor = vec4(uColor, uOpacity);\n  \n  applyFog_3_3(gl_FragColor, uFog, vCameraDistance);\n  applyNormalColor_2_4(gl_FragColor, vNormal, uNormalColorAmount);\n  lambertianReflectance_4_5(gl_FragColor, uDirectionalLights, uLambertDiffuse, vNormal);\n}\n",LitMaterial.prototype.vertSource="#define GLSLIFY 1\nstruct Camera_0_0 {\n	vec3 position;\n	mat4 view;\n	mat4 projection;\n	mat4 modelView;\n	mat3 normal;\n};\n\n#pragma GLAM_REQUIRES CAMERA\nvoid applyCamera_1_1(\n	inout vec4 result,\n	vec3 position,\n	mat4 model,\n	Camera_0_0 camera,\n	inout vec3 cameraPosition,\n	inout float cameraDistance,\n	inout vec3 cameraDirection\n) {\n	vec4 globalPosition = model * vec4( position, 1.0 );\n	cameraPosition = camera.position;\n	cameraDistance = distance(camera.position, globalPosition.xyz);\n	cameraDirection = normalize(camera.position - globalPosition.xyz);\n	result = camera.projection * camera.view * globalPosition;\n}\n\nuniform mat4 uModel;\nattribute vec3 aPosition;\n\n#ifdef NORMAL\n	attribute vec3 aNormal;\n	varying vec3 vNormal;\n#endif\n\nuniform Camera_0_0 uCamera;\nvarying vec3 vCameraPosition;\nvarying vec3 vCameraDirection;\nvarying float vCameraDistance;\n\nvoid main() {\n  \n  vNormal = uCamera.normal * aNormal;\n\n  applyCamera_1_1(\n    gl_Position, aPosition, uModel, uCamera,\n    vCameraPosition, vCameraDistance, vCameraDirection\n  );\n}";

},{"../../augment/use-augment":7,"./set-attributes":29,"./set-uniforms":30,"object-assign":220}],29:[function(require,module,exports){
"use strict";function setAttributes(t,e){if(!t.data.positions)throw new Error("Geometry did not any positions");if(!t.data.normals)throw new Error("Geometry did not have any normals");if(!t.data.cells)throw new Error("Geometry did not have any faces/cells");t.buffers.attr("aNormal",t.data.normals),t.buffers.attr("aPosition",t.data.positions),t.buffers.faces(t.data.cells)}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=setAttributes;

},{}],30:[function(require,module,exports){
"use strict";function setUniforms(o,r,e){o.uniforms.uCamera.projection=r.projection,o.uniforms.uCamera.position=r.position,o.uniforms.uCamera.view=r.view,o.uniforms.uCamera.modelView=r.modelView,o.uniforms.uCamera.normal=r.normal,o.uniforms.uModel=e.transform.global,o.uniforms.uColor=e.material.shading.color,o.uniforms.uOpacity=e.material.shading.opacity}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=setUniforms;

},{}],31:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function Mesh(e,t){this.meta=(0,_meta2["default"])(),this.transform=(0,_transform2["default"])(this),this.material=t,this.geometry=e,this.type=["mesh"]}function createMesh(e,t){return new Mesh(e,t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=createMesh;var _meta=require("./meta"),_meta2=_interopRequireDefault(_meta),_transform=require("../transform"),_transform2=_interopRequireDefault(_transform);

},{"../transform":57,"./meta":32}],32:[function(require,module,exports){
"use strict";function Meta(){this.name=""}function createMeta(){return new Meta}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=createMeta;

},{}],33:[function(require,module,exports){
"use strict";function autoAddCanvas(e,t,n){return n?(t.appendChild(e),function(){t.removeChild(e)}):function(){}}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=autoAddCanvas;

},{}],34:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function autoResizeCanvas(e,t,n){if(n){var a=(0,_canvasFit2["default"])(e,t);return window.addEventListener("resize",a,!1),a(),function(){window.removeEventListener("resize",a,!1)}}return function(){}}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=autoResizeCanvas;var _canvasFit=require("canvas-fit"),_canvasFit2=_interopRequireDefault(_canvasFit);

},{"canvas-fit":73}],35:[function(require,module,exports){
"use strict";function wordToExpression(e){return"#define "+e+"\n"}function buildDefines(e,i){var n=e.defines.map(wordToExpression).join("");if(e.flags.useLights){var r=i.getByType("light/directional").length;r>0&&(n+="#define DIRECTIONAL_LIGHT_COUNT "+r+"\n")}return n}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=buildDefines;

},{}],36:[function(require,module,exports){
"use strict";function clear(e,r){var o=0;r.colorBuffer&&(e.clearColor(r.color[0],r.color[1],r.color[2],r.color[3]),o|=e.COLOR_BUFFER_BIT),r.depthBuffer&&(o|=e.DEPTH_BUFFER_BIT),r.stencilBuffer&&(o|=e.STENCIL_BUFFER_BIT),o&&e.clear(o)}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=clear;

},{}],37:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function ForwardRenderer(e,t,r){var a=(0,_autoAddCanvas2["default"])(e.canvas,t.parentEl,t.autoAddCanvas),n=(0,_autoResizeCanvas2["default"])(e.canvas,t.parentEl,t.autoResizeCanvas);this.gl=e,this.canvas=e.canvas,this.render=_render2["default"].bind(null,this,(0,_shaderCache2["default"])()),this.clear=r,this.emitter=t.emitter,this.on=t.emitter.on.bind(t.emitter),this.off=t.emitter.off.bind(t.emitter),this.emitter=t.emitter,this.destroy=function(){a(),n()}}function createForwardRenderer(e){var t=(0,_objectAssign2["default"])({autoAddCanvas:!0,autoResizeCanvas:!0,canvas:null,width:null,height:null,parentEl:document.body,emitter:null},e);t.emitter||(t.emitter=new _eventemitter2["default"]);var r=(0,_objectAssign2["default"])({color:[1,1,1,1],colorBuffer:!0,depthBuffer:!0,stencilBuffer:!0},t.clear),a=(0,_webglContext2["default"])(t);return a?new ForwardRenderer(a,t,r):null}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=createForwardRenderer;var _render=require("./render"),_render2=_interopRequireDefault(_render),_webglContext=require("webgl-context"),_webglContext2=_interopRequireDefault(_webglContext),_autoAddCanvas=require("./auto-add-canvas"),_autoAddCanvas2=_interopRequireDefault(_autoAddCanvas),_autoResizeCanvas=require("./auto-resize-canvas"),_autoResizeCanvas2=_interopRequireDefault(_autoResizeCanvas),_objectAssign=require("object-assign"),_objectAssign2=_interopRequireDefault(_objectAssign),_eventemitter=require("eventemitter3"),_eventemitter2=_interopRequireDefault(_eventemitter),_shaderCache=require("../shader-cache"),_shaderCache2=_interopRequireDefault(_shaderCache);

},{"../shader-cache":44,"./auto-add-canvas":33,"./auto-resize-canvas":34,"./render":38,"eventemitter3":136,"object-assign":220,"webgl-context":248}],38:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function renderForwardScene(e,r,a,t){var d=e.gl,u=a.getByType("mesh"),n=a.getByType("light");d.enable(d.DEPTH_TEST),d.viewport(0,0,d.canvas.width,d.canvas.height),(0,_clear2["default"])(d,e.clear),a.flags.changed&&(0,_updateShaders2["default"])(e.gl,r,u,n,a),a.updateTransforms(),t.update(e.canvas),(0,_updateLights2["default"])(n),e.emitter.emit("beforerender");for(var i=0;i<u.length;i++){var s=u[i],l=s.material,o=s.geometry;l&&o&&(l.shader.attributes.aNormal&&(t.updateModelView(s.transform.global),t.updateNormal()),o.buffers.bind(l.shader),l.setUniforms.forEach(function(e){return e(l.shader,t,s,n)}),o.buffers.draw(d[l.mode]),o.buffers.unbind())}e.emitter.emit("afterrender"),(0,_renderDone2["default"])(a)}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=renderForwardScene;var _updateShaders=require("./update-shaders"),_updateShaders2=_interopRequireDefault(_updateShaders),_renderDone=require("../../scene/render-done"),_renderDone2=_interopRequireDefault(_renderDone),_clear=require("./clear"),_clear2=_interopRequireDefault(_clear),_updateLights=require("./update-lights"),_updateLights2=_interopRequireDefault(_updateLights);

},{"../../scene/render-done":55,"./clear":36,"./update-lights":39,"./update-shaders":40}],39:[function(require,module,exports){
"use strict";function updateLights(e){for(var t=0;t<e.length;t++)e[t].update()}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=updateLights;

},{}],40:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function updateShaders(e,r,t,u,a){a.flags.changed&&r.clearMeshes();for(var l=function(){var u=t[f],l=u.material,i=u.geometry;if(l&&(l.flags.recompile||a.flags.lightsChanged)){var s=(0,_buildDefines2["default"])(l,a);l.shader=r.getOrCreate(e,u,s),l.flags.recompile=!1}i&&i.flags.updateBuffers&&(i.buffers||(i.buffers=(0,_glGeometry2["default"])(e),l.setAttributes.forEach(function(e){return e(i,l.shader)})))},f=0;f<t.length;f++)l();a.flags.changed&&r.clearUnused()}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=updateShaders;var _glGeometry=require("gl-geometry"),_glGeometry2=_interopRequireDefault(_glGeometry),_buildDefines=require("./build-defines"),_buildDefines2=_interopRequireDefault(_buildDefines);

},{"./build-defines":35,"gl-geometry":143}],41:[function(require,module,exports){
"use strict";function clearMeshes(e){for(var s in e)e[s].meshes=[]}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=clearMeshes;

},{}],42:[function(require,module,exports){
"use strict";function clearUnused(e){for(var t in e)0===e[t].meshes.length&&delete e[t]}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=clearUnused;

},{}],43:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function createShaderOrGetCached(e,r,s,t){var u,a=s.material,d=t+a.vertSource+a.fragSource,n=e[d];return n?(u=n.shader,n.meshes.push(s)):(u=(0,_glShader2["default"])(r,(0,_stripUnusedFns2["default"])(t+a.vertSource,a.defines),(0,_stripUnusedFns2["default"])(t+a.fragSource,a.defines)),e[d]={shader:u,meshes:[s]}),u}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=createShaderOrGetCached;var _glShader=require("gl-shader"),_glShader2=_interopRequireDefault(_glShader),_stripUnusedFns=require("../shader-parser/strip-unused-fns"),_stripUnusedFns2=_interopRequireDefault(_stripUnusedFns);

},{"../shader-parser/strip-unused-fns":45,"gl-shader":177}],44:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function shaderCache(){var e=Object.create(null);return{clearMeshes:_clearMeshes2["default"].bind(null,e),clearUnused:_clearUnused2["default"].bind(null,e),getOrCreate:_getOrCreate2["default"].bind(null,e)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=shaderCache;var _clearMeshes=require("./clear-meshes"),_clearMeshes2=_interopRequireDefault(_clearMeshes),_clearUnused=require("./clear-unused"),_clearUnused2=_interopRequireDefault(_clearUnused),_getOrCreate=require("./get-or-create"),_getOrCreate2=_interopRequireDefault(_getOrCreate);

},{"./clear-meshes":41,"./clear-unused":42,"./get-or-create":43}],45:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{"default":t}}function removeThisFunction(t,e){for(var r=e+1;r<t.length;r++){var n=t[r];if("operator"===n.type&&";"===n.data){var i=t[r+1];"whitespace"===i.type&&"\n"===i.data[0]&&(i.data=i.data.substr(1));var a=t[e-1];if("whitespace"===a.type){var o=a.data.match("[	 ]*$")[0];a.data=a.data.substr(0,a.data.length-o.length)}return void t.splice(e,r-e+1)}}}function stripFunctionsByName(t,e,r){for(var n=e+1;n<t.length;n++){var i=t[n];"ident"===i.type&&i.data===r&&removeThisFunction(t,n)}}function findAndStripFollowingFunctions(t,e){for(var r=e+1;r<t.length;r++){var n=t[r];if("ident"===n.type){var i=n.data;return stripFunctionsByName(t,r,i)}}}function getDefines(t){for(var e=[],r=0;r<t.length;r++){var n=t[r];if("preprocessor"===n.type){var i=n.data.match(/#define ([a-zA-Z_]+)/)||[];i[1]&&e.push(i[1])}}return e}function stripUnusedFunctions(t){for(var e=(0,_string2["default"])(t),r=getDefines(e),n=/#pragma GLAM_REQUIRES (.+)/,i=0;i<e.length;i++){var a=e[i];if("preprocessor"===a.type){var o=a.data.match(n);if(o){a.data="";for(var s=o[1].split(" && "),u=!1,l=0;l<s.length;l++)u=u||-1===r.indexOf(s[l]);u&&findAndStripFollowingFunctions(e,i)}}}return(0,_glslTokenString2["default"])(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=stripUnusedFunctions;var _string=require("glsl-tokenizer/string"),_string2=_interopRequireDefault(_string),_glslTokenString=require("glsl-token-string"),_glslTokenString2=_interopRequireDefault(_glslTokenString);

},{"glsl-token-string":205,"glsl-tokenizer/string":210}],46:[function(require,module,exports){
"use strict";function setScenesRenderer(e,t){return"object"===("undefined"==typeof t?"undefined":_typeof(t))&&"function"==typeof t.render&&(e.renderer=t,e.render=t.render.bind(null,e)),e}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=setScenesRenderer;

},{}],47:[function(require,module,exports){
"use strict";function getNodesByType(e,t){var s=e.types[t];return s||(s=e.types[t]=[]),s}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=getNodesByType;

},{}],48:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function Scene(){var e={children:new _es6Map2["default"],parent:new _es6Map2["default"],types:{}};this.flags={changed:!0},this.render=function(){},this.renderer=null,this.add=_add2["default"].bind(null,this,e),this.remove=_remove2["default"].bind(null,this,e),this.children=_children2["default"].bind(null,this,e),this.parent=_parent2["default"].bind(null,e),this.attachRenderer=_attachRenderer2["default"].bind(null,this),this.getByType=_getByType2["default"].bind(null,e),this.updateTransforms=_updateTransforms2["default"].bind(null,this,e)}function createScene(e){var r=new Scene;return e&&e.renderer&&(0,_attachRenderer2["default"])(r,e.renderer),r}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=createScene;var _remove=require("./node/remove"),_remove2=_interopRequireDefault(_remove),_add=require("./node/add"),_add2=_interopRequireDefault(_add),_children=require("./node/children"),_children2=_interopRequireDefault(_children),_parent=require("./node/parent"),_parent2=_interopRequireDefault(_parent),_attachRenderer=require("./attach-renderer"),_attachRenderer2=_interopRequireDefault(_attachRenderer),_getByType=require("./get-by-type"),_getByType2=_interopRequireDefault(_getByType),_updateTransforms=require("./update-transforms"),_updateTransforms2=_interopRequireDefault(_updateTransforms),_es6Map=require("es6-map"),_es6Map2=_interopRequireDefault(_es6Map);

},{"./attach-renderer":46,"./get-by-type":47,"./node/add":49,"./node/children":50,"./node/parent":52,"./node/remove":53,"./update-transforms":56,"es6-map":124}],49:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function addChildToNode(e,t,o,d){if("object"!==("undefined"==typeof d?"undefined":_typeof(d)))throw new Error("Only objects are allowed in the scene graph");if(t.parent.get(d))throw new Error("The node was already added to the scene graph, it must be removed before adding it somewhere else.");var r=e.children(o);r.push(d),t.parent.set(d,o),(0,_updateTypes2["default"])(e,t,d,"add"),e.flags.changed=!0}function add(e,t,o,d){var r,n;if(o&&d)r=o,n=d;else{if(!o||d)throw new Error("Tried to add nothing to the scene.");r=e,n=o}return addChildToNode(e,t,r,n),e}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};Object.defineProperty(exports,"__esModule",{value:!0}),exports.addChildToNode=addChildToNode,exports["default"]=add;var _updateTypes=require("./update-types"),_updateTypes2=_interopRequireDefault(_updateTypes);

},{"./update-types":54}],50:[function(require,module,exports){
"use strict";function getNodesChildren(e,r){var t=e.children.get(r);return t||(t=[],e.children.set(r,t)),t}function getChildren(e,r,t){var d=t||e;return getNodesChildren(r,d)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getNodesChildren=getNodesChildren,exports["default"]=getChildren;

},{}],51:[function(require,module,exports){
"use strict";function isRooted(e,t,o){do o=t.parent.get(o);while(o!==e&&void 0!==o);return e===o}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=isRooted;

},{}],52:[function(require,module,exports){
"use strict";function getNodeParent(e,t){return e.parent.get(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=getNodeParent;

},{}],53:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function nodeRemoveChild(e,t,r,o){var d=e.children(r),n=d.indexOf(o);n>=0&&((0,_updateTypes2["default"])(e,t,o,"remove"),e.flags.changed=!0,d.splice(n,1),t.parent["delete"](o))}function remove(e,t,r,o){var d,n;if(r&&o)d=r,n=o;else{if(!r||o)throw new Error("Tried to add nothing to the scene.");d=e,n=r}return nodeRemoveChild(e,t,d,n),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.nodeRemoveChild=nodeRemoveChild,exports["default"]=remove;var _updateTypes=require("./update-types"),_updateTypes2=_interopRequireDefault(_updateTypes);

},{"./update-types":54}],54:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function updateTypes(e,t,o,s){for(var p=o.type||BLANK,d=0;d<p.length;d++){var u=p[d],r=t.types[u];if(t.types[u]||(r=[],t.types[u]=r),"light"===u&&(e.flags.lightsChanged=!0),"add"===s)r.push(o);else{var a=r.indexOf(o);-1!==a&&r.splice(a,1)}}for(var i=e.children(o),f=0;f<i.length;f++)updateTypes(e,t,i[f],s)}function updateTypesIfRooted(e,t,o,s){(0,_isRooted2["default"])(e,t,o)&&updateTypes(e,t,o,s)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.updateTypes=updateTypes,exports["default"]=updateTypesIfRooted;var _isRooted=require("./is-rooted"),_isRooted2=_interopRequireDefault(_isRooted),BLANK=[];

},{"./is-rooted":51}],55:[function(require,module,exports){
"use strict";function renderDone(e){e.flags.changed=!1}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=renderDone;

},{}],56:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{"default":t}}function walkAndUpdateTransforms(t,r,a){for(var e=0;e<r.length;e++){var o=a,n=r[e];if("object"===_typeof(n.transform))if(n.transform.flags.autoUpdate){(0,_update2["default"])(n.transform);var l=n.transform.local,f=n.transform.global;(0,_glMat.multiply)(f,a,l),o=f}else o=n.transform.global;walkAndUpdateTransforms(t,t.children.get(n),o)}}function updateGlobalTransforms(t,r){for(var a=r.children.get(t),e=0;e<a.length;e++){var o=a[e],n=IDENTITY;"object"===_typeof(o.transform)&&(o.transform.flags.autoUpdate&&((0,_update2["default"])(o.transform),(0,_glMat.copy)(o.transform.global,o.transform.local)),n=o.transform.global),walkAndUpdateTransforms(r,t.children(o),n)}}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};Object.defineProperty(exports,"__esModule",{value:!0}),exports.walkAndUpdateTransforms=walkAndUpdateTransforms,exports["default"]=updateGlobalTransforms;var _update=require("../transform/update"),_update2=_interopRequireDefault(_update),_glMat=require("gl-mat4"),IDENTITY=(0,_glMat.identity)(Array(16));

},{"../transform/update":60,"gl-mat4":156}],57:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function Transform(){this.flags={autoUpdate:!0,useEuler:!0},this.position=[0,0,0],this.globalPosition=[0,0,0],this.scale=[1,1,1],this.quaternion=[0,0,0,1],this.euler=[0,0,0],this.eulerOrder=["x","y","z"],this.local=(0,_create2["default"])(),this.global=(0,_create2["default"])()}function createTransform(e){var t=new Transform;return e&&(e.position=t.position,e.quaternion=t.quaternion,e.euler=t.euler,e.scale=t.scale),t}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=createTransform;var _create=require("gl-mat4/create"),_create2=_interopRequireDefault(_create);

},{"gl-mat4/create":150}],58:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function updateEuler(e){if(e.flags.useEuler){var t=e.quaternion,r=rotate[e.eulerOrder[0]],u=rotate[e.eulerOrder[1]],a=rotate[e.eulerOrder[2]];(0,_identity2["default"])(t),r(t,t,e.euler[0]),u(t,t,e.euler[1]),a(t,t,e.euler[2])}}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=updateEuler;var _identity=require("gl-quat/identity"),_identity2=_interopRequireDefault(_identity),_rotateX=require("gl-quat/rotateX"),_rotateX2=_interopRequireDefault(_rotateX),_rotateY=require("gl-quat/rotateY"),_rotateY2=_interopRequireDefault(_rotateY),_rotateZ=require("gl-quat/rotateZ"),_rotateZ2=_interopRequireDefault(_rotateZ),rotate={x:_rotateX2["default"],y:_rotateY2["default"],z:_rotateZ2["default"]};

},{"gl-quat/identity":171,"gl-quat/rotateX":174,"gl-quat/rotateY":175,"gl-quat/rotateZ":176}],59:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function updateTransform(e){e.flags.autoUpdate&&((0,_updateEuler2["default"])(e),(0,_fromRotationTranslation2["default"])(rotationTranslation,e.quaternion,e.position),(0,_copy2["default"])(e.global,e.local))}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=updateTransform;var _create=require("gl-mat4/create"),_create2=_interopRequireDefault(_create),_fromRotationTranslation=require("gl-mat4/fromRotationTranslation"),_fromRotationTranslation2=_interopRequireDefault(_fromRotationTranslation),_copy=require("gl-mat4/copy"),_copy2=_interopRequireDefault(_copy),_updateEuler=require("./update-euler"),_updateEuler2=_interopRequireDefault(_updateEuler),rotationTranslation=(0,_create2["default"])();

},{"./update-euler":58,"gl-mat4/copy":149,"gl-mat4/create":150,"gl-mat4/fromRotationTranslation":153}],60:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function updateTransform(e){e.flags.autoUpdate&&((0,_updateEuler2["default"])(e),(0,_fromRotationTranslation2["default"])(rotationTranslation,e.quaternion,e.position),(0,_identity2["default"])(scale),(0,_scale2["default"])(scale,scale,e.scale),(0,_multiply2["default"])(e.local,rotationTranslation,scale))}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=updateTransform;var _create=require("gl-mat4/create"),_create2=_interopRequireDefault(_create),_fromRotationTranslation=require("gl-mat4/fromRotationTranslation"),_fromRotationTranslation2=_interopRequireDefault(_fromRotationTranslation),_multiply=require("gl-mat4/multiply"),_multiply2=_interopRequireDefault(_multiply),_scale=require("gl-mat4/scale"),_scale2=_interopRequireDefault(_scale),_identity=require("gl-mat4/identity"),_identity2=_interopRequireDefault(_identity),_updateEuler=require("./update-euler"),_updateEuler2=_interopRequireDefault(_updateEuler),rotationTranslation=(0,_create2["default"])(),scale=(0,_create2["default"])();

},{"./update-euler":58,"gl-mat4/create":150,"gl-mat4/fromRotationTranslation":153,"gl-mat4/identity":155,"gl-mat4/multiply":159,"gl-mat4/scale":167}],61:[function(require,module,exports){
function addLineNumbers(e,n,r){n="number"==typeof n?n:1,r=r||": ";var t=e.split(/\r?\n/),a=String(t.length+n-1).length;return t.map(function(e,t){var i=t+n,u=String(i).length,d=padLeft(i,a-u);return d+r+e}).join("\n")}var padLeft=require("pad-left");module.exports=addLineNumbers;

},{"pad-left":223}],62:[function(require,module,exports){
function pack(e,t){if(t=t||"float32",!e[0]||!e[0].length)return e;for(var r="string"==typeof t?dtype(t):t,n=e[0].length,o=new r(e.length*n),p=0,a=0;a<e.length;a++)for(var f=0;n>f;f++)o[p++]=e[a][f];return o}var dtype=require("dtype");module.exports=pack;

},{"dtype":63}],63:[function(require,module,exports){
(function (Buffer){
module.exports=function(r){switch(r){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray;case"generic":case"data":case"dataview":return ArrayBuffer;case"buffer":return"undefined"==typeof Buffer?ArrayBuffer:Buffer}};

}).call(this,require("buffer").Buffer)

},{"buffer":67}],64:[function(require,module,exports){
module.exports=function(o){return atob(o)};

},{}],65:[function(require,module,exports){
var lookup="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(t){"use strict";function r(t){var r=t.charCodeAt(0);return r===h||r===u?62:r===c||r===f?63:o>r?-1:o+10>r?r-o+26+26:i+26>r?r-i:A+26>r?r-A+26:void 0}function e(t){function e(t){i[f++]=t}var n,h,c,o,A,i;if(t.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var u=t.length;A="="===t.charAt(u-2)?2:"="===t.charAt(u-1)?1:0,i=new a(3*t.length/4-A),c=A>0?t.length-4:t.length;var f=0;for(n=0,h=0;c>n;n+=4,h+=3)o=r(t.charAt(n))<<18|r(t.charAt(n+1))<<12|r(t.charAt(n+2))<<6|r(t.charAt(n+3)),e((16711680&o)>>16),e((65280&o)>>8),e(255&o);return 2===A?(o=r(t.charAt(n))<<2|r(t.charAt(n+1))>>4,e(255&o)):1===A&&(o=r(t.charAt(n))<<10|r(t.charAt(n+1))<<4|r(t.charAt(n+2))>>2,e(o>>8&255),e(255&o)),i}function n(t){function r(t){return lookup.charAt(t)}function e(t){return r(t>>18&63)+r(t>>12&63)+r(t>>6&63)+r(63&t)}var n,a,h,c=t.length%3,o="";for(n=0,h=t.length-c;h>n;n+=3)a=(t[n]<<16)+(t[n+1]<<8)+t[n+2],o+=e(a);switch(c){case 1:a=t[t.length-1],o+=r(a>>2),o+=r(a<<4&63),o+="==";break;case 2:a=(t[t.length-2]<<8)+t[t.length-1],o+=r(a>>10),o+=r(a>>4&63),o+=r(a<<2&63),o+="="}return o}var a="undefined"!=typeof Uint8Array?Uint8Array:Array,h="+".charCodeAt(0),c="/".charCodeAt(0),o="0".charCodeAt(0),A="a".charCodeAt(0),i="A".charCodeAt(0),u="-".charCodeAt(0),f="_".charCodeAt(0);t.toByteArray=e,t.fromByteArray=n}("undefined"==typeof exports?this.base64js={}:exports);

},{}],66:[function(require,module,exports){
"use strict";"use restrict";function countTrailingZeros(r){var n=32;return r&=-r,r&&n--,65535&r&&(n-=16),16711935&r&&(n-=8),252645135&r&&(n-=4),858993459&r&&(n-=2),1431655765&r&&(n-=1),n}var INT_BITS=32;exports.INT_BITS=INT_BITS,exports.INT_MAX=2147483647,exports.INT_MIN=-1<<INT_BITS-1,exports.sign=function(r){return(r>0)-(0>r)},exports.abs=function(r){var n=r>>INT_BITS-1;return(r^n)-n},exports.min=function(r,n){return n^(r^n)&-(n>r)},exports.max=function(r,n){return r^(r^n)&-(n>r)},exports.isPow2=function(r){return!(r&r-1||!r)},exports.log2=function(r){var n,t;return n=(r>65535)<<4,r>>>=n,t=(r>255)<<3,r>>>=t,n|=t,t=(r>15)<<2,r>>>=t,n|=t,t=(r>3)<<1,r>>>=t,n|=t,n|r>>1},exports.log10=function(r){return r>=1e9?9:r>=1e8?8:r>=1e7?7:r>=1e6?6:r>=1e5?5:r>=1e4?4:r>=1e3?3:r>=100?2:r>=10?1:0},exports.popCount=function(r){return r-=r>>>1&1431655765,r=(858993459&r)+(r>>>2&858993459),16843009*(r+(r>>>4)&252645135)>>>24},exports.countTrailingZeros=countTrailingZeros,exports.nextPow2=function(r){return r+=0===r,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,r|=r>>>16,r+1},exports.prevPow2=function(r){return r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,r|=r>>>16,r-(r>>>1)},exports.parity=function(r){return r^=r>>>16,r^=r>>>8,r^=r>>>4,r&=15,27030>>>r&1};var REVERSE_TABLE=new Array(256);!function(r){for(var n=0;256>n;++n){var t=n,e=n,o=7;for(t>>>=1;t;t>>>=1)e<<=1,e|=1&t,--o;r[n]=e<<o&255}}(REVERSE_TABLE),exports.reverse=function(r){return REVERSE_TABLE[255&r]<<24|REVERSE_TABLE[r>>>8&255]<<16|REVERSE_TABLE[r>>>16&255]<<8|REVERSE_TABLE[r>>>24&255]},exports.interleave2=function(r,n){return r&=65535,r=16711935&(r|r<<8),r=252645135&(r|r<<4),r=858993459&(r|r<<2),r=1431655765&(r|r<<1),n&=65535,n=16711935&(n|n<<8),n=252645135&(n|n<<4),n=858993459&(n|n<<2),n=1431655765&(n|n<<1),r|n<<1},exports.deinterleave2=function(r,n){return r=r>>>n&1431655765,r=858993459&(r|r>>>1),r=252645135&(r|r>>>2),r=16711935&(r|r>>>4),r=65535&(r|r>>>16),r<<16>>16},exports.interleave3=function(r,n,t){return r&=1023,r=4278190335&(r|r<<16),r=251719695&(r|r<<8),r=3272356035&(r|r<<4),r=1227133513&(r|r<<2),n&=1023,n=4278190335&(n|n<<16),n=251719695&(n|n<<8),n=3272356035&(n|n<<4),n=1227133513&(n|n<<2),r|=n<<1,t&=1023,t=4278190335&(t|t<<16),t=251719695&(t|t<<8),t=3272356035&(t|t<<4),t=1227133513&(t|t<<2),r|t<<2},exports.deinterleave3=function(r,n){return r=r>>>n&1227133513,r=3272356035&(r|r>>>2),r=251719695&(r|r>>>4),r=4278190335&(r|r>>>8),r=1023&(r|r>>>16),r<<22>>22},exports.nextCombination=function(r){var n=r|r-1;return n+1|(~n&-~n)-1>>>countTrailingZeros(r)+1};

},{}],67:[function(require,module,exports){
(function (global){
"use strict";function typedArraySupport(){function t(){}try{var e=new Uint8Array(1);return e.foo=function(){return 42},e.constructor=t,42===e.foo()&&e.constructor===t&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(r){return!1}}function kMaxLength(){return Buffer.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function Buffer(t){return this instanceof Buffer?(Buffer.TYPED_ARRAY_SUPPORT||(this.length=0,this.parent=void 0),"number"==typeof t?fromNumber(this,t):"string"==typeof t?fromString(this,t,arguments.length>1?arguments[1]:"utf8"):fromObject(this,t)):arguments.length>1?new Buffer(t,arguments[1]):new Buffer(t)}function fromNumber(t,e){if(t=allocate(t,0>e?0:0|checked(e)),!Buffer.TYPED_ARRAY_SUPPORT)for(var r=0;e>r;r++)t[r]=0;return t}function fromString(t,e,r){("string"!=typeof r||""===r)&&(r="utf8");var n=0|byteLength(e,r);return t=allocate(t,n),t.write(e,r),t}function fromObject(t,e){if(Buffer.isBuffer(e))return fromBuffer(t,e);if(isArray(e))return fromArray(t,e);if(null==e)throw new TypeError("must start with number, buffer, array or string");if("undefined"!=typeof ArrayBuffer){if(e.buffer instanceof ArrayBuffer)return fromTypedArray(t,e);if(e instanceof ArrayBuffer)return fromArrayBuffer(t,e)}return e.length?fromArrayLike(t,e):fromJsonObject(t,e)}function fromBuffer(t,e){var r=0|checked(e.length);return t=allocate(t,r),e.copy(t,0,0,r),t}function fromArray(t,e){var r=0|checked(e.length);t=allocate(t,r);for(var n=0;r>n;n+=1)t[n]=255&e[n];return t}function fromTypedArray(t,e){var r=0|checked(e.length);t=allocate(t,r);for(var n=0;r>n;n+=1)t[n]=255&e[n];return t}function fromArrayBuffer(t,e){return Buffer.TYPED_ARRAY_SUPPORT?(e.byteLength,t=Buffer._augment(new Uint8Array(e))):t=fromTypedArray(t,new Uint8Array(e)),t}function fromArrayLike(t,e){var r=0|checked(e.length);t=allocate(t,r);for(var n=0;r>n;n+=1)t[n]=255&e[n];return t}function fromJsonObject(t,e){var r,n=0;"Buffer"===e.type&&isArray(e.data)&&(r=e.data,n=0|checked(r.length)),t=allocate(t,n);for(var f=0;n>f;f+=1)t[f]=255&r[f];return t}function allocate(t,e){Buffer.TYPED_ARRAY_SUPPORT?(t=Buffer._augment(new Uint8Array(e)),t.__proto__=Buffer.prototype):(t.length=e,t._isBuffer=!0);var r=0!==e&&e<=Buffer.poolSize>>>1;return r&&(t.parent=rootParent),t}function checked(t){if(t>=kMaxLength())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+kMaxLength().toString(16)+" bytes");return 0|t}function SlowBuffer(t,e){if(!(this instanceof SlowBuffer))return new SlowBuffer(t,e);var r=new Buffer(t,e);return delete r.parent,r}function byteLength(t,e){"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"binary":case"raw":case"raws":return r;case"utf8":case"utf-8":return utf8ToBytes(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return base64ToBytes(t).length;default:if(n)return utf8ToBytes(t).length;e=(""+e).toLowerCase(),n=!0}}function slowToString(t,e,r){var n=!1;if(e=0|e,r=void 0===r||r===1/0?this.length:0|r,t||(t="utf8"),0>e&&(e=0),r>this.length&&(r=this.length),e>=r)return"";for(;;)switch(t){case"hex":return hexSlice(this,e,r);case"utf8":case"utf-8":return utf8Slice(this,e,r);case"ascii":return asciiSlice(this,e,r);case"binary":return binarySlice(this,e,r);case"base64":return base64Slice(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function hexWrite(t,e,r,n){r=Number(r)||0;var f=t.length-r;n?(n=Number(n),n>f&&(n=f)):n=f;var i=e.length;if(i%2!==0)throw new Error("Invalid hex string");n>i/2&&(n=i/2);for(var o=0;n>o;o++){var u=parseInt(e.substr(2*o,2),16);if(isNaN(u))throw new Error("Invalid hex string");t[r+o]=u}return o}function utf8Write(t,e,r,n){return blitBuffer(utf8ToBytes(e,t.length-r),t,r,n)}function asciiWrite(t,e,r,n){return blitBuffer(asciiToBytes(e),t,r,n)}function binaryWrite(t,e,r,n){return asciiWrite(t,e,r,n)}function base64Write(t,e,r,n){return blitBuffer(base64ToBytes(e),t,r,n)}function ucs2Write(t,e,r,n){return blitBuffer(utf16leToBytes(e,t.length-r),t,r,n)}function base64Slice(t,e,r){return 0===e&&r===t.length?base64.fromByteArray(t):base64.fromByteArray(t.slice(e,r))}function utf8Slice(t,e,r){r=Math.min(t.length,r);for(var n=[],f=e;r>f;){var i=t[f],o=null,u=i>239?4:i>223?3:i>191?2:1;if(r>=f+u){var s,a,h,c;switch(u){case 1:128>i&&(o=i);break;case 2:s=t[f+1],128===(192&s)&&(c=(31&i)<<6|63&s,c>127&&(o=c));break;case 3:s=t[f+1],a=t[f+2],128===(192&s)&&128===(192&a)&&(c=(15&i)<<12|(63&s)<<6|63&a,c>2047&&(55296>c||c>57343)&&(o=c));break;case 4:s=t[f+1],a=t[f+2],h=t[f+3],128===(192&s)&&128===(192&a)&&128===(192&h)&&(c=(15&i)<<18|(63&s)<<12|(63&a)<<6|63&h,c>65535&&1114112>c&&(o=c))}}null===o?(o=65533,u=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),f+=u}return decodeCodePointsArray(n)}function decodeCodePointsArray(t){var e=t.length;if(MAX_ARGUMENTS_LENGTH>=e)return String.fromCharCode.apply(String,t);for(var r="",n=0;e>n;)r+=String.fromCharCode.apply(String,t.slice(n,n+=MAX_ARGUMENTS_LENGTH));return r}function asciiSlice(t,e,r){var n="";r=Math.min(t.length,r);for(var f=e;r>f;f++)n+=String.fromCharCode(127&t[f]);return n}function binarySlice(t,e,r){var n="";r=Math.min(t.length,r);for(var f=e;r>f;f++)n+=String.fromCharCode(t[f]);return n}function hexSlice(t,e,r){var n=t.length;(!e||0>e)&&(e=0),(!r||0>r||r>n)&&(r=n);for(var f="",i=e;r>i;i++)f+=toHex(t[i]);return f}function utf16leSlice(t,e,r){for(var n=t.slice(e,r),f="",i=0;i<n.length;i+=2)f+=String.fromCharCode(n[i]+256*n[i+1]);return f}function checkOffset(t,e,r){if(t%1!==0||0>t)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function checkInt(t,e,r,n,f,i){if(!Buffer.isBuffer(t))throw new TypeError("buffer must be a Buffer instance");if(e>f||i>e)throw new RangeError("value is out of bounds");if(r+n>t.length)throw new RangeError("index out of range")}function objectWriteUInt16(t,e,r,n){0>e&&(e=65535+e+1);for(var f=0,i=Math.min(t.length-r,2);i>f;f++)t[r+f]=(e&255<<8*(n?f:1-f))>>>8*(n?f:1-f)}function objectWriteUInt32(t,e,r,n){0>e&&(e=4294967295+e+1);for(var f=0,i=Math.min(t.length-r,4);i>f;f++)t[r+f]=e>>>8*(n?f:3-f)&255}function checkIEEE754(t,e,r,n,f,i){if(e>f||i>e)throw new RangeError("value is out of bounds");if(r+n>t.length)throw new RangeError("index out of range");if(0>r)throw new RangeError("index out of range")}function writeFloat(t,e,r,n,f){return f||checkIEEE754(t,e,r,4,3.4028234663852886e38,-3.4028234663852886e38),ieee754.write(t,e,r,n,23,4),r+4}function writeDouble(t,e,r,n,f){return f||checkIEEE754(t,e,r,8,1.7976931348623157e308,-1.7976931348623157e308),ieee754.write(t,e,r,n,52,8),r+8}function base64clean(t){if(t=stringtrim(t).replace(INVALID_BASE64_RE,""),t.length<2)return"";for(;t.length%4!==0;)t+="=";return t}function stringtrim(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function toHex(t){return 16>t?"0"+t.toString(16):t.toString(16)}function utf8ToBytes(t,e){e=e||1/0;for(var r,n=t.length,f=null,i=[],o=0;n>o;o++){if(r=t.charCodeAt(o),r>55295&&57344>r){if(!f){if(r>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(o+1===n){(e-=3)>-1&&i.push(239,191,189);continue}f=r;continue}if(56320>r){(e-=3)>-1&&i.push(239,191,189),f=r;continue}r=(f-55296<<10|r-56320)+65536}else f&&(e-=3)>-1&&i.push(239,191,189);if(f=null,128>r){if((e-=1)<0)break;i.push(r)}else if(2048>r){if((e-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(65536>r){if((e-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(1114112>r))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function asciiToBytes(t){for(var e=[],r=0;r<t.length;r++)e.push(255&t.charCodeAt(r));return e}function utf16leToBytes(t,e){for(var r,n,f,i=[],o=0;o<t.length&&!((e-=2)<0);o++)r=t.charCodeAt(o),n=r>>8,f=r%256,i.push(f),i.push(n);return i}function base64ToBytes(t){return base64.toByteArray(base64clean(t))}function blitBuffer(t,e,r,n){for(var f=0;n>f&&!(f+r>=e.length||f>=t.length);f++)e[f+r]=t[f];return f}var base64=require("base64-js"),ieee754=require("ieee754"),isArray=require("isarray");exports.Buffer=Buffer,exports.SlowBuffer=SlowBuffer,exports.INSPECT_MAX_BYTES=50,Buffer.poolSize=8192;var rootParent={};Buffer.TYPED_ARRAY_SUPPORT=void 0!==global.TYPED_ARRAY_SUPPORT?global.TYPED_ARRAY_SUPPORT:typedArraySupport(),Buffer.TYPED_ARRAY_SUPPORT?(Buffer.prototype.__proto__=Uint8Array.prototype,Buffer.__proto__=Uint8Array):(Buffer.prototype.length=void 0,Buffer.prototype.parent=void 0),Buffer.isBuffer=function(t){return!(null==t||!t._isBuffer)},Buffer.compare=function(t,e){if(!Buffer.isBuffer(t)||!Buffer.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,f=0,i=Math.min(r,n);i>f&&t[f]===e[f];)++f;return f!==i&&(r=t[f],n=e[f]),n>r?-1:r>n?1:0},Buffer.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.concat=function(t,e){if(!isArray(t))throw new TypeError("list argument must be an Array of Buffers.");if(0===t.length)return new Buffer(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;r++)e+=t[r].length;var n=new Buffer(e),f=0;for(r=0;r<t.length;r++){var i=t[r];i.copy(n,f),f+=i.length}return n},Buffer.byteLength=byteLength,Buffer.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?utf8Slice(this,0,t):slowToString.apply(this,arguments)},Buffer.prototype.equals=function(t){if(!Buffer.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:0===Buffer.compare(this,t)},Buffer.prototype.inspect=function(){var t="",e=exports.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},Buffer.prototype.compare=function(t){if(!Buffer.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?0:Buffer.compare(this,t)},Buffer.prototype.indexOf=function(t,e){function r(t,e,r){for(var n=-1,f=0;r+f<t.length;f++)if(t[r+f]===e[-1===n?0:f-n]){if(-1===n&&(n=f),f-n+1===e.length)return r+n}else n=-1;return-1}if(e>2147483647?e=2147483647:-2147483648>e&&(e=-2147483648),e>>=0,0===this.length)return-1;if(e>=this.length)return-1;if(0>e&&(e=Math.max(this.length+e,0)),"string"==typeof t)return 0===t.length?-1:String.prototype.indexOf.call(this,t,e);if(Buffer.isBuffer(t))return r(this,t,e);if("number"==typeof t)return Buffer.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,t,e):r(this,[t],e);throw new TypeError("val must be string, number or Buffer")},Buffer.prototype.get=function(t){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(t)},Buffer.prototype.set=function(t,e){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(t,e)},Buffer.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else if(isFinite(e))e=0|e,isFinite(r)?(r=0|r,void 0===n&&(n="utf8")):(n=r,r=void 0);else{var f=n;n=e,e=0|r,r=f}var i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(0>r||0>e)||e>this.length)throw new RangeError("attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return hexWrite(this,t,e,r);case"utf8":case"utf-8":return utf8Write(this,t,e,r);case"ascii":return asciiWrite(this,t,e,r);case"binary":return binaryWrite(this,t,e,r);case"base64":return base64Write(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},Buffer.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var MAX_ARGUMENTS_LENGTH=4096;Buffer.prototype.slice=function(t,e){var r=this.length;t=~~t,e=void 0===e?r:~~e,0>t?(t+=r,0>t&&(t=0)):t>r&&(t=r),0>e?(e+=r,0>e&&(e=0)):e>r&&(e=r),t>e&&(e=t);var n;if(Buffer.TYPED_ARRAY_SUPPORT)n=Buffer._augment(this.subarray(t,e));else{var f=e-t;n=new Buffer(f,void 0);for(var i=0;f>i;i++)n[i]=this[i+t]}return n.length&&(n.parent=this.parent||this),n},Buffer.prototype.readUIntLE=function(t,e,r){t=0|t,e=0|e,r||checkOffset(t,e,this.length);for(var n=this[t],f=1,i=0;++i<e&&(f*=256);)n+=this[t+i]*f;return n},Buffer.prototype.readUIntBE=function(t,e,r){t=0|t,e=0|e,r||checkOffset(t,e,this.length);for(var n=this[t+--e],f=1;e>0&&(f*=256);)n+=this[t+--e]*f;return n},Buffer.prototype.readUInt8=function(t,e){return e||checkOffset(t,1,this.length),this[t]},Buffer.prototype.readUInt16LE=function(t,e){return e||checkOffset(t,2,this.length),this[t]|this[t+1]<<8},Buffer.prototype.readUInt16BE=function(t,e){return e||checkOffset(t,2,this.length),this[t]<<8|this[t+1]},Buffer.prototype.readUInt32LE=function(t,e){return e||checkOffset(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},Buffer.prototype.readUInt32BE=function(t,e){return e||checkOffset(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},Buffer.prototype.readIntLE=function(t,e,r){t=0|t,e=0|e,r||checkOffset(t,e,this.length);for(var n=this[t],f=1,i=0;++i<e&&(f*=256);)n+=this[t+i]*f;return f*=128,n>=f&&(n-=Math.pow(2,8*e)),n},Buffer.prototype.readIntBE=function(t,e,r){t=0|t,e=0|e,r||checkOffset(t,e,this.length);for(var n=e,f=1,i=this[t+--n];n>0&&(f*=256);)i+=this[t+--n]*f;return f*=128,i>=f&&(i-=Math.pow(2,8*e)),i},Buffer.prototype.readInt8=function(t,e){return e||checkOffset(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},Buffer.prototype.readInt16LE=function(t,e){e||checkOffset(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},Buffer.prototype.readInt16BE=function(t,e){e||checkOffset(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},Buffer.prototype.readInt32LE=function(t,e){return e||checkOffset(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},Buffer.prototype.readInt32BE=function(t,e){return e||checkOffset(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},Buffer.prototype.readFloatLE=function(t,e){return e||checkOffset(t,4,this.length),ieee754.read(this,t,!0,23,4)},Buffer.prototype.readFloatBE=function(t,e){return e||checkOffset(t,4,this.length),ieee754.read(this,t,!1,23,4)},Buffer.prototype.readDoubleLE=function(t,e){return e||checkOffset(t,8,this.length),ieee754.read(this,t,!0,52,8)},Buffer.prototype.readDoubleBE=function(t,e){return e||checkOffset(t,8,this.length),ieee754.read(this,t,!1,52,8)},Buffer.prototype.writeUIntLE=function(t,e,r,n){t=+t,e=0|e,r=0|r,n||checkInt(this,t,e,r,Math.pow(2,8*r),0);var f=1,i=0;for(this[e]=255&t;++i<r&&(f*=256);)this[e+i]=t/f&255;return e+r},Buffer.prototype.writeUIntBE=function(t,e,r,n){t=+t,e=0|e,r=0|r,n||checkInt(this,t,e,r,Math.pow(2,8*r),0);var f=r-1,i=1;for(this[e+f]=255&t;--f>=0&&(i*=256);)this[e+f]=t/i&255;return e+r},Buffer.prototype.writeUInt8=function(t,e,r){return t=+t,e=0|e,r||checkInt(this,t,e,1,255,0),Buffer.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},Buffer.prototype.writeUInt16LE=function(t,e,r){return t=+t,e=0|e,r||checkInt(this,t,e,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):objectWriteUInt16(this,t,e,!0),e+2},Buffer.prototype.writeUInt16BE=function(t,e,r){return t=+t,e=0|e,r||checkInt(this,t,e,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):objectWriteUInt16(this,t,e,!1),e+2},Buffer.prototype.writeUInt32LE=function(t,e,r){return t=+t,e=0|e,r||checkInt(this,t,e,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):objectWriteUInt32(this,t,e,!0),e+4},Buffer.prototype.writeUInt32BE=function(t,e,r){return t=+t,e=0|e,r||checkInt(this,t,e,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):objectWriteUInt32(this,t,e,!1),e+4},Buffer.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e=0|e,!n){var f=Math.pow(2,8*r-1);checkInt(this,t,e,r,f-1,-f)}var i=0,o=1,u=0>t?1:0;for(this[e]=255&t;++i<r&&(o*=256);)this[e+i]=(t/o>>0)-u&255;return e+r},Buffer.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e=0|e,!n){var f=Math.pow(2,8*r-1);checkInt(this,t,e,r,f-1,-f)}var i=r-1,o=1,u=0>t?1:0;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=(t/o>>0)-u&255;return e+r},Buffer.prototype.writeInt8=function(t,e,r){return t=+t,e=0|e,r||checkInt(this,t,e,1,127,-128),Buffer.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),0>t&&(t=255+t+1),this[e]=255&t,e+1},Buffer.prototype.writeInt16LE=function(t,e,r){return t=+t,e=0|e,r||checkInt(this,t,e,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):objectWriteUInt16(this,t,e,!0),e+2},Buffer.prototype.writeInt16BE=function(t,e,r){return t=+t,e=0|e,r||checkInt(this,t,e,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):objectWriteUInt16(this,t,e,!1),e+2},Buffer.prototype.writeInt32LE=function(t,e,r){return t=+t,e=0|e,r||checkInt(this,t,e,4,2147483647,-2147483648),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):objectWriteUInt32(this,t,e,!0),e+4},Buffer.prototype.writeInt32BE=function(t,e,r){return t=+t,e=0|e,r||checkInt(this,t,e,4,2147483647,-2147483648),0>t&&(t=4294967295+t+1),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):objectWriteUInt32(this,t,e,!1),e+4},Buffer.prototype.writeFloatLE=function(t,e,r){return writeFloat(this,t,e,!0,r)},Buffer.prototype.writeFloatBE=function(t,e,r){return writeFloat(this,t,e,!1,r)},Buffer.prototype.writeDoubleLE=function(t,e,r){return writeDouble(this,t,e,!0,r)},Buffer.prototype.writeDoubleBE=function(t,e,r){return writeDouble(this,t,e,!1,r)},Buffer.prototype.copy=function(t,e,r,n){if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&r>n&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(0>e)throw new RangeError("targetStart out of bounds");if(0>r||r>=this.length)throw new RangeError("sourceStart out of bounds");if(0>n)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var f,i=n-r;if(this===t&&e>r&&n>e)for(f=i-1;f>=0;f--)t[f+e]=this[f+r];else if(1e3>i||!Buffer.TYPED_ARRAY_SUPPORT)for(f=0;i>f;f++)t[f+e]=this[f+r];else t._set(this.subarray(r,r+i),e);return i},Buffer.prototype.fill=function(t,e,r){if(t||(t=0),e||(e=0),r||(r=this.length),e>r)throw new RangeError("end < start");if(r!==e&&0!==this.length){if(0>e||e>=this.length)throw new RangeError("start out of bounds");if(0>r||r>this.length)throw new RangeError("end out of bounds");var n;if("number"==typeof t)for(n=e;r>n;n++)this[n]=t;else{var f=utf8ToBytes(t.toString()),i=f.length;for(n=e;r>n;n++)this[n]=f[n%i]}return this}},Buffer.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(Buffer.TYPED_ARRAY_SUPPORT)return new Buffer(this).buffer;for(var t=new Uint8Array(this.length),e=0,r=t.length;r>e;e+=1)t[e]=this[e];return t.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var BP=Buffer.prototype;Buffer._augment=function(t){return t.constructor=Buffer,t._isBuffer=!0,t._set=t.set,t.get=BP.get,t.set=BP.set,t.write=BP.write,t.toString=BP.toString,t.toLocaleString=BP.toString,t.toJSON=BP.toJSON,t.equals=BP.equals,t.compare=BP.compare,t.indexOf=BP.indexOf,t.copy=BP.copy,t.slice=BP.slice,t.readUIntLE=BP.readUIntLE,t.readUIntBE=BP.readUIntBE,t.readUInt8=BP.readUInt8,t.readUInt16LE=BP.readUInt16LE,t.readUInt16BE=BP.readUInt16BE,t.readUInt32LE=BP.readUInt32LE,t.readUInt32BE=BP.readUInt32BE,t.readIntLE=BP.readIntLE,t.readIntBE=BP.readIntBE,t.readInt8=BP.readInt8,t.readInt16LE=BP.readInt16LE,t.readInt16BE=BP.readInt16BE,t.readInt32LE=BP.readInt32LE,t.readInt32BE=BP.readInt32BE,t.readFloatLE=BP.readFloatLE,t.readFloatBE=BP.readFloatBE,t.readDoubleLE=BP.readDoubleLE,t.readDoubleBE=BP.readDoubleBE,t.writeUInt8=BP.writeUInt8,t.writeUIntLE=BP.writeUIntLE,t.writeUIntBE=BP.writeUIntBE,t.writeUInt16LE=BP.writeUInt16LE,t.writeUInt16BE=BP.writeUInt16BE,t.writeUInt32LE=BP.writeUInt32LE,t.writeUInt32BE=BP.writeUInt32BE,t.writeIntLE=BP.writeIntLE,t.writeIntBE=BP.writeIntBE,t.writeInt8=BP.writeInt8,t.writeInt16LE=BP.writeInt16LE,t.writeInt16BE=BP.writeInt16BE,t.writeInt32LE=BP.writeInt32LE,t.writeInt32BE=BP.writeInt32BE,t.writeFloatLE=BP.writeFloatLE,t.writeFloatBE=BP.writeFloatBE,t.writeDoubleLE=BP.writeDoubleLE,t.writeDoubleBE=BP.writeDoubleBE,t.fill=BP.fill,t.inspect=BP.inspect,t.toArrayBuffer=BP.toArrayBuffer,t};var INVALID_BASE64_RE=/[^+\/0-9A-Za-z-_]/g;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"base64-js":65,"ieee754":211,"isarray":68}],68:[function(require,module,exports){
var toString={}.toString;module.exports=Array.isArray||function(r){return"[object Array]"==toString.call(r)};

},{}],69:[function(require,module,exports){
function createPickRay(e,r,c,t,u){set(e,c[0],c[1],0),set(r,c[0],c[1],1),unproject(e,e,t,u),unproject(r,r,t,u),sub(r,r,e),normalize(r,r)}var unproject=require("camera-unproject"),set=require("gl-vec3/set"),sub=require("gl-vec3/subtract"),normalize=require("gl-vec3/normalize");module.exports=createPickRay;

},{"camera-unproject":71,"gl-vec3/normalize":194,"gl-vec3/set":197,"gl-vec3/subtract":199}],70:[function(require,module,exports){
function cameraProject(t,m,r,e){var p=r[0],a=r[1],o=r[2],A=r[3],R=NEAR_RANGE,c=FAR_RANGE;set(tmp4,m[0],m[1],m[2],1),transformMat4(tmp4,tmp4,e);var s=tmp4[3];return 0!==s&&(tmp4[0]=tmp4[0]/s,tmp4[1]=tmp4[1]/s,tmp4[2]=tmp4[2]/s),t[0]=p+o/2*tmp4[0]+(0+o/2),t[1]=a+A/2*tmp4[1]+(0+A/2),t[2]=(c-R)/2*tmp4[2]+(c+R)/2,t[3]=0===s?0:1/s,t}var transformMat4=require("gl-vec4/transformMat4"),set=require("gl-vec4/set"),NEAR_RANGE=0,FAR_RANGE=1,tmp4=[0,0,0,0];module.exports=cameraProject;

},{"gl-vec4/set":202,"gl-vec4/transformMat4":203}],71:[function(require,module,exports){
function unproject(r,t,e,o){var n=e[0],u=e[1],a=e[2],c=e[3],p=t[0],f=t[1],i=t[2];return p-=n,f=c-f-1,f-=u,r[0]=2*p/a-1,r[1]=2*f/c-1,r[2]=2*i-1,transform(r,r,o)}var transform=require("./lib/projectMat4");module.exports=unproject;

},{"./lib/projectMat4":72}],72:[function(require,module,exports){
function project(r,e,o){var t=e[0],c=e[1],n=e[2],p=o[0],u=o[1],j=o[2],a=o[3],d=o[4],f=o[5],i=o[6],l=o[7],m=o[8],s=o[9],v=o[10],x=o[11],b=o[12],g=o[13],h=o[14],k=o[15],q=1/(t*a+c*l+n*x+k);return r[0]=(t*p+c*d+n*m+b)*q,r[1]=(t*u+c*f+n*s+g)*q,r[2]=(t*j+c*i+n*v+h)*q,r}module.exports=project;

},{}],73:[function(require,module,exports){
function fit(e,t,i){function r(){var t=r.parent||e.parentNode;if("function"==typeof t)var i=t(scratch)||scratch,a=i[0],n=i[1];else if(t&&t!==document.body)var o=size(t),a=0|o[0],n=0|o[1];else var a=window.innerWidth,n=window.innerHeight;return s?(e.setAttribute("width",a*r.scale+"px"),e.setAttribute("height",n*r.scale+"px")):(e.width=a*r.scale,e.height=n*r.scale),e.style.width=a+"px",e.style.height=n+"px",r}var s="SVG"===e.nodeName.toUpperCase();return e.style.position=e.style.position||"absolute",e.style.top=0,e.style.left=0,r.scale=parseFloat(i||1),r.parent=t,r()}var size=require("element-size");module.exports=fit;var scratch=new Float32Array(2);

},{"element-size":84}],74:[function(require,module,exports){
function clamp(c,e,l){return l>e?e>c?e:c>l?l:c:l>c?l:c>e?e:c}module.exports=clamp;

},{}],75:[function(require,module,exports){
"use strict";function Procedure(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}function compileCwise(r){var e=new Procedure;e.pre=r.pre,e.body=r.body,e.post=r.post;var s=r.args.slice(0);e.argTypes=s;for(var o=0;o<s.length;++o){var a=s[o];if("array"===a||"object"==typeof a&&a.blockIndices){if(e.argTypes[o]="array",e.arrayArgs.push(o),e.arrayBlockIndices.push(a.blockIndices?a.blockIndices:0),e.shimArgs.push("array"+o),o<e.pre.args.length&&e.pre.args[o].count>0)throw new Error("cwise: pre() block may not reference array args");if(o<e.post.args.length&&e.post.args[o].count>0)throw new Error("cwise: post() block may not reference array args")}else if("scalar"===a)e.scalarArgs.push(o),e.shimArgs.push("scalar"+o);else if("index"===a){if(e.indexArgs.push(o),o<e.pre.args.length&&e.pre.args[o].count>0)throw new Error("cwise: pre() block may not reference array index");if(o<e.body.args.length&&e.body.args[o].lvalue)throw new Error("cwise: body() block may not write to array index");if(o<e.post.args.length&&e.post.args[o].count>0)throw new Error("cwise: post() block may not reference array index")}else if("shape"===a){if(e.shapeArgs.push(o),o<e.pre.args.length&&e.pre.args[o].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(o<e.body.args.length&&e.body.args[o].lvalue)throw new Error("cwise: body() block may not write to array shape");if(o<e.post.args.length&&e.post.args[o].lvalue)throw new Error("cwise: post() block may not write to array shape")}else{if("object"!=typeof a||!a.offset)throw new Error("cwise: Unknown argument type "+s[o]);e.argTypes[o]="offset",e.offsetArgs.push({array:a.array,offset:a.offset}),e.offsetArgIndex.push(o)}}if(e.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(e.pre.args.length>s.length)throw new Error("cwise: Too many arguments in pre() block");if(e.body.args.length>s.length)throw new Error("cwise: Too many arguments in body() block");if(e.post.args.length>s.length)throw new Error("cwise: Too many arguments in post() block");return e.debug=!!r.printCode||!!r.debug,e.funcName=r.funcName||"cwise",e.blockSize=r.blockSize||64,createThunk(e)}var createThunk=require("./lib/thunk.js");module.exports=compileCwise;

},{"./lib/thunk.js":77}],76:[function(require,module,exports){
"use strict";function innerFill(r,n,e){var s,a,o=r.length,i=n.arrayArgs.length,t=n.indexArgs.length>0,p=[],h=[],u=0,c=0;for(s=0;o>s;++s)h.push(["i",s,"=0"].join(""));for(a=0;i>a;++a)for(s=0;o>s;++s)c=u,u=r[s],0===s?h.push(["d",a,"s",s,"=t",a,"p",u].join("")):h.push(["d",a,"s",s,"=(t",a,"p",u,"-s",c,"*t",a,"p",c,")"].join(""));for(p.push("var "+h.join(",")),s=o-1;s>=0;--s)u=r[s],p.push(["for(i",s,"=0;i",s,"<s",u,";++i",s,"){"].join(""));for(p.push(e),s=0;o>s;++s){for(c=u,u=r[s],a=0;i>a;++a)p.push(["p",a,"+=d",a,"s",s].join(""));t&&(s>0&&p.push(["index[",c,"]-=s",c].join("")),p.push(["++index[",u,"]"].join(""))),p.push("}")}return p.join("\n")}function outerFill(r,n,e,s){for(var a=n.length,o=e.arrayArgs.length,i=e.blockSize,t=e.indexArgs.length>0,p=[],h=0;o>h;++h)p.push(["var offset",h,"=p",h].join(""));for(var h=r;a>h;++h)p.push(["for(var j"+h+"=SS[",n[h],"]|0;j",h,">0;){"].join("")),p.push(["if(j",h,"<",i,"){"].join("")),p.push(["s",n[h],"=j",h].join("")),p.push(["j",h,"=0"].join("")),p.push(["}else{s",n[h],"=",i].join("")),p.push(["j",h,"-=",i,"}"].join("")),t&&p.push(["index[",n[h],"]=j",h].join(""));for(var h=0;o>h;++h){for(var u=["offset"+h],c=r;a>c;++c)u.push(["j",c,"*t",h,"p",n[c]].join(""));p.push(["p",h,"=(",u.join("+"),")"].join(""))}p.push(innerFill(n,e,s));for(var h=r;a>h;++h)p.push("}");return p.join("\n")}function countMatches(r){for(var n=0,e=r[0].length;e>n;){for(var s=1;s<r.length;++s)if(r[s][n]!==r[0][n])return n;++n}return n}function processBlock(r,n,e){for(var s=r.body,a=[],o=[],i=0;i<r.args.length;++i){var t=r.args[i];if(!(t.count<=0)){var p=new RegExp(t.name,"g"),h="",u=n.arrayArgs.indexOf(i);switch(n.argTypes[i]){case"offset":var c=n.offsetArgIndex.indexOf(i),l=n.offsetArgs[c];u=l.array,h="+q"+c;case"array":h="p"+u+h;var f="l"+i,g="a"+u;if(0===n.arrayBlockIndices[u])1===t.count?"generic"===e[u]?t.lvalue?(a.push(["var ",f,"=",g,".get(",h,")"].join("")),s=s.replace(p,f),o.push([g,".set(",h,",",f,")"].join(""))):s=s.replace(p,[g,".get(",h,")"].join("")):s=s.replace(p,[g,"[",h,"]"].join("")):"generic"===e[u]?(a.push(["var ",f,"=",g,".get(",h,")"].join("")),s=s.replace(p,f),t.lvalue&&o.push([g,".set(",h,",",f,")"].join(""))):(a.push(["var ",f,"=",g,"[",h,"]"].join("")),s=s.replace(p,f),t.lvalue&&o.push([g,"[",h,"]=",f].join("")));else{for(var j=[t.name],v=[h],y=0;y<Math.abs(n.arrayBlockIndices[u]);y++)j.push("\\s*\\[([^\\]]+)\\]"),v.push("$"+(y+1)+"*t"+u+"b"+y);if(p=new RegExp(j.join(""),"g"),h=v.join("+"),"generic"===e[u])throw new Error("cwise: Generic arrays not supported in combination with blocks!");s=s.replace(p,[g,"[",h,"]"].join(""))}break;case"scalar":s=s.replace(p,"Y"+n.scalarArgs.indexOf(i));break;case"index":s=s.replace(p,"index");break;case"shape":s=s.replace(p,"shape")}}}return[a.join("\n"),s,o.join("\n")].join("\n").trim()}function typeSummary(r){for(var n=new Array(r.length),e=!0,s=0;s<r.length;++s){var a=r[s],o=a.match(/\d+/);o=o?o[0]:"",0===a.charAt(0)?n[s]="u"+a.charAt(1)+o:n[s]=a.charAt(0)+o,s>0&&(e=e&&n[s]===n[s-1])}return e?n[0]:n.join("")}function generateCWiseOp(r,n){for(var e=n[1].length-Math.abs(r.arrayBlockIndices[0])|0,s=new Array(r.arrayArgs.length),a=new Array(r.arrayArgs.length),o=0;o<r.arrayArgs.length;++o)a[o]=n[2*o],s[o]=n[2*o+1];for(var i=[],t=[],p=[],h=[],u=[],o=0;o<r.arrayArgs.length;++o){r.arrayBlockIndices[o]<0?(p.push(0),h.push(e),i.push(e),t.push(e+r.arrayBlockIndices[o])):(p.push(r.arrayBlockIndices[o]),h.push(r.arrayBlockIndices[o]+e),i.push(0),t.push(r.arrayBlockIndices[o]));for(var c=[],l=0;l<s[o].length;l++)p[o]<=s[o][l]&&s[o][l]<h[o]&&c.push(s[o][l]-p[o]);u.push(c)}for(var f=["SS"],g=["'use strict'"],j=[],l=0;e>l;++l)j.push(["s",l,"=SS[",l,"]"].join(""));for(var o=0;o<r.arrayArgs.length;++o){f.push("a"+o),f.push("t"+o),f.push("p"+o);for(var l=0;e>l;++l)j.push(["t",o,"p",l,"=t",o,"[",p[o]+l,"]"].join(""));for(var l=0;l<Math.abs(r.arrayBlockIndices[o]);++l)j.push(["t",o,"b",l,"=t",o,"[",i[o]+l,"]"].join(""))}for(var o=0;o<r.scalarArgs.length;++o)f.push("Y"+o);if(r.shapeArgs.length>0&&j.push("shape=SS.slice(0)"),r.indexArgs.length>0){for(var v=new Array(e),o=0;e>o;++o)v[o]="0";j.push(["index=[",v.join(","),"]"].join(""))}for(var o=0;o<r.offsetArgs.length;++o){for(var y=r.offsetArgs[o],d=[],l=0;l<y.offset.length;++l)0!==y.offset[l]&&(1===y.offset[l]?d.push(["t",y.array,"p",l].join("")):d.push([y.offset[l],"*t",y.array,"p",l].join("")));0===d.length?j.push("q"+o+"=0"):j.push(["q",o,"=",d.join("+")].join(""))}var A=uniq([].concat(r.pre.thisVars).concat(r.body.thisVars).concat(r.post.thisVars));j=j.concat(A),g.push("var "+j.join(","));for(var o=0;o<r.arrayArgs.length;++o)g.push("p"+o+"|=0");r.pre.body.length>3&&g.push(processBlock(r.pre,r,a));var k=processBlock(r.body,r,a),b=countMatches(u);e>b?g.push(outerFill(b,u[0],r,k)):g.push(innerFill(u[0],r,k)),r.post.body.length>3&&g.push(processBlock(r.post,r,a)),r.debug&&console.log("-----Generated cwise routine for ",n,":\n"+g.join("\n")+"\n----------");var x=[r.funcName||"unnamed","_cwise_loop_",s[0].join("s"),"m",b,typeSummary(a)].join(""),w=new Function(["function ",x,"(",f.join(","),"){",g.join("\n"),"} return ",x].join(""));return w()}var uniq=require("uniq");module.exports=generateCWiseOp;

},{"uniq":244}],77:[function(require,module,exports){
"use strict";function createThunk(r){var a=["'use strict'","var CACHED={}"],e=[],s=r.funcName+"_cwise_thunk";a.push(["return function ",s,"(",r.shimArgs.join(","),"){"].join(""));for(var n=[],o=[],h=[["array",r.arrayArgs[0],".shape.slice(",Math.max(0,r.arrayBlockIndices[0]),r.arrayBlockIndices[0]<0?","+r.arrayBlockIndices[0]+")":")"].join("")],i=[],p=[],t=0;t<r.arrayArgs.length;++t){var c=r.arrayArgs[t];e.push(["t",c,"=array",c,".dtype,","r",c,"=array",c,".order"].join("")),n.push("t"+c),n.push("r"+c),o.push("t"+c),o.push("r"+c+".join()"),h.push("array"+c+".data"),h.push("array"+c+".stride"),h.push("array"+c+".offset|0"),t>0&&(i.push("array"+r.arrayArgs[0]+".shape.length===array"+c+".shape.length+"+(Math.abs(r.arrayBlockIndices[0])-Math.abs(r.arrayBlockIndices[t]))),p.push("array"+r.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,r.arrayBlockIndices[0])+"]===array"+c+".shape[shapeIndex+"+Math.max(0,r.arrayBlockIndices[t])+"]"))}r.arrayArgs.length>1&&(a.push("if (!("+i.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),a.push("for(var shapeIndex=array"+r.arrayArgs[0]+".shape.length-"+Math.abs(r.arrayBlockIndices[0])+"; shapeIndex-->0;) {"),a.push("if (!("+p.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),a.push("}"));for(var t=0;t<r.scalarArgs.length;++t)h.push("scalar"+r.scalarArgs[t]);e.push(["type=[",o.join(","),"].join()"].join("")),e.push("proc=CACHED[type]"),a.push("var "+e.join(",")),a.push(["if(!proc){","CACHED[type]=proc=compile([",n.join(","),"])}","return proc(",h.join(","),")}"].join("")),r.debug&&console.log("-----Generated thunk:\n"+a.join("\n")+"\n----------");var u=new Function("compile",a.join("\n"));return u(compile.bind(void 0,r))}var compile=require("./compile.js");module.exports=createThunk;

},{"./compile.js":76}],78:[function(require,module,exports){
"use strict";var copy=require("es5-ext/object/copy"),map=require("es5-ext/object/map"),callable=require("es5-ext/object/valid-callable"),validValue=require("es5-ext/object/valid-value"),bind=Function.prototype.bind,defineProperty=Object.defineProperty,hasOwnProperty=Object.prototype.hasOwnProperty,define;define=function(e,t,r){var a,i=validValue(t)&&callable(t.value);return a=copy(t),delete a.writable,delete a.value,a.get=function(){return hasOwnProperty.call(this,e)?i:(t.value=bind.call(i,null==r?this:this[r]),defineProperty(this,e,t),this[e])},a},module.exports=function(e){var t=arguments[1];return map(e,function(e,r){return define(r,e,t)})};

},{"es5-ext/object/copy":97,"es5-ext/object/map":105,"es5-ext/object/valid-callable":111,"es5-ext/object/valid-value":112}],79:[function(require,module,exports){
"use strict";var assign=require("es5-ext/object/assign"),normalizeOpts=require("es5-ext/object/normalize-options"),isCallable=require("es5-ext/object/is-callable"),contains=require("es5-ext/string/#/contains"),d;d=module.exports=function(e,l){var n,a,s,i,t;return arguments.length<2||"string"!=typeof e?(i=l,l=e,e=null):i=arguments[2],null==e?(n=s=!0,a=!1):(n=contains.call(e,"c"),a=contains.call(e,"e"),s=contains.call(e,"w")),t={value:l,configurable:n,enumerable:a,writable:s},i?assign(normalizeOpts(i),t):t},d.gs=function(e,l,n){var a,s,i,t;return"string"!=typeof e?(i=n,n=l,l=e,e=null):i=arguments[3],null==l?l=void 0:isCallable(l)?null==n?n=void 0:isCallable(n)||(i=n,n=void 0):(i=l,l=n=void 0),null==e?(a=!0,s=!1):(a=contains.call(e,"c"),s=contains.call(e,"e")),t={get:l,set:n,configurable:a,enumerable:s},i?assign(normalizeOpts(i),t):t};

},{"es5-ext/object/assign":94,"es5-ext/object/is-callable":100,"es5-ext/object/normalize-options":106,"es5-ext/string/#/contains":113}],80:[function(require,module,exports){
module.exports=function(){for(var r=0;r<arguments.length;r++)if(void 0!==arguments[r])return arguments[r]};

},{}],81:[function(require,module,exports){
function defaultProperty(e,r){return{configurable:!0,enumerable:!0,get:e,set:r}}module.exports=defaultProperty;

},{}],82:[function(require,module,exports){
module.exports=function(r){switch(r){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array}};

},{}],83:[function(require,module,exports){
"use strict";function dupe_array(e,r,u){var n=0|e[u];if(0>=n)return[];var t,a=new Array(n);if(u===e.length-1)for(t=0;n>t;++t)a[t]=r;else for(t=0;n>t;++t)a[t]=dupe_array(e,r,u+1);return a}function dupe_number(e,r){var u,n;for(u=new Array(e),n=0;e>n;++n)u[n]=r;return u}function dupe(e,r){switch("undefined"==typeof r&&(r=0),typeof e){case"number":if(e>0)return dupe_number(0|e,r);break;case"object":if("number"==typeof e.length)return dupe_array(e,r,0)}return[]}module.exports=dupe;

},{}],84:[function(require,module,exports){
function getSize(e){if(e===window||e===document.body)return[window.innerWidth,window.innerHeight];if(!e.parentNode){var t=!0;document.body.appendChild(e)}var r=e.getBoundingClientRect(),n=getComputedStyle(e),o=(0|r.height)+parse(n.getPropertyValue("margin-top"))+parse(n.getPropertyValue("margin-bottom")),i=(0|r.width)+parse(n.getPropertyValue("margin-left"))+parse(n.getPropertyValue("margin-right"));return t&&document.body.removeChild(e),[i,o]}function parse(e){return parseFloat(e)||0}module.exports=getSize;

},{}],85:[function(require,module,exports){
"use strict";var value=require("../../object/valid-value");module.exports=function(){return value(this).length=0,this};

},{"../../object/valid-value":112}],86:[function(require,module,exports){
"use strict";var toPosInt=require("../../number/to-pos-integer"),value=require("../../object/valid-value"),indexOf=Array.prototype.indexOf,hasOwnProperty=Object.prototype.hasOwnProperty,abs=Math.abs,floor=Math.floor;module.exports=function(t){var r,e,o,s;if(t===t)return indexOf.apply(this,arguments);for(e=toPosInt(value(this).length),o=arguments[1],o=isNaN(o)?0:o>=0?floor(o):toPosInt(this.length)-floor(abs(o)),r=o;e>r;++r)if(hasOwnProperty.call(this,r)&&(s=this[r],s!==s))return r;return-1};

},{"../../number/to-pos-integer":92,"../../object/valid-value":112}],87:[function(require,module,exports){
"use strict";var toString=Object.prototype.toString,id=toString.call(function(){return arguments}());module.exports=function(t){return toString.call(t)===id};

},{}],88:[function(require,module,exports){
"use strict";module.exports=require("./is-implemented")()?Math.sign:require("./shim");

},{"./is-implemented":89,"./shim":90}],89:[function(require,module,exports){
"use strict";module.exports=function(){var t=Math.sign;return"function"!=typeof t?!1:1===t(10)&&-1===t(-20)};

},{}],90:[function(require,module,exports){
"use strict";module.exports=function(e){return e=Number(e),isNaN(e)||0===e?e:e>0?1:-1};

},{}],91:[function(require,module,exports){
"use strict";var sign=require("../math/sign"),abs=Math.abs,floor=Math.floor;module.exports=function(r){return isNaN(r)?0:(r=Number(r),0!==r&&isFinite(r)?sign(r)*floor(abs(r)):r)};

},{"../math/sign":88}],92:[function(require,module,exports){
"use strict";var toInteger=require("./to-integer"),max=Math.max;module.exports=function(e){return max(0,toInteger(e))};

},{"./to-integer":91}],93:[function(require,module,exports){
"use strict";var callable=require("./valid-callable"),value=require("./valid-value"),bind=Function.prototype.bind,call=Function.prototype.call,keys=Object.keys,propertyIsEnumerable=Object.prototype.propertyIsEnumerable;module.exports=function(e,l){return function(t,r){var a,n=arguments[2],c=arguments[3];return t=Object(value(t)),callable(r),a=keys(t),c&&a.sort("function"==typeof c?bind.call(c,t):void 0),"function"!=typeof e&&(e=a[e]),call.call(e,a,function(e,a){return propertyIsEnumerable.call(t,e)?call.call(r,n,t[e],e,t,a):l})}};

},{"./valid-callable":111,"./valid-value":112}],94:[function(require,module,exports){
"use strict";module.exports=require("./is-implemented")()?Object.assign:require("./shim");

},{"./is-implemented":95,"./shim":96}],95:[function(require,module,exports){
"use strict";module.exports=function(){var r,t=Object.assign;return"function"!=typeof t?!1:(r={foo:"raz"},t(r,{bar:"dwa"},{trzy:"trzy"}),r.foo+r.bar+r.trzy==="razdwatrzy")};

},{}],96:[function(require,module,exports){
"use strict";var keys=require("../keys"),value=require("../valid-value"),max=Math.max;module.exports=function(e,r){var a,t,u,i=max(arguments.length,2);for(e=Object(value(e)),u=function(t){try{e[t]=r[t]}catch(u){a||(a=u)}},t=1;i>t;++t)r=arguments[t],keys(r).forEach(u);if(void 0!==a)throw a;return e};

},{"../keys":102,"../valid-value":112}],97:[function(require,module,exports){
"use strict";var assign=require("./assign"),value=require("./valid-value");module.exports=function(e){var r=Object(value(e));return r!==e?r:assign({},e)};

},{"./assign":94,"./valid-value":112}],98:[function(require,module,exports){
"use strict";var create=Object.create,shim;require("./set-prototype-of/is-implemented")()||(shim=require("./set-prototype-of/shim")),module.exports=function(){var e,r,t;return shim?1!==shim.level?create:(e={},r={},t={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(e){return"__proto__"===e?void(r[e]={configurable:!0,enumerable:!1,writable:!0,value:void 0}):void(r[e]=t)}),Object.defineProperties(e,r),Object.defineProperty(shim,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:e}),function(r,t){return create(null===r?e:r,t)}):create}();

},{"./set-prototype-of/is-implemented":109,"./set-prototype-of/shim":110}],99:[function(require,module,exports){
"use strict";module.exports=require("./_iterate")("forEach");

},{"./_iterate":93}],100:[function(require,module,exports){
"use strict";module.exports=function(t){return"function"==typeof t};

},{}],101:[function(require,module,exports){
"use strict";var map={"function":!0,object:!0};module.exports=function(t){return null!=t&&map[typeof t]||!1};

},{}],102:[function(require,module,exports){
"use strict";module.exports=require("./is-implemented")()?Object.keys:require("./shim");

},{"./is-implemented":103,"./shim":104}],103:[function(require,module,exports){
"use strict";module.exports=function(){try{return Object.keys("primitive"),!0}catch(t){return!1}};

},{}],104:[function(require,module,exports){
"use strict";var keys=Object.keys;module.exports=function(e){return keys(null==e?e:Object(e))};

},{}],105:[function(require,module,exports){
"use strict";var callable=require("./valid-callable"),forEach=require("./for-each"),call=Function.prototype.call;module.exports=function(l,a){var r={},c=arguments[2];return callable(a),forEach(l,function(l,e,o,t){r[e]=call.call(a,c,l,e,o,t)}),r};

},{"./for-each":99,"./valid-callable":111}],106:[function(require,module,exports){
"use strict";var forEach=Array.prototype.forEach,create=Object.create,process=function(r,e){var c;for(c in r)e[c]=r[c]};module.exports=function(r){var e=create(null);return forEach.call(arguments,function(r){null!=r&&process(Object(r),e)}),e};

},{}],107:[function(require,module,exports){
"use strict";var forEach=Array.prototype.forEach,create=Object.create;module.exports=function(r){var e=create(null);return forEach.call(arguments,function(r){e[r]=!0}),e};

},{}],108:[function(require,module,exports){
"use strict";module.exports=require("./is-implemented")()?Object.setPrototypeOf:require("./shim");

},{"./is-implemented":109,"./shim":110}],109:[function(require,module,exports){
"use strict";var create=Object.create,getPrototypeOf=Object.getPrototypeOf,x={};module.exports=function(){var t=Object.setPrototypeOf,e=arguments[0]||create;return"function"!=typeof t?!1:getPrototypeOf(t(e(null),x))===x};

},{}],110:[function(require,module,exports){
"use strict";var isObject=require("../is-object"),value=require("../valid-value"),isPrototypeOf=Object.prototype.isPrototypeOf,defineProperty=Object.defineProperty,nullDesc={configurable:!0,enumerable:!1,writable:!0,value:void 0},validate;validate=function(e,t){if(value(e),null===t||isObject(t))return e;throw new TypeError("Prototype must be null or an object")},module.exports=function(e){var t,l;return e?(2===e.level?e.set?(l=e.set,t=function(e,t){return l.call(validate(e,t),t),e}):t=function(e,t){return validate(e,t).__proto__=t,e}:t=function r(e,t){var l;return validate(e,t),l=isPrototypeOf.call(r.nullPolyfill,e),l&&delete r.nullPolyfill.__proto__,null===t&&(t=r.nullPolyfill),e.__proto__=t,l&&defineProperty(r.nullPolyfill,"__proto__",nullDesc),e},Object.defineProperty(t,"level",{configurable:!1,enumerable:!1,writable:!1,value:e.level})):null}(function(){var e,t=Object.create(null),l={},r=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(r){try{e=r.set,e.call(t,l)}catch(o){}if(Object.getPrototypeOf(t)===l)return{set:e,level:2}}return t.__proto__=l,Object.getPrototypeOf(t)===l?{level:2}:(t={},t.__proto__=l,Object.getPrototypeOf(t)===l?{level:1}:!1)}()),require("../create");

},{"../create":98,"../is-object":101,"../valid-value":112}],111:[function(require,module,exports){
"use strict";module.exports=function(t){if("function"!=typeof t)throw new TypeError(t+" is not a function");return t};

},{}],112:[function(require,module,exports){
"use strict";module.exports=function(n){if(null==n)throw new TypeError("Cannot use null or undefined");return n};

},{}],113:[function(require,module,exports){
"use strict";module.exports=require("./is-implemented")()?String.prototype.contains:require("./shim");

},{"./is-implemented":114,"./shim":115}],114:[function(require,module,exports){
"use strict";var str="razdwatrzy";module.exports=function(){return"function"!=typeof str.contains?!1:str.contains("dwa")===!0&&str.contains("foo")===!1};

},{}],115:[function(require,module,exports){
"use strict";var indexOf=String.prototype.indexOf;module.exports=function(t){return indexOf.call(this,t,arguments[1])>-1};

},{}],116:[function(require,module,exports){
"use strict";var toString=Object.prototype.toString,id=toString.call("");module.exports=function(t){return"string"==typeof t||t&&"object"==typeof t&&(t instanceof String||toString.call(t)===id)||!1};

},{}],117:[function(require,module,exports){
"use strict";var setPrototypeOf=require("es5-ext/object/set-prototype-of"),contains=require("es5-ext/string/#/contains"),d=require("d"),Iterator=require("./"),defineProperty=Object.defineProperty,ArrayIterator;ArrayIterator=module.exports=function(t,r){return this instanceof ArrayIterator?(Iterator.call(this,t),r=r?contains.call(r,"key+value")?"key+value":contains.call(r,"key")?"key":"value":"value",void defineProperty(this,"__kind__",d("",r))):new ArrayIterator(t,r)},setPrototypeOf&&setPrototypeOf(ArrayIterator,Iterator),ArrayIterator.prototype=Object.create(Iterator.prototype,{constructor:d(ArrayIterator),_resolve:d(function(t){return"value"===this.__kind__?this.__list__[t]:"key+value"===this.__kind__?[t,this.__list__[t]]:t}),toString:d(function(){return"[object Array Iterator]"})});

},{"./":120,"d":79,"es5-ext/object/set-prototype-of":108,"es5-ext/string/#/contains":113}],118:[function(require,module,exports){
"use strict";var isArguments=require("es5-ext/function/is-arguments"),callable=require("es5-ext/object/valid-callable"),isString=require("es5-ext/string/is-string"),get=require("./get"),isArray=Array.isArray,call=Function.prototype.call,some=Array.prototype.some;module.exports=function(r,e){var t,l,a,i,n,s,o,c,u=arguments[2];if(isArray(r)||isArguments(r)?t="array":isString(r)?t="string":r=get(r),callable(e),a=function(){i=!0},"array"===t)return void some.call(r,function(r){return call.call(e,u,r,a),i?!0:void 0});if("string"!==t)for(l=r.next();!l.done;){if(call.call(e,u,l.value,a),i)return;l=r.next()}else for(s=r.length,n=0;s>n&&(o=r[n],s>n+1&&(c=o.charCodeAt(0),c>=55296&&56319>=c&&(o+=r[++n])),call.call(e,u,o,a),!i);++n);};

},{"./get":119,"es5-ext/function/is-arguments":87,"es5-ext/object/valid-callable":111,"es5-ext/string/is-string":116}],119:[function(require,module,exports){
"use strict";var isArguments=require("es5-ext/function/is-arguments"),isString=require("es5-ext/string/is-string"),ArrayIterator=require("./array"),StringIterator=require("./string"),iterable=require("./valid-iterable"),iteratorSymbol=require("es6-symbol").iterator;module.exports=function(r){return"function"==typeof iterable(r)[iteratorSymbol]?r[iteratorSymbol]():isArguments(r)?new ArrayIterator(r):isString(r)?new StringIterator(r):new ArrayIterator(r)};

},{"./array":117,"./string":122,"./valid-iterable":123,"es5-ext/function/is-arguments":87,"es5-ext/string/is-string":116,"es6-symbol":130}],120:[function(require,module,exports){
"use strict";var clear=require("es5-ext/array/#/clear"),assign=require("es5-ext/object/assign"),callable=require("es5-ext/object/valid-callable"),value=require("es5-ext/object/valid-value"),d=require("d"),autoBind=require("d/auto-bind"),Symbol=require("es6-symbol"),defineProperty=Object.defineProperty,defineProperties=Object.defineProperties,Iterator;module.exports=Iterator=function(e,t){return this instanceof Iterator?(defineProperties(this,{__list__:d("w",value(e)),__context__:d("w",t),__nextIndex__:d("w",0)}),void(t&&(callable(t.on),t.on("_add",this._onAdd),t.on("_delete",this._onDelete),t.on("_clear",this._onClear)))):new Iterator(e,t)},defineProperties(Iterator.prototype,assign({constructor:d(Iterator),_next:d(function(){var e;if(this.__list__)return this.__redo__&&(e=this.__redo__.shift(),void 0!==e)?e:this.__nextIndex__<this.__list__.length?this.__nextIndex__++:void this._unBind()}),next:d(function(){return this._createResult(this._next())}),_createResult:d(function(e){return void 0===e?{done:!0,value:void 0}:{done:!1,value:this._resolve(e)}}),_resolve:d(function(e){return this.__list__[e]}),_unBind:d(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:d(function(){return"[object Iterator]"})},autoBind({_onAdd:d(function(e){if(!(e>=this.__nextIndex__)){if(++this.__nextIndex__,!this.__redo__)return void defineProperty(this,"__redo__",d("c",[e]));this.__redo__.forEach(function(t,_){t>=e&&(this.__redo__[_]=++t)},this),this.__redo__.push(e)}}),_onDelete:d(function(e){var t;e>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(t=this.__redo__.indexOf(e),-1!==t&&this.__redo__.splice(t,1),this.__redo__.forEach(function(t,_){t>e&&(this.__redo__[_]=--t)},this)))}),_onClear:d(function(){this.__redo__&&clear.call(this.__redo__),this.__nextIndex__=0})}))),defineProperty(Iterator.prototype,Symbol.iterator,d(function(){return this})),defineProperty(Iterator.prototype,Symbol.toStringTag,d("","Iterator"));

},{"d":79,"d/auto-bind":78,"es5-ext/array/#/clear":85,"es5-ext/object/assign":94,"es5-ext/object/valid-callable":111,"es5-ext/object/valid-value":112,"es6-symbol":130}],121:[function(require,module,exports){
"use strict";var isArguments=require("es5-ext/function/is-arguments"),isString=require("es5-ext/string/is-string"),iteratorSymbol=require("es6-symbol").iterator,isArray=Array.isArray;module.exports=function(r){return null==r?!1:isArray(r)?!0:isString(r)?!0:isArguments(r)?!0:"function"==typeof r[iteratorSymbol]};

},{"es5-ext/function/is-arguments":87,"es5-ext/string/is-string":116,"es6-symbol":130}],122:[function(require,module,exports){
"use strict";var setPrototypeOf=require("es5-ext/object/set-prototype-of"),d=require("d"),Iterator=require("./"),defineProperty=Object.defineProperty,StringIterator;StringIterator=module.exports=function(t){return this instanceof StringIterator?(t=String(t),Iterator.call(this,t),void defineProperty(this,"__length__",d("",t.length))):new StringIterator(t)},setPrototypeOf&&setPrototypeOf(StringIterator,Iterator),StringIterator.prototype=Object.create(Iterator.prototype,{constructor:d(StringIterator),_next:d(function(){return this.__list__?this.__nextIndex__<this.__length__?this.__nextIndex__++:void this._unBind():void 0}),_resolve:d(function(t){var e,r=this.__list__[t];return this.__nextIndex__===this.__length__?r:(e=r.charCodeAt(0),e>=55296&&56319>=e?r+this.__list__[this.__nextIndex__++]:r)}),toString:d(function(){return"[object String Iterator]"})});

},{"./":120,"d":79,"es5-ext/object/set-prototype-of":108}],123:[function(require,module,exports){
"use strict";var isIterable=require("./is-iterable");module.exports=function(e){if(!isIterable(e))throw new TypeError(e+" is not iterable");return e};

},{"./is-iterable":121}],124:[function(require,module,exports){
"use strict";module.exports=require("./is-implemented")()?Map:require("./polyfill");

},{"./is-implemented":125,"./polyfill":129}],125:[function(require,module,exports){
"use strict";module.exports=function(){var e,t,n;if("function"!=typeof Map)return!1;try{e=new Map([["raz","one"],["dwa","two"],["trzy","three"]])}catch(o){return!1}return"[object Map]"!==String(e)?!1:3!==e.size?!1:"function"!=typeof e.clear?!1:"function"!=typeof e["delete"]?!1:"function"!=typeof e.entries?!1:"function"!=typeof e.forEach?!1:"function"!=typeof e.get?!1:"function"!=typeof e.has?!1:"function"!=typeof e.keys?!1:"function"!=typeof e.set?!1:"function"!=typeof e.values?!1:(t=e.entries(),n=t.next(),n.done!==!1?!1:n.value?"raz"!==n.value[0]?!1:"one"!==n.value[1]?!1:!0:!1)};

},{}],126:[function(require,module,exports){
"use strict";module.exports=function(){return"undefined"==typeof Map?!1:"[object Map]"===Object.prototype.toString.call(new Map)}();

},{}],127:[function(require,module,exports){
"use strict";module.exports=require("es5-ext/object/primitive-set")("key","value","key+value");

},{"es5-ext/object/primitive-set":107}],128:[function(require,module,exports){
"use strict";var setPrototypeOf=require("es5-ext/object/set-prototype-of"),d=require("d"),Iterator=require("es6-iterator"),toStringTagSymbol=require("es6-symbol").toStringTag,kinds=require("./iterator-kinds"),defineProperties=Object.defineProperties,unBind=Iterator.prototype._unBind,MapIterator;MapIterator=module.exports=function(t,e){return this instanceof MapIterator?(Iterator.call(this,t.__mapKeysData__,t),e&&kinds[e]||(e="key+value"),void defineProperties(this,{__kind__:d("",e),__values__:d("w",t.__mapValuesData__)})):new MapIterator(t,e)},setPrototypeOf&&setPrototypeOf(MapIterator,Iterator),MapIterator.prototype=Object.create(Iterator.prototype,{constructor:d(MapIterator),_resolve:d(function(t){return"value"===this.__kind__?this.__values__[t]:"key"===this.__kind__?this.__list__[t]:[this.__list__[t],this.__values__[t]]}),_unBind:d(function(){this.__values__=null,unBind.call(this)}),toString:d(function(){return"[object Map Iterator]"})}),Object.defineProperty(MapIterator.prototype,toStringTagSymbol,d("c","Map Iterator"));

},{"./iterator-kinds":127,"d":79,"es5-ext/object/set-prototype-of":108,"es6-iterator":120,"es6-symbol":130}],129:[function(require,module,exports){
"use strict";var clear=require("es5-ext/array/#/clear"),eIndexOf=require("es5-ext/array/#/e-index-of"),setPrototypeOf=require("es5-ext/object/set-prototype-of"),callable=require("es5-ext/object/valid-callable"),validValue=require("es5-ext/object/valid-value"),d=require("d"),ee=require("event-emitter"),Symbol=require("es6-symbol"),iterator=require("es6-iterator/valid-iterable"),forOf=require("es6-iterator/for-of"),Iterator=require("./lib/iterator"),isNative=require("./is-native-implemented"),call=Function.prototype.call,defineProperties=Object.defineProperties,getPrototypeOf=Object.getPrototypeOf,MapPoly;module.exports=MapPoly=function(){var e,t,a,r=arguments[0];if(!(this instanceof MapPoly))throw new TypeError("Constructor requires 'new'");return a=isNative&&setPrototypeOf&&Map!==MapPoly?setPrototypeOf(new Map,getPrototypeOf(this)):this,null!=r&&iterator(r),defineProperties(a,{__mapKeysData__:d("c",e=[]),__mapValuesData__:d("c",t=[])}),r?(forOf(r,function(a){var r=validValue(a)[0];a=a[1],-1===eIndexOf.call(e,r)&&(e.push(r),t.push(a))},a),a):a},isNative&&(setPrototypeOf&&setPrototypeOf(MapPoly,Map),MapPoly.prototype=Object.create(Map.prototype,{constructor:d(MapPoly)})),ee(defineProperties(MapPoly.prototype,{clear:d(function(){this.__mapKeysData__.length&&(clear.call(this.__mapKeysData__),clear.call(this.__mapValuesData__),this.emit("_clear"))}),"delete":d(function(e){var t=eIndexOf.call(this.__mapKeysData__,e);return-1===t?!1:(this.__mapKeysData__.splice(t,1),this.__mapValuesData__.splice(t,1),this.emit("_delete",t,e),!0)}),entries:d(function(){return new Iterator(this,"key+value")}),forEach:d(function(e){var t,a,r=arguments[1];for(callable(e),t=this.entries(),a=t._next();void 0!==a;)call.call(e,r,this.__mapValuesData__[a],this.__mapKeysData__[a],this),a=t._next()}),get:d(function(e){var t=eIndexOf.call(this.__mapKeysData__,e);if(-1!==t)return this.__mapValuesData__[t]}),has:d(function(e){return-1!==eIndexOf.call(this.__mapKeysData__,e)}),keys:d(function(){return new Iterator(this,"key")}),set:d(function(e,t){var a,r=eIndexOf.call(this.__mapKeysData__,e);return-1===r&&(r=this.__mapKeysData__.push(e)-1,a=!0),this.__mapValuesData__[r]=t,a&&this.emit("_add",r,e),this}),size:d.gs(function(){return this.__mapKeysData__.length}),values:d(function(){return new Iterator(this,"value")}),toString:d(function(){return"[object Map]"})})),Object.defineProperty(MapPoly.prototype,Symbol.iterator,d(function(){return this.entries()})),Object.defineProperty(MapPoly.prototype,Symbol.toStringTag,d("c","Map"));

},{"./is-native-implemented":126,"./lib/iterator":128,"d":79,"es5-ext/array/#/clear":85,"es5-ext/array/#/e-index-of":86,"es5-ext/object/set-prototype-of":108,"es5-ext/object/valid-callable":111,"es5-ext/object/valid-value":112,"es6-iterator/for-of":118,"es6-iterator/valid-iterable":123,"es6-symbol":130,"event-emitter":135}],130:[function(require,module,exports){
"use strict";module.exports=require("./is-implemented")()?Symbol:require("./polyfill");

},{"./is-implemented":131,"./polyfill":133}],131:[function(require,module,exports){
"use strict";module.exports=function(){var t;if("function"!=typeof Symbol)return!1;t=Symbol("test symbol");try{String(t)}catch(o){return!1}return"symbol"==typeof Symbol.iterator?!0:"object"!=typeof Symbol.isConcatSpreadable?!1:"object"!=typeof Symbol.iterator?!1:"object"!=typeof Symbol.toPrimitive?!1:"object"!=typeof Symbol.toStringTag?!1:"object"!=typeof Symbol.unscopables?!1:!0};

},{}],132:[function(require,module,exports){
"use strict";module.exports=function(t){return t&&("symbol"==typeof t||"Symbol"===t["@@toStringTag"])||!1};

},{}],133:[function(require,module,exports){
"use strict";var d=require("d"),validateSymbol=require("./validate-symbol"),create=Object.create,defineProperties=Object.defineProperties,defineProperty=Object.defineProperty,objPrototype=Object.prototype,NativeSymbol,SymbolPolyfill,HiddenSymbol,globalSymbols=create(null);"function"==typeof Symbol&&(NativeSymbol=Symbol);var generateName=function(){var o=create(null);return function(l){for(var e,t,i=0;o[l+(i||"")];)++i;return l+=i||"",o[l]=!0,e="@@"+l,defineProperty(objPrototype,e,d.gs(null,function(o){t||(t=!0,defineProperty(this,e,d(o)),t=!1)})),e}}();HiddenSymbol=function(o){if(this instanceof HiddenSymbol)throw new TypeError("TypeError: Symbol is not a constructor");return SymbolPolyfill(o)},module.exports=SymbolPolyfill=function o(l){var e;if(this instanceof o)throw new TypeError("TypeError: Symbol is not a constructor");return e=create(HiddenSymbol.prototype),l=void 0===l?"":String(l),defineProperties(e,{__description__:d("",l),__name__:d("",generateName(l))})},defineProperties(SymbolPolyfill,{"for":d(function(o){return globalSymbols[o]?globalSymbols[o]:globalSymbols[o]=SymbolPolyfill(String(o))}),keyFor:d(function(o){var l;validateSymbol(o);for(l in globalSymbols)if(globalSymbols[l]===o)return l}),hasInstance:d("",NativeSymbol&&NativeSymbol.hasInstance||SymbolPolyfill("hasInstance")),isConcatSpreadable:d("",NativeSymbol&&NativeSymbol.isConcatSpreadable||SymbolPolyfill("isConcatSpreadable")),iterator:d("",NativeSymbol&&NativeSymbol.iterator||SymbolPolyfill("iterator")),match:d("",NativeSymbol&&NativeSymbol.match||SymbolPolyfill("match")),replace:d("",NativeSymbol&&NativeSymbol.replace||SymbolPolyfill("replace")),search:d("",NativeSymbol&&NativeSymbol.search||SymbolPolyfill("search")),species:d("",NativeSymbol&&NativeSymbol.species||SymbolPolyfill("species")),split:d("",NativeSymbol&&NativeSymbol.split||SymbolPolyfill("split")),toPrimitive:d("",NativeSymbol&&NativeSymbol.toPrimitive||SymbolPolyfill("toPrimitive")),toStringTag:d("",NativeSymbol&&NativeSymbol.toStringTag||SymbolPolyfill("toStringTag")),unscopables:d("",NativeSymbol&&NativeSymbol.unscopables||SymbolPolyfill("unscopables"))}),defineProperties(HiddenSymbol.prototype,{constructor:d(SymbolPolyfill),toString:d("",function(){return this.__name__})}),defineProperties(SymbolPolyfill.prototype,{toString:d(function(){return"Symbol ("+validateSymbol(this).__description__+")"}),valueOf:d(function(){return validateSymbol(this)})}),defineProperty(SymbolPolyfill.prototype,SymbolPolyfill.toPrimitive,d("",function(){return validateSymbol(this)})),defineProperty(SymbolPolyfill.prototype,SymbolPolyfill.toStringTag,d("c","Symbol")),defineProperty(HiddenSymbol.prototype,SymbolPolyfill.toStringTag,d("c",SymbolPolyfill.prototype[SymbolPolyfill.toStringTag])),defineProperty(HiddenSymbol.prototype,SymbolPolyfill.toPrimitive,d("c",SymbolPolyfill.prototype[SymbolPolyfill.toPrimitive]));

},{"./validate-symbol":134,"d":79}],134:[function(require,module,exports){
"use strict";var isSymbol=require("./is-symbol");module.exports=function(r){if(!isSymbol(r))throw new TypeError(r+" is not a symbol");return r};

},{"./is-symbol":132}],135:[function(require,module,exports){
"use strict";var d=require("d"),callable=require("es5-ext/object/valid-callable"),apply=Function.prototype.apply,call=Function.prototype.call,create=Object.create,defineProperty=Object.defineProperty,defineProperties=Object.defineProperties,hasOwnProperty=Object.prototype.hasOwnProperty,descriptor={configurable:!0,enumerable:!1,writable:!0},on,once,off,emit,methods,descriptors,base;on=function(e,t){var r;return callable(t),hasOwnProperty.call(this,"__ee__")?r=this.__ee__:(r=descriptor.value=create(null),defineProperty(this,"__ee__",descriptor),descriptor.value=null),r[e]?"object"==typeof r[e]?r[e].push(t):r[e]=[r[e],t]:r[e]=t,this},once=function(e,t){var r,l;return callable(t),l=this,on.call(this,e,r=function(){off.call(l,e,r),apply.call(t,this,arguments)}),r.__eeOnceListener__=t,this},off=function(e,t){var r,l,s,o;if(callable(t),!hasOwnProperty.call(this,"__ee__"))return this;if(r=this.__ee__,!r[e])return this;if(l=r[e],"object"==typeof l)for(o=0;s=l[o];++o)(s===t||s.__eeOnceListener__===t)&&(2===l.length?r[e]=l[o?0:1]:l.splice(o,1));else(l===t||l.__eeOnceListener__===t)&&delete r[e];return this},emit=function(e){var t,r,l,s,o;if(hasOwnProperty.call(this,"__ee__")&&(s=this.__ee__[e]))if("object"==typeof s){for(r=arguments.length,o=new Array(r-1),t=1;r>t;++t)o[t-1]=arguments[t];for(s=s.slice(),t=0;l=s[t];++t)apply.call(l,this,o)}else switch(arguments.length){case 1:call.call(s,this);break;case 2:call.call(s,this,arguments[1]);break;case 3:call.call(s,this,arguments[1],arguments[2]);break;default:for(r=arguments.length,o=new Array(r-1),t=1;r>t;++t)o[t-1]=arguments[t];apply.call(s,this,o)}},methods={on:on,once:once,off:off,emit:emit},descriptors={on:d(on),once:d(once),off:d(off),emit:d(emit)},base=defineProperties({},descriptors),module.exports=exports=function(e){return null==e?create(base):defineProperties(Object(e),descriptors)},exports.methods=methods;

},{"d":79,"es5-ext/object/valid-callable":111}],136:[function(require,module,exports){
"use strict";function EE(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function EventEmitter(){}var prefix="function"!=typeof Object.create?"~":!1;EventEmitter.prototype._events=void 0,EventEmitter.prototype.listeners=function(e,t){var n=prefix?prefix+e:e,r=this._events&&this._events[n];if(t)return!!r;if(!r)return[];if(r.fn)return[r.fn];for(var i=0,s=r.length,o=new Array(s);s>i;i++)o[i]=r[i].fn;return o},EventEmitter.prototype.emit=function(e,t,n,r,i,s){var o=prefix?prefix+e:e;if(!this._events||!this._events[o])return!1;var f,v,c=this._events[o],h=arguments.length;if("function"==typeof c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),h){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,n),!0;case 4:return c.fn.call(c.context,t,n,r),!0;case 5:return c.fn.call(c.context,t,n,r,i),!0;case 6:return c.fn.call(c.context,t,n,r,i,s),!0}for(v=1,f=new Array(h-1);h>v;v++)f[v-1]=arguments[v];c.fn.apply(c.context,f)}else{var p,a=c.length;for(v=0;a>v;v++)switch(c[v].once&&this.removeListener(e,c[v].fn,void 0,!0),h){case 1:c[v].fn.call(c[v].context);break;case 2:c[v].fn.call(c[v].context,t);break;case 3:c[v].fn.call(c[v].context,t,n);break;default:if(!f)for(p=1,f=new Array(h-1);h>p;p++)f[p-1]=arguments[p];c[v].fn.apply(c[v].context,f)}}return!0},EventEmitter.prototype.on=function(e,t,n){var r=new EE(t,n||this),i=prefix?prefix+e:e;return this._events||(this._events=prefix?{}:Object.create(null)),this._events[i]?this._events[i].fn?this._events[i]=[this._events[i],r]:this._events[i].push(r):this._events[i]=r,this},EventEmitter.prototype.once=function(e,t,n){var r=new EE(t,n||this,!0),i=prefix?prefix+e:e;return this._events||(this._events=prefix?{}:Object.create(null)),this._events[i]?this._events[i].fn?this._events[i]=[this._events[i],r]:this._events[i].push(r):this._events[i]=r,this},EventEmitter.prototype.removeListener=function(e,t,n,r){var i=prefix?prefix+e:e;if(!this._events||!this._events[i])return this;var s=this._events[i],o=[];if(t)if(s.fn)(s.fn!==t||r&&!s.once||n&&s.context!==n)&&o.push(s);else for(var f=0,v=s.length;v>f;f++)(s[f].fn!==t||r&&!s[f].once||n&&s[f].context!==n)&&o.push(s[f]);return o.length?this._events[i]=1===o.length?o[0]:o:delete this._events[i],this},EventEmitter.prototype.removeAllListeners=function(e){return this._events?(e?delete this._events[prefix?prefix+e:e]:this._events=prefix?{}:Object.create(null),this):this},EventEmitter.prototype.off=EventEmitter.prototype.removeListener,EventEmitter.prototype.addListener=EventEmitter.prototype.on,EventEmitter.prototype.setMaxListeners=function(){return this},EventEmitter.prefixed=prefix,"undefined"!=typeof module&&(module.exports=EventEmitter);

},{}],137:[function(require,module,exports){
function EventEmitter(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function isFunction(e){return"function"==typeof e}function isNumber(e){return"number"==typeof e}function isObject(e){return"object"==typeof e&&null!==e}function isUndefined(e){return void 0===e}module.exports=EventEmitter,EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._maxListeners=void 0,EventEmitter.defaultMaxListeners=10,EventEmitter.prototype.setMaxListeners=function(e){if(!isNumber(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},EventEmitter.prototype.emit=function(e){var t,n,i,s,r,o;if(this._events||(this._events={}),"error"===e&&(!this._events.error||isObject(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],isUndefined(n))return!1;if(isFunction(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(isObject(n))for(s=Array.prototype.slice.call(arguments,1),o=n.slice(),i=o.length,r=0;i>r;r++)o[r].apply(this,s);return!0},EventEmitter.prototype.addListener=function(e,t){var n;if(!isFunction(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,isFunction(t.listener)?t.listener:t),this._events[e]?isObject(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,isObject(this._events[e])&&!this._events[e].warned&&(n=isUndefined(this._maxListeners)?EventEmitter.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.once=function(e,t){function n(){this.removeListener(e,n),i||(i=!0,t.apply(this,arguments))}if(!isFunction(t))throw TypeError("listener must be a function");var i=!1;return n.listener=t,this.on(e,n),this},EventEmitter.prototype.removeListener=function(e,t){var n,i,s,r;if(!isFunction(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],s=n.length,i=-1,n===t||isFunction(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(isObject(n)){for(r=s;r-- >0;)if(n[r]===t||n[r].listener&&n[r].listener===t){i=r;break}if(0>i)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},EventEmitter.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],isFunction(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},EventEmitter.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?isFunction(this._events[e])?[this._events[e]]:this._events[e].slice():[]},EventEmitter.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(isFunction(t))return 1;if(t)return t.length}return 0},EventEmitter.listenerCount=function(e,t){return e.listenerCount(t)};

},{}],138:[function(require,module,exports){
function getCanvasContext(e,t){if("string"!=typeof e)throw new TypeError("must specify type string");if("undefined"==typeof document)return null;t=t||{};var n=t.canvas||document.createElement("canvas");"number"==typeof t.width&&(n.width=t.width),"number"==typeof t.height&&(n.height=t.height);var r,i=t;try{var a=[e];0===e.indexOf("webgl")&&a.push("experimental-"+e);for(var o=0;o<a.length;o++)if(r=n.getContext(a[o],i))return r}catch(u){r=null}return r||null}module.exports=getCanvasContext;

},{}],139:[function(require,module,exports){
"use strict";function GLBuffer(e,t,r,i,s){this.gl=e,this.type=t,this.handle=r,this.length=i,this.usage=s}function updateTypeArray(e,t,r,i,s,a){var n=s.length*s.BYTES_PER_ELEMENT;if(0>a)return e.bufferData(t,s,i),n;if(n+a>r)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return e.bufferSubData(t,a,s),r}function makeScratchTypeArray(e,t){for(var r=pool.malloc(e.length,t),i=e.length,s=0;i>s;++s)r[s]=e[s];return r}function isPacked(e,t){for(var r=1,i=t.length-1;i>=0;--i){if(t[i]!==r)return!1;r*=e[i]}return!0}function createBuffer(e,t,r,i){if(r=r||e.ARRAY_BUFFER,i=i||e.DYNAMIC_DRAW,r!==e.ARRAY_BUFFER&&r!==e.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(i!==e.DYNAMIC_DRAW&&i!==e.STATIC_DRAW&&i!==e.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var s=e.createBuffer(),a=new GLBuffer(e,r,s,0,i);return a.update(t),a}var pool=require("typedarray-pool"),ops=require("ndarray-ops"),ndarray=require("ndarray"),SUPPORTED_TYPES=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"],proto=GLBuffer.prototype;proto.bind=function(){this.gl.bindBuffer(this.type,this.handle)},proto.unbind=function(){this.gl.bindBuffer(this.type,null)},proto.dispose=function(){this.gl.deleteBuffer(this.handle)},proto.update=function(e,t){if("number"!=typeof t&&(t=-1),this.bind(),"object"==typeof e&&"undefined"!=typeof e.shape){var r=e.dtype;if(SUPPORTED_TYPES.indexOf(r)<0&&(r="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER){var i=gl.getExtension("OES_element_index_uint");r=i&&"uint16"!==r?"uint32":"uint16"}if(r===e.dtype&&isPacked(e.shape,e.stride))0===e.offset&&e.data.length===e.shape[0]?this.length=updateTypeArray(this.gl,this.type,this.length,this.usage,e.data,t):this.length=updateTypeArray(this.gl,this.type,this.length,this.usage,e.data.subarray(e.offset,e.shape[0]),t);else{var s=pool.malloc(e.size,r),a=ndarray(s,e.shape);ops.assign(a,e),0>t?this.length=updateTypeArray(this.gl,this.type,this.length,this.usage,s,t):this.length=updateTypeArray(this.gl,this.type,this.length,this.usage,s.subarray(0,e.size),t),pool.free(s)}}else if(Array.isArray(e)){var n;n=this.type===this.gl.ELEMENT_ARRAY_BUFFER?makeScratchTypeArray(e,"uint16"):makeScratchTypeArray(e,"float32"),0>t?this.length=updateTypeArray(this.gl,this.type,this.length,this.usage,n,t):this.length=updateTypeArray(this.gl,this.type,this.length,this.usage,n.subarray(0,e.length),t),pool.free(n)}else if("object"==typeof e&&"number"==typeof e.length)this.length=updateTypeArray(this.gl,this.type,this.length,this.usage,e,t);else{if("number"!=typeof e&&void 0!==e)throw new Error("gl-buffer: Invalid data type");if(t>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");e=0|e,0>=e&&(e=1),this.gl.bufferData(this.type,0|e,this.usage),this.length=e}},module.exports=createBuffer;

},{"ndarray":219,"ndarray-ops":218,"typedarray-pool":243}],140:[function(require,module,exports){
module.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"};

},{}],141:[function(require,module,exports){
var gl10=require("./1.0/numbers");module.exports=function(r){return gl10[r]};

},{"./1.0/numbers":140}],142:[function(require,module,exports){
function formatCompilerError(r,n,s){"use strict";var e=shaderName(n)||"of unknown name (see npm glsl-shader-name)",t="unknown type";void 0!==s&&(t=s===glConstants.FRAGMENT_SHADER?"fragment":"vertex");for(var i=sprintf("Error compiling %s shader %s:\n",t,e),a=sprintf("%s%s",i,r),o=r.split("\n"),l={},p=0;p<o.length;p++){var m=o[p];if(""!==m){var f=parseInt(m.split(":")[2]);if(isNaN(f))throw new Error(sprintf("Could not parse error: %s",m));l[f]=m}}for(var u=addLineNumbers(n).split("\n"),p=0;p<u.length;p++)if(l[p+3]||l[p+2]||l[p+1]){var d=u[p];if(i+=d+"\n",l[p+1]){var g=l[p+1];g=g.substr(g.split(":",3).join(":").length+1).trim(),i+=sprintf("^^^ %s\n\n",g)}}return{"long":i.trim(),"short":a.trim()}}var sprintf=require("sprintf-js").sprintf,glConstants=require("gl-constants/lookup"),shaderName=require("glsl-shader-name"),addLineNumbers=require("add-line-numbers");module.exports=formatCompilerError;

},{"add-line-numbers":61,"gl-constants/lookup":141,"glsl-shader-name":204,"sprintf-js":240}],143:[function(require,module,exports){
function GLGeometry(t){return this instanceof GLGeometry?(this._attributes=[],this._dirty=!0,this._length=0,this._index=null,this._vao=null,this._keys=[],void(this.gl=t)):new GLGeometry(t)}var normalize=require("./normalize"),createVAO=require("gl-vao");module.exports=GLGeometry,GLGeometry.prototype.dispose=function(){for(var t=0;t<this._attributes.length;t++)this._attributes[t].buffer.dispose();this._attributes=[],this._keys=[],this._length=0,this._dirty=!0,this._index&&(this._index.dispose(),this._index=null),this._vao&&(this._vao.dispose(),this._vao=null)},GLGeometry.prototype.faces=function(t,e){var i=e&&e.size||3;return t=t.cells?t.cells:t,this._dirty=!0,this._index&&this._index.dispose(),this._index=normalize(this.gl,t,i,this.gl.ELEMENT_ARRAY_BUFFER,"uint16"),this._length=this._index.length*i,this._index=this._index.buffer,this},GLGeometry.prototype.attr=function t(e,t,i){i=i||{},this._dirty=!0;var s=this.gl,r=!this._attributes.length,n=i.size||3,h=normalize(s,t,n,s.ARRAY_BUFFER,"float32");if(!h)throw new Error("Unexpected attribute format: needs an ndarray, array, typed array, gl-buffer or simplicial complex");var o=h.buffer,a=h.length,_=h.index;return this._keys.push(e),this._attributes.push({size:n,buffer:o}),r&&(this._length=a),r&&_&&(this._index=_),this},GLGeometry.prototype.bind=function(t){if(this.update(),this._vao.bind(),this._keys){for(var e=0;e<this._keys.length;e++){var i=t.attributes[this._keys[e]];i&&(i.location=e)}t&&t.bind()}},GLGeometry.prototype.draw=function(t,e,i){e="undefined"==typeof e?0:e,i="undefined"==typeof i?this._length:i,t="undefined"==typeof t?this.gl.TRIANGLES:t,this.update(),this._vao._useElements?this.gl.drawElements(t,i-e,this._vao._elementsType,e):this.gl.drawArrays(t,e,i-e)},GLGeometry.prototype.unbind=function(){this.update(),this._vao.unbind()},GLGeometry.prototype.update=function(){this._dirty&&(this._dirty=!1,this._vao&&this._vao.dispose(),this._vao=createVAO(this.gl,this._attributes,this._index))};

},{"./normalize":144,"gl-vao":187}],144:[function(require,module,exports){
function normalize(e,r,t,n,f){return Array.isArray(r)&&Array.isArray(r[0])?{buffer:createBuffer(e,pack(r,f),n),length:r.length}:Array.isArray(r)&&ista(r[0])?{buffer:createBuffer(e,pack(r,f),n),length:r.length*r[0].length/t}:Array.isArray(r)?{buffer:createBuffer(e,new(dtype(f))(r),n),length:r.length/t}:r.handle instanceof WebGLBuffer?{buffer:r,length:r.length/t/4}:r.cells&&r.positions?{length:r.cells.length*t,buffer:createBuffer(e,pack(r.positions,f),n),index:createBuffer(e,pack(r.cells,"uint16"),e.ELEMENT_ARRAY_BUFFER)}:isnd(r)?{buffer:createBuffer(e,r,n),length:ndlength(r.shape)/t}:ista(r)?(!f||r instanceof dtype(f)||(r=convert(r,dtype(f))),{buffer:createBuffer(e,r,n),length:r.length/t}):void 0}function ndlength(e){for(var r=1,t=0;t<e.length;t++)r*=e[t];return r}function convert(e,r){r=new r(e.length);for(var t=0;t<e.length;t++)r[t]=e[t];return r}var pack=require("array-pack-2d"),ista=require("is-typedarray"),createBuffer=require("gl-buffer"),isnd=require("isndarray"),dtype=require("dtype");module.exports=normalize;

},{"array-pack-2d":62,"dtype":82,"gl-buffer":139,"is-typedarray":214,"isndarray":215}],145:[function(require,module,exports){
function create(){var e=new Float32Array(9);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}module.exports=create;

},{}],146:[function(require,module,exports){
function normalFromMat4(r,o){var n=o[0],a=o[1],l=o[2],m=o[3],t=o[4],u=o[5],e=o[6],F=o[7],M=o[8],c=o[9],d=o[10],f=o[11],i=o[12],p=o[13],s=o[14],v=o[15],x=n*u-a*t,b=n*e-l*t,g=n*F-m*t,h=a*e-l*u,j=a*F-m*u,k=l*F-m*e,q=M*p-c*i,w=M*s-d*i,y=M*v-f*i,z=c*s-d*p,A=c*v-f*p,B=d*v-f*s,C=x*B-b*A+g*z+h*y-j*w+k*q;return C?(C=1/C,r[0]=(u*B-e*A+F*z)*C,r[1]=(e*y-t*B-F*w)*C,r[2]=(t*A-u*y+F*q)*C,r[3]=(l*A-a*B-m*z)*C,r[4]=(n*B-l*y+m*w)*C,r[5]=(a*y-n*A-m*q)*C,r[6]=(p*k-s*j+v*h)*C,r[7]=(s*g-i*k-v*b)*C,r[8]=(i*j-p*g+v*x)*C,r):null}module.exports=normalFromMat4;

},{}],147:[function(require,module,exports){
function adjoint(n,o){var t=o[0],r=o[1],a=o[2],d=o[3],e=o[4],i=o[5],u=o[6],j=o[7],c=o[8],f=o[9],l=o[10],m=o[11],p=o[12],s=o[13],v=o[14],x=o[15];return n[0]=i*(l*x-m*v)-f*(u*x-j*v)+s*(u*m-j*l),n[1]=-(r*(l*x-m*v)-f*(a*x-d*v)+s*(a*m-d*l)),n[2]=r*(u*x-j*v)-i*(a*x-d*v)+s*(a*j-d*u),n[3]=-(r*(u*m-j*l)-i*(a*m-d*l)+f*(a*j-d*u)),n[4]=-(e*(l*x-m*v)-c*(u*x-j*v)+p*(u*m-j*l)),n[5]=t*(l*x-m*v)-c*(a*x-d*v)+p*(a*m-d*l),n[6]=-(t*(u*x-j*v)-e*(a*x-d*v)+p*(a*j-d*u)),n[7]=t*(u*m-j*l)-e*(a*m-d*l)+c*(a*j-d*u),n[8]=e*(f*x-m*s)-c*(i*x-j*s)+p*(i*m-j*f),n[9]=-(t*(f*x-m*s)-c*(r*x-d*s)+p*(r*m-d*f)),n[10]=t*(i*x-j*s)-e*(r*x-d*s)+p*(r*j-d*i),n[11]=-(t*(i*m-j*f)-e*(r*m-d*f)+c*(r*j-d*i)),n[12]=-(e*(f*v-l*s)-c*(i*v-u*s)+p*(i*l-u*f)),n[13]=t*(f*v-l*s)-c*(r*v-a*s)+p*(r*l-a*f),n[14]=-(t*(i*v-u*s)-e*(r*v-a*s)+p*(r*u-a*i)),n[15]=t*(i*l-u*f)-e*(r*l-a*f)+c*(r*u-a*i),n}module.exports=adjoint;

},{}],148:[function(require,module,exports){
function clone(e){var n=new Float32Array(16);return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n}module.exports=clone;

},{}],149:[function(require,module,exports){
function copy(o,c){return o[0]=c[0],o[1]=c[1],o[2]=c[2],o[3]=c[3],o[4]=c[4],o[5]=c[5],o[6]=c[6],o[7]=c[7],o[8]=c[8],o[9]=c[9],o[10]=c[10],o[11]=c[11],o[12]=c[12],o[13]=c[13],o[14]=c[14],o[15]=c[15],o}module.exports=copy;

},{}],150:[function(require,module,exports){
function create(){var e=new Float32Array(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}module.exports=create;

},{}],151:[function(require,module,exports){
function determinant(e){var n=e[0],t=e[1],r=e[2],a=e[3],d=e[4],i=e[5],m=e[6],o=e[7],u=e[8],c=e[9],f=e[10],l=e[11],p=e[12],s=e[13],v=e[14],x=e[15],b=n*i-t*d,g=n*m-r*d,h=n*o-a*d,j=t*m-r*i,k=t*o-a*i,q=r*o-a*m,w=u*s-c*p,y=u*v-f*p,z=u*x-l*p,A=c*v-f*s,B=c*x-l*s,C=f*x-l*v;return b*C-g*B+h*A+j*z-k*y+q*w}module.exports=determinant;

},{}],152:[function(require,module,exports){
function fromQuat(r,o){var t=o[0],u=o[1],a=o[2],e=o[3],f=t+t,m=u+u,n=a+a,Q=t*f,c=u*f,d=u*m,i=a*f,l=a*m,p=a*n,s=e*f,v=e*m,x=e*n;return r[0]=1-d-p,r[1]=c+x,r[2]=i-v,r[3]=0,r[4]=c-x,r[5]=1-Q-p,r[6]=l+s,r[7]=0,r[8]=i+v,r[9]=l-s,r[10]=1-Q-d,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}module.exports=fromQuat;

},{}],153:[function(require,module,exports){
function fromRotationTranslation(o,n,t){var r=n[0],a=n[1],i=n[2],e=n[3],f=r+r,l=a+a,m=i+i,s=r*f,u=r*l,R=r*m,T=a*l,c=a*m,d=i*m,p=e*f,v=e*l,x=e*m;return o[0]=1-(T+d),o[1]=u+x,o[2]=R-v,o[3]=0,o[4]=u-x,o[5]=1-(s+d),o[6]=c+p,o[7]=0,o[8]=R+v,o[9]=c-p,o[10]=1-(s+T),o[11]=0,o[12]=t[0],o[13]=t[1],o[14]=t[2],o[15]=1,o}module.exports=fromRotationTranslation;

},{}],154:[function(require,module,exports){
function frustum(u,r,t,e,f,m,n){var o=1/(t-r),s=1/(f-e),a=1/(m-n);return u[0]=2*m*o,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=2*m*s,u[6]=0,u[7]=0,u[8]=(t+r)*o,u[9]=(f+e)*s,u[10]=(n+m)*a,u[11]=-1,u[12]=0,u[13]=0,u[14]=n*m*2*a,u[15]=0,u}module.exports=frustum;

},{}],155:[function(require,module,exports){
function identity(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}module.exports=identity;

},{}],156:[function(require,module,exports){
module.exports={create:require("./create"),clone:require("./clone"),copy:require("./copy"),identity:require("./identity"),transpose:require("./transpose"),invert:require("./invert"),adjoint:require("./adjoint"),determinant:require("./determinant"),multiply:require("./multiply"),translate:require("./translate"),scale:require("./scale"),rotate:require("./rotate"),rotateX:require("./rotateX"),rotateY:require("./rotateY"),rotateZ:require("./rotateZ"),fromRotationTranslation:require("./fromRotationTranslation"),fromQuat:require("./fromQuat"),frustum:require("./frustum"),perspective:require("./perspective"),perspectiveFromFieldOfView:require("./perspectiveFromFieldOfView"),ortho:require("./ortho"),lookAt:require("./lookAt"),str:require("./str")};

},{"./adjoint":147,"./clone":148,"./copy":149,"./create":150,"./determinant":151,"./fromQuat":152,"./fromRotationTranslation":153,"./frustum":154,"./identity":155,"./invert":157,"./lookAt":158,"./multiply":159,"./ortho":160,"./perspective":161,"./perspectiveFromFieldOfView":162,"./rotate":163,"./rotateX":164,"./rotateY":165,"./rotateZ":166,"./scale":167,"./str":168,"./translate":169,"./transpose":170}],157:[function(require,module,exports){
function invert(n,r){var e=r[0],t=r[1],u=r[2],i=r[3],l=r[4],o=r[5],v=r[6],a=r[7],c=r[8],d=r[9],f=r[10],m=r[11],p=r[12],s=r[13],x=r[14],b=r[15],g=e*o-t*l,h=e*v-u*l,j=e*a-i*l,k=t*v-u*o,q=t*a-i*o,w=u*a-i*v,y=c*s-d*p,z=c*x-f*p,A=c*b-m*p,B=d*x-f*s,C=d*b-m*s,D=f*b-m*x,E=g*D-h*C+j*B+k*A-q*z+w*y;return E?(E=1/E,n[0]=(o*D-v*C+a*B)*E,n[1]=(u*C-t*D-i*B)*E,n[2]=(s*w-x*q+b*k)*E,n[3]=(f*q-d*w-m*k)*E,n[4]=(v*A-l*D-a*z)*E,n[5]=(e*D-u*A+i*z)*E,n[6]=(x*j-p*w-b*h)*E,n[7]=(c*w-f*j+m*h)*E,n[8]=(l*C-o*A+a*y)*E,n[9]=(t*A-e*C-i*y)*E,n[10]=(p*q-s*j+b*g)*E,n[11]=(d*j-c*q-m*g)*E,n[12]=(o*z-l*B-v*y)*E,n[13]=(e*B-t*z+u*y)*E,n[14]=(s*h-p*k-x*g)*E,n[15]=(c*k-d*h+f*g)*E,n):null}module.exports=invert;

},{}],158:[function(require,module,exports){
function lookAt(t,a,e,r){var i,o,s,h,n,M,d,q,u,b,l=a[0],y=a[1],k=a[2],v=r[0],A=r[1],c=r[2],f=e[0],m=e[1],p=e[2];return Math.abs(l-f)<1e-6&&Math.abs(y-m)<1e-6&&Math.abs(k-p)<1e-6?identity(t):(d=l-f,q=y-m,u=k-p,b=1/Math.sqrt(d*d+q*q+u*u),d*=b,q*=b,u*=b,i=A*u-c*q,o=c*d-v*u,s=v*q-A*d,b=Math.sqrt(i*i+o*o+s*s),b?(b=1/b,i*=b,o*=b,s*=b):(i=0,o=0,s=0),h=q*s-u*o,n=u*i-d*s,M=d*o-q*i,b=Math.sqrt(h*h+n*n+M*M),b?(b=1/b,h*=b,n*=b,M*=b):(h=0,n=0,M=0),t[0]=i,t[1]=h,t[2]=d,t[3]=0,t[4]=o,t[5]=n,t[6]=q,t[7]=0,t[8]=s,t[9]=M,t[10]=u,t[11]=0,t[12]=-(i*l+o*y+s*k),t[13]=-(h*l+n*y+M*k),t[14]=-(d*l+q*y+u*k),t[15]=1,t)}var identity=require("./identity");module.exports=lookAt;

},{"./identity":155}],159:[function(require,module,exports){
function multiply(l,t,u){var r=t[0],e=t[1],i=t[2],m=t[3],n=t[4],o=t[5],p=t[6],y=t[7],a=t[8],c=t[9],d=t[10],f=t[11],s=t[12],v=t[13],x=t[14],b=t[15],g=u[0],h=u[1],j=u[2],k=u[3];return l[0]=g*r+h*n+j*a+k*s,l[1]=g*e+h*o+j*c+k*v,l[2]=g*i+h*p+j*d+k*x,l[3]=g*m+h*y+j*f+k*b,g=u[4],h=u[5],j=u[6],k=u[7],l[4]=g*r+h*n+j*a+k*s,l[5]=g*e+h*o+j*c+k*v,l[6]=g*i+h*p+j*d+k*x,l[7]=g*m+h*y+j*f+k*b,g=u[8],h=u[9],j=u[10],k=u[11],l[8]=g*r+h*n+j*a+k*s,l[9]=g*e+h*o+j*c+k*v,l[10]=g*i+h*p+j*d+k*x,l[11]=g*m+h*y+j*f+k*b,g=u[12],h=u[13],j=u[14],k=u[15],l[12]=g*r+h*n+j*a+k*s,l[13]=g*e+h*o+j*c+k*v,l[14]=g*i+h*p+j*d+k*x,l[15]=g*m+h*y+j*f+k*b,l}module.exports=multiply;

},{}],160:[function(require,module,exports){
function ortho(o,r,t,e,n,u,h){var a=1/(r-t),c=1/(e-n),d=1/(u-h);return o[0]=-2*a,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*c,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*d,o[11]=0,o[12]=(r+t)*a,o[13]=(n+e)*c,o[14]=(h+u)*d,o[15]=1,o}module.exports=ortho;

},{}],161:[function(require,module,exports){
function perspective(e,t,r,p,n){var a=1/Math.tan(t/2),c=1/(p-n);return e[0]=a/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(n+p)*c,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*n*p*c,e[15]=0,e}module.exports=perspective;

},{}],162:[function(require,module,exports){
function perspectiveFromFieldOfView(e,t,a,r){var h=Math.tan(t.upDegrees*Math.PI/180),i=Math.tan(t.downDegrees*Math.PI/180),n=Math.tan(t.leftDegrees*Math.PI/180),M=Math.tan(t.rightDegrees*Math.PI/180),s=2/(n+M),o=2/(h+i);return e[0]=s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=-((n-M)*s*.5),e[9]=(h-i)*o*.5,e[10]=r/(a-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*a/(a-r),e[15]=0,e}module.exports=perspectiveFromFieldOfView;

},{}],163:[function(require,module,exports){
function rotate(t,a,r,e){var o,n,s,h,u,M,l,c,i,b,d,f,m,p,q,v,x,g,j,k,w,y,z,A,B=e[0],C=e[1],D=e[2],E=Math.sqrt(B*B+C*C+D*D);return Math.abs(E)<1e-6?null:(E=1/E,B*=E,C*=E,D*=E,o=Math.sin(r),n=Math.cos(r),s=1-n,h=a[0],u=a[1],M=a[2],l=a[3],c=a[4],i=a[5],b=a[6],d=a[7],f=a[8],m=a[9],p=a[10],q=a[11],v=B*B*s+n,x=C*B*s+D*o,g=D*B*s-C*o,j=B*C*s-D*o,k=C*C*s+n,w=D*C*s+B*o,y=B*D*s+C*o,z=C*D*s-B*o,A=D*D*s+n,t[0]=h*v+c*x+f*g,t[1]=u*v+i*x+m*g,t[2]=M*v+b*x+p*g,t[3]=l*v+d*x+q*g,t[4]=h*j+c*k+f*w,t[5]=u*j+i*k+m*w,t[6]=M*j+b*k+p*w,t[7]=l*j+d*k+q*w,t[8]=h*y+c*z+f*A,t[9]=u*y+i*z+m*A,t[10]=M*y+b*z+p*A,t[11]=l*y+d*z+q*A,a!==t&&(t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t)}module.exports=rotate;

},{}],164:[function(require,module,exports){
function rotateX(t,o,r){var a=Math.sin(r),e=Math.cos(r),n=o[4],s=o[5],u=o[6],c=o[7],h=o[8],i=o[9],M=o[10],X=o[11];return o!==t&&(t[0]=o[0],t[1]=o[1],t[2]=o[2],t[3]=o[3],t[12]=o[12],t[13]=o[13],t[14]=o[14],t[15]=o[15]),t[4]=n*e+h*a,t[5]=s*e+i*a,t[6]=u*e+M*a,t[7]=c*e+X*a,t[8]=h*e-n*a,t[9]=i*e-s*a,t[10]=M*e-u*a,t[11]=X*e-c*a,t}module.exports=rotateX;

},{}],165:[function(require,module,exports){
function rotateY(t,o,r){var a=Math.sin(r),e=Math.cos(r),n=o[0],s=o[1],u=o[2],c=o[3],h=o[8],i=o[9],M=o[10],Y=o[11];return o!==t&&(t[4]=o[4],t[5]=o[5],t[6]=o[6],t[7]=o[7],t[12]=o[12],t[13]=o[13],t[14]=o[14],t[15]=o[15]),t[0]=n*e-h*a,t[1]=s*e-i*a,t[2]=u*e-M*a,t[3]=c*e-Y*a,t[8]=n*a+h*e,t[9]=s*a+i*e,t[10]=u*a+M*e,t[11]=c*a+Y*e,t}module.exports=rotateY;

},{}],166:[function(require,module,exports){
function rotateZ(t,o,r){var a=Math.sin(r),e=Math.cos(r),n=o[0],s=o[1],u=o[2],c=o[3],h=o[4],i=o[5],M=o[6],Z=o[7];return o!==t&&(t[8]=o[8],t[9]=o[9],t[10]=o[10],t[11]=o[11],t[12]=o[12],t[13]=o[13],t[14]=o[14],t[15]=o[15]),t[0]=n*e+h*a,t[1]=s*e+i*a,t[2]=u*e+M*a,t[3]=c*e+Z*a,t[4]=h*e-n*a,t[5]=i*e-s*a,t[6]=M*e-u*a,t[7]=Z*e-c*a,t}module.exports=rotateZ;

},{}],167:[function(require,module,exports){
function scale(e,r,a){var c=a[0],l=a[1],n=a[2];return e[0]=r[0]*c,e[1]=r[1]*c,e[2]=r[2]*c,e[3]=r[3]*c,e[4]=r[4]*l,e[5]=r[5]*l,e[6]=r[6]*l,e[7]=r[7]*l,e[8]=r[8]*n,e[9]=r[9]*n,e[10]=r[10]*n,e[11]=r[11]*n,e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15],e}module.exports=scale;

},{}],168:[function(require,module,exports){
function str(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}module.exports=str;

},{}],169:[function(require,module,exports){
function translate(t,r,a){var e,n,l,o,s,u,c,d,f,i,m,p,v=a[0],x=a[1],b=a[2];return r===t?(t[12]=r[0]*v+r[4]*x+r[8]*b+r[12],t[13]=r[1]*v+r[5]*x+r[9]*b+r[13],t[14]=r[2]*v+r[6]*x+r[10]*b+r[14],t[15]=r[3]*v+r[7]*x+r[11]*b+r[15]):(e=r[0],n=r[1],l=r[2],o=r[3],s=r[4],u=r[5],c=r[6],d=r[7],f=r[8],i=r[9],m=r[10],p=r[11],t[0]=e,t[1]=n,t[2]=l,t[3]=o,t[4]=s,t[5]=u,t[6]=c,t[7]=d,t[8]=f,t[9]=i,t[10]=m,t[11]=p,t[12]=e*v+s*x+f*b+r[12],t[13]=n*v+u*x+i*b+r[13],t[14]=l*v+c*x+m*b+r[14],t[15]=o*v+d*x+p*b+r[15]),t}module.exports=translate;

},{}],170:[function(require,module,exports){
function transpose(e,r){if(e===r){var s=r[1],n=r[2],o=r[3],t=r[6],a=r[7],p=r[11];e[1]=r[4],e[2]=r[8],e[3]=r[12],e[4]=s,e[6]=r[9],e[7]=r[13],e[8]=n,e[9]=t,e[11]=r[14],e[12]=o,e[13]=a,e[14]=p}else e[0]=r[0],e[1]=r[4],e[2]=r[8],e[3]=r[12],e[4]=r[1],e[5]=r[5],e[6]=r[9],e[7]=r[13],e[8]=r[2],e[9]=r[6],e[10]=r[10],e[11]=r[14],e[12]=r[3],e[13]=r[7],e[14]=r[11],e[15]=r[15];return e}module.exports=transpose;

},{}],171:[function(require,module,exports){
function identity(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}module.exports=identity;

},{}],172:[function(require,module,exports){
function invert(r,e){var n=e[0],t=e[1],i=e[2],o=e[3],u=n*n+t*t+i*i+o*o,v=u?1/u:0;return r[0]=-n*v,r[1]=-t*v,r[2]=-i*v,r[3]=o*v,r}module.exports=invert;

},{}],173:[function(require,module,exports){
module.exports=require("gl-vec4/normalize");

},{"gl-vec4/normalize":201}],174:[function(require,module,exports){
function rotateX(t,o,r){r*=.5;var a=o[0],e=o[1],n=o[2],s=o[3],u=Math.sin(r),c=Math.cos(r);return t[0]=a*c+s*u,t[1]=e*c+n*u,t[2]=n*c-e*u,t[3]=s*c-a*u,t}module.exports=rotateX;

},{}],175:[function(require,module,exports){
function rotateY(t,o,r){r*=.5;var a=o[0],e=o[1],n=o[2],s=o[3],u=Math.sin(r),c=Math.cos(r);return t[0]=a*c-n*u,t[1]=e*c+s*u,t[2]=n*c+a*u,t[3]=s*c-e*u,t}module.exports=rotateY;

},{}],176:[function(require,module,exports){
function rotateZ(t,o,r){r*=.5;var a=o[0],e=o[1],n=o[2],s=o[3],u=Math.sin(r),c=Math.cos(r);return t[0]=a*c+e*u,t[1]=e*c-a*u,t[2]=n*c+s*u,t[3]=s*c-n*u,t}module.exports=rotateZ;

},{}],177:[function(require,module,exports){
"use strict";function Shader(r){this.gl=r,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}function compareAttributes(r,e){return r.name<e.name?-1:1}function createShader(r,e,t,a,i){var o=new Shader(r);return o.update(e,t,a,i),o}var createUniformWrapper=require("./lib/create-uniforms"),createAttributeWrapper=require("./lib/create-attributes"),makeReflect=require("./lib/reflect"),shaderCache=require("./lib/shader-cache"),runtime=require("./lib/runtime-reflect"),GLError=require("./lib/GLError"),proto=Shader.prototype;proto.bind=function(){this.program||this._relink(),this.gl.useProgram(this.program)},proto.dispose=function(){this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null},proto.update=function(r,e,t,a){function i(){s.program=shaderCache.program(n,s._vref,s._fref,l,c);for(var r=0;r<t.length;++r)S[r]=n.getUniformLocation(s.program,t[r].name)}if(!e||1===arguments.length){var o=r;r=o.vertex,e=o.fragment,t=o.uniforms,a=o.attributes}var s=this,n=s.gl,h=s._vref;s._vref=shaderCache.shader(n,n.VERTEX_SHADER,r),h&&h.dispose(),s.vertShader=s._vref.shader;var f=this._fref;if(s._fref=shaderCache.shader(n,n.FRAGMENT_SHADER,e),f&&f.dispose(),s.fragShader=s._fref.shader,!t||!a){var u=n.createProgram();if(n.attachShader(u,s.fragShader),n.attachShader(u,s.vertShader),n.linkProgram(u),!n.getProgramParameter(u,n.LINK_STATUS)){var p=n.getProgramInfoLog(u);throw new GLError(p,"Error linking program:"+p)}t=t||runtime.uniforms(n,u),a=a||runtime.attributes(n,u),n.deleteProgram(u)}a=a.slice(),a.sort(compareAttributes);for(var m=[],l=[],c=[],d=0;d<a.length;++d){var g=a[d];if(g.type.indexOf("mat")>=0){for(var v=0|g.type.charAt(g.type.length-1),_=new Array(v),b=0;v>b;++b)_[b]=c.length,l.push(g.name+"["+b+"]"),"number"==typeof g.location?c.push(g.location+b):Array.isArray(g.location)&&g.location.length===v&&"number"==typeof g.location[b]?c.push(0|g.location[b]):c.push(-1);m.push({name:g.name,type:g.type,locations:_})}else m.push({name:g.name,type:g.type,locations:[c.length]}),l.push(g.name),"number"==typeof g.location?c.push(0|g.location):c.push(-1)}for(var y=0,d=0;d<c.length;++d)if(c[d]<0){for(;c.indexOf(y)>=0;)y+=1;c[d]=y}var S=new Array(t.length);i(),s._relink=i,s.types={uniforms:makeReflect(t),attributes:makeReflect(a)},s.attributes=createAttributeWrapper(n,s,m,c),Object.defineProperty(s,"uniforms",createUniformWrapper(n,s,t,S))},module.exports=createShader;

},{"./lib/GLError":178,"./lib/create-attributes":179,"./lib/create-uniforms":180,"./lib/reflect":181,"./lib/runtime-reflect":182,"./lib/shader-cache":183}],178:[function(require,module,exports){
function GLError(r,o,t){this.shortMessage=o||"",this.longMessage=t||"",this.rawError=r||"",this.message="gl-shader: "+(o||r||"")+(t?"\n"+t:""),this.stack=(new Error).stack}GLError.prototype=new Error,GLError.prototype.name="GLError",GLError.prototype.constructor=GLError,module.exports=GLError;

},{}],179:[function(require,module,exports){
"use strict";function ShaderAttribute(t,r,e,i,n,o){this._gl=t,this._wrapper=r,this._index=e,this._locations=i,this._dimension=n,this._constFunc=o}function addVectorAttribute(t,r,e,i,n,o,a){for(var u=["gl","v"],c=[],s=0;n>s;++s)u.push("x"+s),c.push("x"+s);u.push("if(x0.length===void 0){return gl.vertexAttrib"+n+"f(v,"+c.join()+")}else{return gl.vertexAttrib"+n+"fv(v,x0)}");var l=Function.apply(null,u),f=new ShaderAttribute(t,r,e,i,n,l);Object.defineProperty(o,a,{set:function(r){return t.disableVertexAttribArray(i[e]),l(t,i[e],r),r},get:function(){return f},enumerable:!0})}function addMatrixAttribute(t,r,e,i,n,o,a){for(var u=new Array(n),c=new Array(n),s=0;n>s;++s)addVectorAttribute(t,r,e[s],i,n,u,s),c[s]=u[s];Object.defineProperty(u,"location",{set:function(t){if(Array.isArray(t))for(var r=0;n>r;++r)c[r].location=t[r];else for(var r=0;n>r;++r)c[r].location=t+r;return t},get:function(){for(var t=new Array(n),r=0;n>r;++r)t[r]=i[e[r]];return t},enumerable:!0}),u.pointer=function(r,o,a,u){r=r||t.FLOAT,o=!!o,a=a||n*n,u=u||0;for(var c=0;n>c;++c){var s=i[e[c]];t.vertexAttribPointer(s,n,r,o,a,u+c*n),t.enableVertexAttribArray(s)}};var l=new Array(n),f=t["vertexAttrib"+n+"fv"];Object.defineProperty(o,a,{set:function(r){for(var o=0;n>o;++o){var a=i[e[o]];if(t.disableVertexAttribArray(a),Array.isArray(r[0]))f.call(t,a,r[o]);else{for(var u=0;n>u;++u)l[u]=r[n*o+u];f.call(t,a,l)}}return r},get:function(){return u},enumerable:!0})}function createAttributeWrapper(t,r,e,i){for(var n={},o=0,a=e.length;a>o;++o){var u=e[o],c=u.name,s=u.type,l=u.locations;switch(s){case"bool":case"int":case"float":addVectorAttribute(t,r,l[0],i,1,n,c);break;default:if(s.indexOf("vec")>=0){var f=s.charCodeAt(s.length-1)-48;if(2>f||f>4)throw new GLError("","Invalid data type for attribute "+c+": "+s);addVectorAttribute(t,r,l[0],i,f,n,c)}else{if(!(s.indexOf("mat")>=0))throw new GLError("","Unknown data type for attribute "+c+": "+s);var f=s.charCodeAt(s.length-1)-48;if(2>f||f>4)throw new GLError("","Invalid data type for attribute "+c+": "+s);addMatrixAttribute(t,r,l,i,f,n,c)}}}return n}module.exports=createAttributeWrapper;var GLError=require("./GLError"),proto=ShaderAttribute.prototype;proto.pointer=function(t,r,e,i){var n=this,o=n._gl,a=n._locations[n._index];o.vertexAttribPointer(a,n._dimension,t||o.FLOAT,!!r,e||0,i||0),o.enableVertexAttribArray(a)},proto.set=function(t,r,e,i){return this._constFunc(this._locations[this._index],t,r,e,i)},Object.defineProperty(proto,"location",{get:function(){return this._locations[this._index]},set:function(t){return t!==this._locations[this._index]&&(this._locations[this._index]=0|t,this._wrapper.program=null),0|t}});

},{"./GLError":178}],180:[function(require,module,exports){
"use strict";function identity(r){var e=new Function("y","return function(){return y}");return e(r)}function makeVector(r,e){for(var n=new Array(r),t=0;r>t;++t)n[t]=e;return n}function createUniformWrapper(r,e,n,t){function o(n){var o=new Function("gl","wrapper","locations","return function(){return gl.getUniform(wrapper.program,locations["+n+"])}");return o(r,e,t)}function a(r,e,n){switch(n){case"bool":case"int":case"sampler2D":case"samplerCube":return"gl.uniform1i(locations["+e+"],obj"+r+")";case"float":return"gl.uniform1f(locations["+e+"],obj"+r+")";default:var t=n.indexOf("vec");if(!(t>=0&&1>=t&&n.length===4+t)){if(0===n.indexOf("mat")&&4===n.length){var o=n.charCodeAt(n.length-1)-48;if(2>o||o>4)throw new GLError("","Invalid uniform dimension type for matrix "+name+": "+n);return"gl.uniformMatrix"+o+"fv(locations["+e+"],false,obj"+r+")"}throw new GLError("","Unknown uniform data type for "+name+": "+n)}var o=n.charCodeAt(n.length-1)-48;if(2>o||o>4)throw new GLError("","Invalid data type");switch(n.charAt(0)){case"b":case"i":return"gl.uniform"+o+"iv(locations["+e+"],obj"+r+")";case"v":return"gl.uniform"+o+"fv(locations["+e+"],obj"+r+")";default:throw new GLError("","Unrecognized data type for vector "+name+": "+n)}}}function i(r,e){if("object"!=typeof e)return[[r,e]];var n=[];for(var t in e){var o=e[t],a=r;a+=parseInt(t)+""===t?"["+t+"]":"."+t,"object"==typeof o?n.push.apply(n,i(a,o)):n.push([a,o])}return n}function c(e){for(var o=["return function updateProperty(obj){"],c=i("",e),f=0;f<c.length;++f){var u=c[f],l=u[0],s=u[1];t[s]&&o.push(a(l,s,n[s].type))}o.push("return obj}");var m=new Function("gl","locations",o.join("\n"));return m(r,t)}function f(r){switch(r){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":return 0;case"float":return 0;default:var e=r.indexOf("vec");if(e>=0&&1>=e&&r.length===4+e){var n=r.charCodeAt(r.length-1)-48;if(2>n||n>4)throw new GLError("","Invalid data type");return"b"===r.charAt(0)?makeVector(n,!1):makeVector(n,0)}if(0===r.indexOf("mat")&&4===r.length){var n=r.charCodeAt(r.length-1)-48;if(2>n||n>4)throw new GLError("","Invalid uniform dimension type for matrix "+name+": "+r);return makeVector(n*n,0)}throw new GLError("","Unknown uniform data type for "+name+": "+r)}}function u(r,e,a){if("object"==typeof a){var i=l(a);Object.defineProperty(r,e,{get:identity(i),set:c(a),enumerable:!0,configurable:!1})}else t[a]?Object.defineProperty(r,e,{get:o(a),set:c(a),enumerable:!0,configurable:!1}):r[e]=f(n[a].type)}function l(r){var e;if(Array.isArray(r)){e=new Array(r.length);for(var n=0;n<r.length;++n)u(e,n,r[n])}else{e={};for(var t in r)u(e,t,r[t])}return e}var s=coallesceUniforms(n,!0);return{get:identity(l(s)),set:c(s),enumerable:!0,configurable:!0}}var coallesceUniforms=require("./reflect"),GLError=require("./GLError");module.exports=createUniformWrapper;

},{"./GLError":178,"./reflect":181}],181:[function(require,module,exports){
"use strict";function makeReflectTypes(e,t){for(var n={},l=0;l<e.length;++l)for(var r=e[l].name,a=r.split("."),s=n,g=0;g<a.length;++g){var h=a[g].split("[");if(h.length>1){h[0]in s||(s[h[0]]=[]),s=s[h[0]];for(var i=1;i<h.length;++i){var p=parseInt(h[i]);i<h.length-1||g<a.length-1?(p in s||(i<h.length-1?s[p]=[]:s[p]={}),s=s[p]):t?s[p]=l:s[p]=e[l].type}}else g<a.length-1?(h[0]in s||(s[h[0]]={}),s=s[h[0]]):t?s[h[0]]=l:s[h[0]]=e[l].type}return n}module.exports=makeReflectTypes;

},{}],182:[function(require,module,exports){
"use strict";function getType(e,t){if(!GL_TABLE){var r=Object.keys(GL_TO_GLSL_TYPES);GL_TABLE={};for(var T=0;T<r.length;++T){var L=r[T];GL_TABLE[e[L]]=GL_TO_GLSL_TYPES[L]}}return GL_TABLE[t]}function runtimeUniforms(e,t){for(var r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),T=[],L=0;r>L;++L){var a=e.getActiveUniform(t,L);if(a){var _=getType(e,a.type);if(a.size>1)for(var i=0;i<a.size;++i)T.push({name:a.name.replace("[0]","["+i+"]"),type:_});else T.push({name:a.name,type:_})}}return T}function runtimeAttributes(e,t){for(var r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),T=[],L=0;r>L;++L){var a=e.getActiveAttrib(t,L);a&&T.push({name:a.name,type:getType(e,a.type)})}return T}exports.uniforms=runtimeUniforms,exports.attributes=runtimeAttributes;var GL_TO_GLSL_TYPES={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},GL_TABLE=null;

},{}],183:[function(require,module,exports){
"use strict";function ShaderReference(r,e,t,a,o,h,i){this.id=r,this.src=e,this.type=t,this.shader=a,this.count=h,this.programs=[],this.cache=i}function ContextCache(r){this.gl=r,this.shaders=[{},{}],this.programs={}}function compileShader(r,e,t){var a=r.createShader(e);if(r.shaderSource(a,t),r.compileShader(a),!r.getShaderParameter(a,r.COMPILE_STATUS)){var o=r.getShaderInfoLog(a);try{var h=formatCompilerError(o,t,e)}catch(i){throw console.warn("Failed to format compiler error: "+i),new GLError(o,"Error compiling shader:\n"+o)}throw new GLError(o,h["short"],h["long"])}return a}function linkProgram(r,e,t,a,o){var h=r.createProgram();r.attachShader(h,e),r.attachShader(h,t);for(var i=0;i<a.length;++i)r.bindAttribLocation(h,o[i],a[i]);if(r.linkProgram(h),!r.getProgramParameter(h,r.LINK_STATUS)){var n=r.getProgramInfoLog(h);throw new GLError(n,"Error linking program: "+n)}return h}function getCache(r){var e=CACHE.get(r);return e||(e=new ContextCache(r),CACHE.set(r,e)),e}function getShaderReference(r,e,t){return getCache(r).getShaderReference(e,t)}function createProgram(r,e,t,a,o){return getCache(r).getProgram(e,t,a,o)}exports.shader=getShaderReference,exports.program=createProgram;var GLError=require("./GLError"),formatCompilerError=require("gl-format-compiler-error"),weakMap="undefined"==typeof WeakMap?require("weakmap-shim"):WeakMap,CACHE=new weakMap,SHADER_COUNTER=0;ShaderReference.prototype.dispose=function(){if(0===--this.count){for(var r=this.cache,e=r.gl,t=this.programs,a=0,o=t.length;o>a;++a){var h=r.programs[t[a]];h&&(delete r.programs[a],e.deleteProgram(h))}e.deleteShader(this.shader),delete r.shaders[this.type===e.FRAGMENT_SHADER|0][this.src]}};var proto=ContextCache.prototype;proto.getShaderReference=function(r,e){var t=this.gl,a=this.shaders[r===t.FRAGMENT_SHADER|0],o=a[e];if(o&&t.isShader(o.shader))o.count+=1;else{var h=compileShader(t,r,e);o=a[e]=new ShaderReference(SHADER_COUNTER++,e,r,h,[],1,this)}return o},proto.getProgram=function(r,e,t,a){var o=[r.id,e.id,t.join(":"),a.join(":")].join("@"),h=this.programs[o];return h&&this.gl.isProgram(h)||(this.programs[o]=h=linkProgram(this.gl,r.shader,e.shader,t,a),r.programs.push(o),e.programs.push(o)),h};

},{"./GLError":178,"gl-format-compiler-error":142,"weakmap-shim":247}],184:[function(require,module,exports){
"use strict";function doBind(e,r,t){r?r.bind():e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null);var i=0|e.getParameter(e.MAX_VERTEX_ATTRIBS);if(t){if(t.length>i)throw new Error("gl-vao: Too many vertex attributes");for(var f=0;f<t.length;++f){var l=t[f];if(l.buffer){var n=l.buffer,b=l.size||4,a=l.type||e.FLOAT,A=!!l.normalized,o=l.stride||0,s=l.offset||0;n.bind(),e.enableVertexAttribArray(f),e.vertexAttribPointer(f,b,a,A,o,s)}else{if("number"==typeof l)e.vertexAttrib1f(f,l);else if(1===l.length)e.vertexAttrib1f(f,l[0]);else if(2===l.length)e.vertexAttrib2f(f,l[0],l[1]);else if(3===l.length)e.vertexAttrib3f(f,l[0],l[1],l[2]);else{if(4!==l.length)throw new Error("gl-vao: Invalid vertex attribute");e.vertexAttrib4f(f,l[0],l[1],l[2],l[3])}e.disableVertexAttribArray(f)}}for(;i>f;++f)e.disableVertexAttribArray(f)}else{e.bindBuffer(e.ARRAY_BUFFER,null);for(var f=0;i>f;++f)e.disableVertexAttribArray(f)}}module.exports=doBind;

},{}],185:[function(require,module,exports){
"use strict";function VAOEmulated(t){this.gl=t,this._elements=null,this._attributes=null,this._elementsType=t.UNSIGNED_SHORT}function createVAOEmulated(t){return new VAOEmulated(t)}var bindAttribs=require("./do-bind.js");VAOEmulated.prototype.bind=function(){bindAttribs(this.gl,this._elements,this._attributes)},VAOEmulated.prototype.update=function(t,e,i){this._elements=e,this._attributes=t,this._elementsType=i||this.gl.UNSIGNED_SHORT},VAOEmulated.prototype.dispose=function(){},VAOEmulated.prototype.unbind=function(){},VAOEmulated.prototype.draw=function(t,e,i){i=i||0;var s=this.gl;this._elements?s.drawElements(t,e,this._elementsType,i):s.drawArrays(t,i,e)},module.exports=createVAOEmulated;

},{"./do-bind.js":184}],186:[function(require,module,exports){
"use strict";function VertexAttribute(t,e,i,s,r,n){this.location=t,this.dimension=e,this.a=i,this.b=s,this.c=r,this.d=n}function VAONative(t,e,i){this.gl=t,this._ext=e,this.handle=i,this._attribs=[],this._useElements=!1,this._elementsType=t.UNSIGNED_SHORT}function createVAONative(t,e){return new VAONative(t,e,e.createVertexArrayOES())}var bindAttribs=require("./do-bind.js");VertexAttribute.prototype.bind=function(t){switch(this.dimension){case 1:t.vertexAttrib1f(this.location,this.a);break;case 2:t.vertexAttrib2f(this.location,this.a,this.b);break;case 3:t.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:t.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d)}},VAONative.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var t=0;t<this._attribs.length;++t)this._attribs[t].bind(this.gl)},VAONative.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},VAONative.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},VAONative.prototype.update=function(t,e,i){if(this.bind(),bindAttribs(this.gl,e,t),this.unbind(),this._attribs.length=0,t)for(var s=0;s<t.length;++s){var r=t[s];"number"==typeof r?this._attribs.push(new VertexAttribute(s,1,r)):Array.isArray(r)&&this._attribs.push(new VertexAttribute(s,r.length,r[0],r[1],r[2],r[3]))}this._useElements=!!e,this._elementsType=i||this.gl.UNSIGNED_SHORT},VAONative.prototype.draw=function(t,e,i){i=i||0;var s=this.gl;this._useElements?s.drawElements(t,e,this._elementsType,i):s.drawArrays(t,i,e)},module.exports=createVAONative;

},{"./do-bind.js":184}],187:[function(require,module,exports){
"use strict";function createVAO(e,t,a,r){var i,u=e.getExtension("OES_vertex_array_object");return i=u?createVAONative(e,u):createVAOEmulated(e),i.update(t,a,r),i}var createVAONative=require("./lib/vao-native.js"),createVAOEmulated=require("./lib/vao-emulated.js");module.exports=createVAO;

},{"./lib/vao-emulated.js":185,"./lib/vao-native.js":186}],188:[function(require,module,exports){
function distance(t,e){var n=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(n*n+r*r)}module.exports=distance;

},{}],189:[function(require,module,exports){
function add(d,e,n){return d[0]=e[0]+n[0],d[1]=e[1]+n[1],d[2]=e[2]+n[2],d}module.exports=add;

},{}],190:[function(require,module,exports){
function copy(o,c){return o[0]=c[0],o[1]=c[1],o[2]=c[2],o}module.exports=copy;

},{}],191:[function(require,module,exports){
function cross(r,o,s){var c=o[0],e=o[1],n=o[2],t=s[0],u=s[1],a=s[2];return r[0]=e*a-n*u,r[1]=n*t-c*a,r[2]=c*u-e*t,r}module.exports=cross;

},{}],192:[function(require,module,exports){
function dot(o,t){return o[0]*t[0]+o[1]*t[1]+o[2]*t[2]}module.exports=dot;

},{}],193:[function(require,module,exports){
function length(t){var e=t[0],n=t[1],r=t[2];return Math.sqrt(e*e+n*n+r*r)}module.exports=length;

},{}],194:[function(require,module,exports){
function normalize(r,e){var n=e[0],o=e[1],t=e[2],a=n*n+o*o+t*t;return a>0&&(a=1/Math.sqrt(a),r[0]=e[0]*a,r[1]=e[1]*a,r[2]=e[2]*a),r}module.exports=normalize;

},{}],195:[function(require,module,exports){
function scale(e,c,l){return e[0]=c[0]*l,e[1]=c[1]*l,e[2]=c[2]*l,e}module.exports=scale;

},{}],196:[function(require,module,exports){
function scaleAndAdd(d,e,n,A){return d[0]=e[0]+n[0]*A,d[1]=e[1]+n[1]*A,d[2]=e[2]+n[2]*A,d}module.exports=scaleAndAdd;

},{}],197:[function(require,module,exports){
function set(e,t,n,o){return e[0]=t,e[1]=n,e[2]=o,e}module.exports=set;

},{}],198:[function(require,module,exports){
function squaredDistance(e,r){var a=r[0]-e[0],n=r[1]-e[1],s=r[2]-e[2];return a*a+n*n+s*s}module.exports=squaredDistance;

},{}],199:[function(require,module,exports){
function subtract(t,r,u){return t[0]=r[0]-u[0],t[1]=r[1]-u[1],t[2]=r[2]-u[2],t}module.exports=subtract;

},{}],200:[function(require,module,exports){
function transformQuat(r,t,a){var n=t[0],o=t[1],u=t[2],e=a[0],f=a[1],m=a[2],s=a[3],Q=s*n+f*u-m*o,c=s*o+m*n-e*u,d=s*u+e*o-f*n,i=-e*n-f*o-m*u;return r[0]=Q*s+i*-e+c*-m-d*-f,r[1]=c*s+i*-f+d*-e-Q*-m,r[2]=d*s+i*-m+Q*-f-c*-e,r}module.exports=transformQuat;

},{}],201:[function(require,module,exports){
function normalize(r,e){var n=e[0],o=e[1],t=e[2],a=e[3],i=n*n+o*o+t*t+a*a;return i>0&&(i=1/Math.sqrt(i),r[0]=n*i,r[1]=o*i,r[2]=t*i,r[3]=a*i),r}module.exports=normalize;

},{}],202:[function(require,module,exports){
function set(e,t,n,o,r){return e[0]=t,e[1]=n,e[2]=o,e[3]=r,e}module.exports=set;

},{}],203:[function(require,module,exports){
function transformMat4(r,t,a){var n=t[0],o=t[1],e=t[2],f=t[3];return r[0]=a[0]*n+a[4]*o+a[8]*e+a[12]*f,r[1]=a[1]*n+a[5]*o+a[9]*e+a[13]*f,r[2]=a[2]*n+a[6]*o+a[10]*e+a[14]*f,r[3]=a[3]*n+a[7]*o+a[11]*e+a[15]*f,r}module.exports=transformMat4;

},{}],204:[function(require,module,exports){
function getName(e){for(var r=Array.isArray(e)?e:tokenize(e),t=0;t<r.length;t++){var a=r[t];if("preprocessor"===a.type){var i=a.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(i&&i[2]){var o=i[1],n=i[2];return(o?atob(n):n).trim()}}}}var tokenize=require("glsl-tokenizer"),atob=require("atob-lite");module.exports=getName;

},{"atob-lite":64,"glsl-tokenizer":210}],205:[function(require,module,exports){
function toString(t){for(var o=[],n=0;n<t.length;n++)"eof"!==t[n].type&&o.push(t[n].data);return o.join("")}module.exports=toString;

},{}],206:[function(require,module,exports){
function tokenize(){function e(e){e.length&&A.push({type:map[L],data:e,position:g,line:b,column:C})}function t(e){T=0,k+=e,h=k.length;for(var t;N=k[T],h>T;){switch(t=T,L){case BLOCK_COMMENT:T=o();break;case LINE_COMMENT:T=s();break;case PREPROCESSOR:T=u();break;case OPERATOR:T=O();break;case INTEGER:T=f();break;case HEX:T=a();break;case FLOAT:T=c();break;case TOKEN:T=l();break;case WHITESPACE:T=i();break;case NORMAL:T=r()}if(t!==T)switch(k[t]){case"\n":C=0,++b;break;default:++C}}return p+=T,k=k.slice(T),A}function n(t){return M.length&&e(M.join("")),L=EOF,e("(eof)"),A}function r(){return M=M.length?[]:M,"/"===R&&"*"===N?(g=p+T-1,L=BLOCK_COMMENT,R=N,T+1):"/"===R&&"/"===N?(g=p+T-1,L=LINE_COMMENT,R=N,T+1):"#"===N?(L=PREPROCESSOR,g=p+T,T):/\s/.test(N)?(L=WHITESPACE,g=p+T,T):(I=/\d/.test(N),d=/[^\w_]/.test(N),g=p+T,L=I?INTEGER:d?OPERATOR:TOKEN,T)}function i(){return/[^\s]/g.test(N)?(e(M.join("")),L=NORMAL,T):(M.push(N),R=N,T+1)}function u(){return"\n"===N&&"\\"!==R?(e(M.join("")),L=NORMAL,T):(M.push(N),R=N,T+1)}function s(){return u()}function o(){return"/"===N&&"*"===R?(M.push(N),e(M.join("")),L=NORMAL,T+1):(M.push(N),R=N,T+1)}function O(){if("."===R&&/\d/.test(N))return L=FLOAT,T;if("/"===R&&"*"===N)return L=BLOCK_COMMENT,T;if("/"===R&&"/"===N)return L=LINE_COMMENT,T;if("."===N&&M.length){for(;E(M););return L=FLOAT,T}if(";"===N||")"===N||"("===N){if(M.length)for(;E(M););return e(N),L=NORMAL,T+1}var t=2===M.length&&"="!==N;if(/[\w_\d\s]/.test(N)||t){for(;E(M););return L=NORMAL,T}return M.push(N),R=N,T+1}function E(t){for(var n,r,i=0;;){if(n=operators.indexOf(t.slice(0,t.length+i).join("")),r=operators[n],-1===n){if(i--+t.length>0)continue;r=t.slice(0,1).join("")}return e(r),g+=r.length,M=M.slice(r.length),M.length}}function a(){return/[^a-fA-F0-9]/.test(N)?(e(M.join("")),L=NORMAL,T):(M.push(N),R=N,T+1)}function f(){return"."===N?(M.push(N),L=FLOAT,R=N,T+1):/[eE]/.test(N)?(M.push(N),L=FLOAT,R=N,T+1):"x"===N&&1===M.length&&"0"===M[0]?(L=HEX,M.push(N),R=N,T+1):/[^\d]/.test(N)?(e(M.join("")),L=NORMAL,T):(M.push(N),R=N,T+1)}function c(){return"f"===N&&(M.push(N),R=N,T+=1),/[eE]/.test(N)?(M.push(N),R=N,T+1):/[^\d]/.test(N)?(e(M.join("")),L=NORMAL,T):(M.push(N),R=N,T+1)}function l(){if(/[^\d\w_]/.test(N)){var t=M.join("");return L=literals.indexOf(t)>-1?KEYWORD:builtins.indexOf(t)>-1?BUILTIN:IDENT,e(M.join("")),L=NORMAL,T}return M.push(N),R=N,T+1}var N,R,h,T=0,p=0,L=NORMAL,M=[],A=[],b=1,C=0,g=0,I=!1,d=!1,k="";return function(e){return A=[],null!==e?t(e):n()}}module.exports=tokenize;var literals=require("./lib/literals"),operators=require("./lib/operators"),builtins=require("./lib/builtins"),NORMAL=999,TOKEN=9999,BLOCK_COMMENT=0,LINE_COMMENT=1,PREPROCESSOR=2,OPERATOR=3,INTEGER=4,FLOAT=5,IDENT=6,BUILTIN=7,KEYWORD=8,WHITESPACE=9,EOF=10,HEX=11,map=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"];

},{"./lib/builtins":207,"./lib/literals":208,"./lib/operators":209}],207:[function(require,module,exports){
module.exports=["gl_Position","gl_PointSize","gl_ClipVertex","gl_FragCoord","gl_FrontFacing","gl_FragColor","gl_FragData","gl_FragDepth","gl_Color","gl_SecondaryColor","gl_Normal","gl_Vertex","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_FogCoord","gl_MaxLights","gl_MaxClipPlanes","gl_MaxTextureUnits","gl_MaxTextureCoords","gl_MaxVertexAttribs","gl_MaxVertexUniformComponents","gl_MaxVaryingFloats","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformComponents","gl_MaxDrawBuffers","gl_ModelViewMatrix","gl_ProjectionMatrix","gl_ModelViewProjectionMatrix","gl_TextureMatrix","gl_NormalMatrix","gl_ModelViewMatrixInverse","gl_ProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverse","gl_TextureMatrixInverse","gl_ModelViewMatrixTranspose","gl_ProjectionMatrixTranspose","gl_ModelViewProjectionMatrixTranspose","gl_TextureMatrixTranspose","gl_ModelViewMatrixInverseTranspose","gl_ProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixInverseTranspose","gl_TextureMatrixInverseTranspose","gl_NormalScale","gl_DepthRangeParameters","gl_DepthRange","gl_ClipPlane","gl_PointParameters","gl_Point","gl_MaterialParameters","gl_FrontMaterial","gl_BackMaterial","gl_LightSourceParameters","gl_LightSource","gl_LightModelParameters","gl_LightModel","gl_LightModelProducts","gl_FrontLightModelProduct","gl_BackLightModelProduct","gl_LightProducts","gl_FrontLightProduct","gl_BackLightProduct","gl_FogParameters","gl_Fog","gl_TextureEnvColor","gl_EyePlaneS","gl_EyePlaneT","gl_EyePlaneR","gl_EyePlaneQ","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_ObjectPlaneR","gl_ObjectPlaneQ","gl_FrontColor","gl_BackColor","gl_FrontSecondaryColor","gl_BackSecondaryColor","gl_TexCoord","gl_FogFragCoord","gl_Color","gl_SecondaryColor","gl_TexCoord","gl_FogFragCoord","gl_PointCoord","radians","degrees","sin","cos","tan","asin","acos","atan","pow","exp","log","exp2","log2","sqrt","inversesqrt","abs","sign","floor","ceil","fract","mod","min","max","clamp","mix","step","smoothstep","length","distance","dot","cross","normalize","faceforward","reflect","refract","matrixCompMult","lessThan","lessThanEqual","greaterThan","greaterThanEqual","equal","notEqual","any","all","not","texture2D","texture2DProj","texture2DLod","texture2DProjLod","textureCube","textureCubeLod","dFdx","dFdy"];

},{}],208:[function(require,module,exports){
module.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"];

},{}],209:[function(require,module,exports){
module.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"];

},{}],210:[function(require,module,exports){
function tokenizeString(e){var n=tokenize(),t=[];return t=t.concat(n(e)),t=t.concat(n(null))}var tokenize=require("./index");module.exports=tokenizeString;

},{"./index":206}],211:[function(require,module,exports){
exports.read=function(a,o,t,r,h){var M,p,w=8*h-r-1,f=(1<<w)-1,e=f>>1,i=-7,N=t?h-1:0,n=t?-1:1,s=a[o+N];for(N+=n,M=s&(1<<-i)-1,s>>=-i,i+=w;i>0;M=256*M+a[o+N],N+=n,i-=8);for(p=M&(1<<-i)-1,M>>=-i,i+=r;i>0;p=256*p+a[o+N],N+=n,i-=8);if(0===M)M=1-e;else{if(M===f)return p?NaN:(s?-1:1)*(1/0);p+=Math.pow(2,r),M-=e}return(s?-1:1)*p*Math.pow(2,M-r)},exports.write=function(a,o,t,r,h,M){var p,w,f,e=8*M-h-1,i=(1<<e)-1,N=i>>1,n=23===h?Math.pow(2,-24)-Math.pow(2,-77):0,s=r?0:M-1,u=r?1:-1,l=0>o||0===o&&0>1/o?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(w=isNaN(o)?1:0,p=i):(p=Math.floor(Math.log(o)/Math.LN2),o*(f=Math.pow(2,-p))<1&&(p--,f*=2),o+=p+N>=1?n/f:n*Math.pow(2,1-N),o*f>=2&&(p++,f/=2),p+N>=i?(w=0,p=i):p+N>=1?(w=(o*f-1)*Math.pow(2,h),p+=N):(w=o*Math.pow(2,N-1)*Math.pow(2,h),p=0));h>=8;a[t+s]=255&w,s+=u,w/=256,h-=8);for(p=p<<h|w,e+=h;e>0;a[t+s]=255&p,s+=u,p/=256,e-=8);a[t+s-u]|=128*l};

},{}],212:[function(require,module,exports){
"use strict";function iota(r){for(var t=new Array(r),o=0;r>o;++o)t[o]=o;return t}module.exports=iota;

},{}],213:[function(require,module,exports){
module.exports=function(r){return!(null==r||!(r._isBuffer||r.constructor&&"function"==typeof r.constructor.isBuffer&&r.constructor.isBuffer(r)))};

},{}],214:[function(require,module,exports){
function isTypedArray(r){return isStrictTypedArray(r)||isLooseTypedArray(r)}function isStrictTypedArray(r){return r instanceof Int8Array||r instanceof Int16Array||r instanceof Int32Array||r instanceof Uint8Array||r instanceof Uint16Array||r instanceof Uint32Array||r instanceof Float32Array||r instanceof Float64Array}function isLooseTypedArray(r){return names[toString.call(r)]}module.exports=isTypedArray,isTypedArray.strict=isStrictTypedArray,isTypedArray.loose=isLooseTypedArray;var toString=Object.prototype.toString,names={"[object Int8Array]":!0,"[object Int16Array]":!0,"[object Int32Array]":!0,"[object Uint8Array]":!0,"[object Uint16Array]":!0,"[object Uint32Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0};

},{}],215:[function(require,module,exports){
module.exports=function(t){if(!t)return!1;if(!t.dtype)return!1;var e=new RegExp("function View[0-9]+d(:?"+t.dtype+")+");return e.test(String(t.constructor))};

},{}],216:[function(require,module,exports){
function mouseEventOffset(t,e,n){e=e||t.currentTarget||t.srcElement,Array.isArray(n)||(n=[0,0]);var o=t.clientX||0,r=t.clientY||0,i=getBoundingClientOffset(e);return n[0]=o-i.left,n[1]=r-i.top,n}function getBoundingClientOffset(t){return t===window||t===document||t===document.body?rootPosition:t.getBoundingClientRect()}var rootPosition={left:0,top:0};module.exports=mouseEventOffset;

},{}],217:[function(require,module,exports){
"use strict";function mouseWheelListen(e,t,n){"function"==typeof e&&(n=!!t,t=e,e=window);var o=toPX("ex",e);e.addEventListener("wheel",function(e){n&&e.preventDefault();var i=e.deltaX||0,r=e.deltaY||0,a=e.deltaZ||0,d=e.deltaMode,s=1;switch(d){case 1:s=o;break;case 2:s=window.innerHeight}return i*=s,r*=s,a*=s,i||r||a?t(i,r,a):void 0})}var toPX=require("to-px");module.exports=mouseWheelListen;

},{"to-px":241}],218:[function(require,module,exports){
"use strict";function fixup(a){if(!a)return EmptyProc;for(var r=0;r<a.args.length;++r){var s=a.args[r];0===r?a.args[r]={name:s,lvalue:!0,rvalue:!!a.rvalue,count:a.count||1}:a.args[r]={name:s,lvalue:!1,rvalue:!0,count:1}}return a.thisVars||(a.thisVars=[]),a.localVars||(a.localVars=[]),a}function pcompile(a){return compile({args:a.args,pre:fixup(a.pre),body:fixup(a.body),post:fixup(a.proc),funcName:a.funcName})}function makeOp(a){for(var r=[],s=0;s<a.args.length;++s)r.push("a"+s);var i=new Function("P",["return function ",a.funcName,"_ndarrayops(",r.join(","),") {P(",r.join(","),");return a0}"].join(""));return i(pcompile(a))}var compile=require("cwise-compiler"),EmptyProc={body:"",args:[],thisVars:[],localVars:[]},assign_ops={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};!function(){for(var a in assign_ops){var r=assign_ops[a];exports[a]=makeOp({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+r+"c"},funcName:a}),exports[a+"eq"]=makeOp({args:["array","array"],body:{args:["a","b"],body:"a"+r+"=b"},rvalue:!0,funcName:a+"eq"}),exports[a+"s"]=makeOp({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+r+"s"},funcName:a+"s"}),exports[a+"seq"]=makeOp({args:["array","scalar"],body:{args:["a","s"],body:"a"+r+"=s"},rvalue:!0,funcName:a+"seq"})}}();var unary_ops={not:"!",bnot:"~",neg:"-",recip:"1.0/"};!function(){for(var a in unary_ops){var r=unary_ops[a];exports[a]=makeOp({args:["array","array"],body:{args:["a","b"],body:"a="+r+"b"},funcName:a}),exports[a+"eq"]=makeOp({args:["array"],body:{args:["a"],body:"a="+r+"a"},rvalue:!0,count:2,funcName:a+"eq"})}}();var binary_ops={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};!function(){for(var a in binary_ops){var r=binary_ops[a];exports[a]=makeOp({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+r+"c"},funcName:a}),exports[a+"s"]=makeOp({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+r+"s"},funcName:a+"s"}),exports[a+"eq"]=makeOp({args:["array","array"],body:{args:["a","b"],body:"a=a"+r+"b"},rvalue:!0,count:2,funcName:a+"eq"}),exports[a+"seq"]=makeOp({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+r+"s"},rvalue:!0,count:2,funcName:a+"seq"})}}();var math_unary=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];!function(){for(var a=0;a<math_unary.length;++a){var r=math_unary[a];exports[r]=makeOp({args:["array","array"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:r}),exports[r+"eq"]=makeOp({args:["array"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:r+"eq"})}}();var math_comm=["max","min","atan2","pow"];!function(){for(var a=0;a<math_comm.length;++a){var r=math_comm[a];exports[r]=makeOp({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:r}),exports[r+"s"]=makeOp({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:r+"s"}),exports[r+"eq"]=makeOp({args:["array","array"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:r+"eq"}),exports[r+"seq"]=makeOp({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:r+"seq"})}}();var math_noncomm=["atan2","pow"];!function(){for(var a=0;a<math_noncomm.length;++a){var r=math_noncomm[a];exports[r+"op"]=makeOp({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:r+"op"}),exports[r+"ops"]=makeOp({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:r+"ops"}),exports[r+"opeq"]=makeOp({args:["array","array"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:r+"opeq"}),exports[r+"opseq"]=makeOp({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:r+"opseq"})}}(),exports.any=compile({args:["array"],pre:EmptyProc,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),exports.all=compile({args:["array"],pre:EmptyProc,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),exports.sum=compile({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),exports.prod=compile({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),exports.norm2squared=compile({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),exports.norm2=compile({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),exports.norminf=compile({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),exports.norm1=compile({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),exports.sup=compile({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),exports.inf=compile({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),exports.argmin=compile({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),exports.argmax=compile({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),exports.random=makeOp({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),exports.assign=makeOp({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),exports.assigns=makeOp({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),exports.equals=compile({args:["array","array"],pre:EmptyProc,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"});

},{"cwise-compiler":75}],219:[function(require,module,exports){
function compare1st(t,r){return t[0]-r[0]}function order(){var t,r=this.stride,e=new Array(r.length);for(t=0;t<e.length;++t)e[t]=[Math.abs(r[t]),t];e.sort(compare1st);var n=new Array(e.length);for(t=0;t<n.length;++t)n[t]=e[t][1];return n}function compileConstructor(t,r){var e=["View",r,"d",t].join("");0>r&&(e="View_Nil"+t);var n="generic"===t;if(-1===r){var o="function "+e+"(a){this.data=a;};var proto="+e+".prototype;proto.dtype='"+t+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+e+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+e+"(a){return new "+e+"(a);}",i=new Function(o);return i()}if(0===r){var o="function "+e+"(a,d) {this.data = a;this.offset = d};var proto="+e+".prototype;proto.dtype='"+t+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+e+"_copy() {return new "+e+"(this.data,this.offset)};proto.pick=function "+e+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+e+"_get(){return "+(n?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+e+"_set(v){return "+(n?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+e+"(a,b,c,d){return new "+e+"(a,d)}",i=new Function("TrivialArray",o);return i(CACHED_CONSTRUCTORS[t][0])}var o=["'use strict'"],a=iota(r),s=a.map(function(t){return"i"+t}),u="this.offset+"+a.map(function(t){return"this.stride["+t+"]*i"+t}).join("+"),p=a.map(function(t){return"b"+t}).join(","),f=a.map(function(t){return"c"+t}).join(",");o.push("function "+e+"(a,"+p+","+f+",d){this.data=a","this.shape=["+p+"]","this.stride=["+f+"]","this.offset=d|0}","var proto="+e+".prototype","proto.dtype='"+t+"'","proto.dimension="+r),o.push("Object.defineProperty(proto,'size',{get:function "+e+"_size(){return "+a.map(function(t){return"this.shape["+t+"]"}).join("*"),"}})"),1===r?o.push("proto.order=[0]"):(o.push("Object.defineProperty(proto,'order',{get:"),4>r?(o.push("function "+e+"_order(){"),2===r?o.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===r&&o.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):o.push("ORDER})")),o.push("proto.set=function "+e+"_set("+s.join(",")+",v){"),n?o.push("return this.data.set("+u+",v)}"):o.push("return this.data["+u+"]=v}"),o.push("proto.get=function "+e+"_get("+s.join(",")+"){"),n?o.push("return this.data.get("+u+")}"):o.push("return this.data["+u+"]}"),o.push("proto.index=function "+e+"_index(",s.join(),"){return "+u+"}"),o.push("proto.hi=function "+e+"_hi("+s.join(",")+"){return new "+e+"(this.data,"+a.map(function(t){return["(typeof i",t,"!=='number'||i",t,"<0)?this.shape[",t,"]:i",t,"|0"].join("")}).join(",")+","+a.map(function(t){return"this.stride["+t+"]"}).join(",")+",this.offset)}");var h=a.map(function(t){return"a"+t+"=this.shape["+t+"]"}),c=a.map(function(t){return"c"+t+"=this.stride["+t+"]"});o.push("proto.lo=function "+e+"_lo("+s.join(",")+"){var b=this.offset,d=0,"+h.join(",")+","+c.join(","));for(var d=0;r>d;++d)o.push("if(typeof i"+d+"==='number'&&i"+d+">=0){d=i"+d+"|0;b+=c"+d+"*d;a"+d+"-=d}");o.push("return new "+e+"(this.data,"+a.map(function(t){return"a"+t}).join(",")+","+a.map(function(t){return"c"+t}).join(",")+",b)}"),o.push("proto.step=function "+e+"_step("+s.join(",")+"){var "+a.map(function(t){return"a"+t+"=this.shape["+t+"]"}).join(",")+","+a.map(function(t){return"b"+t+"=this.stride["+t+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var d=0;r>d;++d)o.push("if(typeof i"+d+"==='number'){d=i"+d+"|0;if(d<0){c+=b"+d+"*(a"+d+"-1);a"+d+"=ceil(-a"+d+"/d)}else{a"+d+"=ceil(a"+d+"/d)}b"+d+"*=d}");o.push("return new "+e+"(this.data,"+a.map(function(t){return"a"+t}).join(",")+","+a.map(function(t){return"b"+t}).join(",")+",c)}");for(var y=new Array(r),l=new Array(r),d=0;r>d;++d)y[d]="a[i"+d+"]",l[d]="b[i"+d+"]";o.push("proto.transpose=function "+e+"_transpose("+s+"){"+s.map(function(t,r){return t+"=("+t+"===undefined?"+r+":"+t+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+e+"(this.data,"+y.join(",")+","+l.join(",")+",this.offset)}"),o.push("proto.pick=function "+e+"_pick("+s+"){var a=[],b=[],c=this.offset");for(var d=0;r>d;++d)o.push("if(typeof i"+d+"==='number'&&i"+d+">=0){c=(c+this.stride["+d+"]*i"+d+")|0}else{a.push(this.shape["+d+"]);b.push(this.stride["+d+"])}");o.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),o.push("return function construct_"+e+"(data,shape,stride,offset){return new "+e+"(data,"+a.map(function(t){return"shape["+t+"]"}).join(",")+","+a.map(function(t){return"stride["+t+"]"}).join(",")+",offset)}");var i=new Function("CTOR_LIST","ORDER",o.join("\n"));return i(CACHED_CONSTRUCTORS[t],order)}function arrayDType(t){if(isBuffer(t))return"buffer";if(hasTypedArrays)switch(Object.prototype.toString.call(t)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped"}return Array.isArray(t)?"array":"generic"}function wrappedNDArrayCtor(t,r,e,n){if(void 0===t){var o=CACHED_CONSTRUCTORS.array[0];return o([])}"number"==typeof t&&(t=[t]),void 0===r&&(r=[t.length]);var i=r.length;if(void 0===e){e=new Array(i);for(var a=i-1,s=1;a>=0;--a)e[a]=s,s*=r[a]}if(void 0===n){n=0;for(var a=0;i>a;++a)e[a]<0&&(n-=(r[a]-1)*e[a])}for(var u=arrayDType(t),p=CACHED_CONSTRUCTORS[u];p.length<=i+1;)p.push(compileConstructor(u,p.length-1));var o=p[i+1];return o(t,r,e,n)}var iota=require("iota-array"),isBuffer=require("is-buffer"),hasTypedArrays="undefined"!=typeof Float64Array,CACHED_CONSTRUCTORS={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};module.exports=wrappedNDArrayCtor;

},{"iota-array":212,"is-buffer":213}],220:[function(require,module,exports){
"use strict";function toObject(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var hasOwnProperty=Object.prototype.hasOwnProperty,propIsEnumerable=Object.prototype.propertyIsEnumerable;module.exports=Object.assign||function(e,r){for(var t,n,o=toObject(e),a=1;a<arguments.length;a++){t=Object(arguments[a]);for(var l in t)hasOwnProperty.call(t,l)&&(o[l]=t[l]);if(Object.getOwnPropertySymbols){n=Object.getOwnPropertySymbols(t);for(var c=0;c<n.length;c++)propIsEnumerable.call(t,n[c])&&(o[n[c]]=t[n[c]])}}return o};

},{}],221:[function(require,module,exports){
function createOrbitControls(t){function e(t,e){var n=2*Math.PI;c[0]-=n*t*u.rotateSpeed,c[1]-=n*e*u.rotateSpeed}function n(t){c[2]+=t*u.zoomSpeed}function i(t){c[2]-=t*u.pinchSpeed}function a(){var t=u.up||Y_UP;quatFromVec3(s,t,Y_UP),quatInvert(d,s);var e=u.distance;glVec3.subtract(p,u.position,u.target),glVec3.transformQuat(p,p,s);var n=Math.atan2(p[0],p[2]),i=Math.atan2(Math.sqrt(p[0]*p[0]+p[2]*p[2]),p[1]);n+=c[0],i+=c[1],n=clamp(n,u.thetaBounds[0],u.thetaBounds[1]),i=clamp(i,u.phiBounds[0],u.phiBounds[1]),i=clamp(i,EPSILON,Math.PI-EPSILON),e+=c[2],e=clamp(e,u.distanceBounds[0],u.distanceBounds[1]);var a=Math.abs(e)<=EPSILON?EPSILON:e;p[0]=a*Math.sin(i)*Math.sin(n),p[1]=a*Math.cos(i),p[2]=a*Math.sin(i)*Math.cos(n),u.phi=i,u.theta=n,u.distance=e,glVec3.transformQuat(p,p,d),glVec3.add(u.position,u.target,p),camLookAt(u.direction,t,u.position,u.target);for(var o="number"==typeof u.damping?u.damping:1,r=0;r<c.length;r++)c[r]*=1-o}function o(t,e,n){t&&glVec3.copy(t,u.position),e&&glVec3.copy(e,u.direction),n&&glVec3.copy(n,u.up)}function r(){var t=Math.max(EPSILON,u.distance);u.position[0]=t*Math.sin(u.phi)*Math.sin(u.theta),u.position[1]=t*Math.cos(u.phi),u.position[2]=t*Math.sin(u.phi)*Math.cos(u.theta),glVec3.add(u.position,u.position,u.target)}t=t||{};var c=[0,0,0],p=[0,0,0],s=[0,0,0,1],d=s.slice(),u={update:a,copyInto:o,position:t.position?t.position.slice():[0,0,1],direction:[0,0,-1],up:t.up?t.up.slice():[0,1,0],target:t.target?t.target.slice():[0,0,0],phi:t.phi||Math.PI/2,theta:t.theta||0,distance:defined(t.distance,1),damping:defined(t.damping,.25),rotateSpeed:defined(t.rotateSpeed,.28),zoomSpeed:defined(t.zoomSpeed,.0075),pinchSpeed:defined(t.pinchSpeed,.0075),pinch:t.pinching!==!1,zoom:t.zoom!==!1,rotate:t.rotate!==!1,phiBounds:t.phiBounds||[0,Math.PI],thetaBounds:t.thetaBounds||[-(1/0),1/0],distanceBounds:t.distanceBounds||[0,1/0]};return"number"!=typeof t.distance&&(glVec3.subtract(tmpVec3,u.position,u.target),u.distance=glVec3.length(tmpVec3)),r(),inputEvents({parent:t.parent||window,element:t.element,rotate:t.rotate!==!1?e:null,zoom:t.zoom!==!1?n:null,pinch:t.pinch!==!1?i:null}),u}function camLookAt(t,e,n,i){glVec3.copy(t,i),glVec3.subtract(t,t,n),glVec3.normalize(t,t)}var defined=require("defined"),clamp=require("clamp"),inputEvents=require("./lib/input"),quatFromVec3=require("quat-from-unit-vec3"),quatInvert=require("gl-quat/invert"),glVec3={length:require("gl-vec3/length"),add:require("gl-vec3/add"),subtract:require("gl-vec3/subtract"),transformQuat:require("gl-vec3/transformQuat"),copy:require("gl-vec3/copy"),normalize:require("gl-vec3/normalize"),cross:require("gl-vec3/cross")},Y_UP=[0,1,0],EPSILON=1e-10,tmpVec3=[0,0,0];module.exports=createOrbitControls;

},{"./lib/input":222,"clamp":74,"defined":80,"gl-quat/invert":172,"gl-vec3/add":189,"gl-vec3/copy":190,"gl-vec3/cross":191,"gl-vec3/length":193,"gl-vec3/normalize":194,"gl-vec3/subtract":199,"gl-vec3/transformQuat":200,"quat-from-unit-vec3":233}],222:[function(require,module,exports){
function inputEvents(e){function n(e){e.preventDefault()}function t(){v.addEventListener("touchmove",function(e){if(m&&!o())for(var n=0;n<e.changedTouches.length;n++){var t=e.changedTouches[n],i=a.indexOfTouch(t),u=E?-1!==i:0===i;if(u){r(t);break}}}),a.on("place",function(e,n){if(m=!o()){var t=n||e;u(t)}}),a.on("lift",function(e,n){m=!o(),m&&n&&eventOffset(n,v,s)})}function o(){return a.pinching&&E}function i(){a.on("change",function(e,n){E(e-n)})}function u(e){eventOffset(e,v,s),f(s)&&(m=!0)}function c(){m=!1}function r(e){var n=eventOffset(e,v,l);if(a&&o())return void(s=n);if(m){var t=d(p),i=(n[0]-s[0])/t[0],u=(n[1]-s[1])/t[1];w(i,u),s[0]=n[0],s[1]=n[1]}}function f(e){if(v===window||v===document||v===document.body)return!0;var n=v.getBoundingClientRect();return e[0]>=0&&e[1]>=0&&e[0]<n.width&&e[1]<n.height}function d(e){var n=v;return(n===window||n===document||n===document.body)&&(n=document.documentElement),e[0]=n.clientWidth,e[1]=n.clientHeight,e}var a,v=e.element||window,h=e.parent||v,s=[0,0],m=!1,l=[0,0],p=[0,0],g=e.zoom,w=e.rotate,E=e.pinch;g&&mouseWheel(v,function(e,n){g(n)},!0),w&&(h.addEventListener("mousedown",u),h.addEventListener("mousemove",r),h.addEventListener("mouseup",c)),(w||E)&&(a=createPinch(v),v.addEventListener("touchstart",n),w&&t(),E&&i())}var mouseWheel=require("mouse-wheel"),eventOffset=require("mouse-event-offset"),createPinch=require("touch-pinch");module.exports=inputEvents;

},{"mouse-event-offset":216,"mouse-wheel":217,"touch-pinch":242}],223:[function(require,module,exports){
"use strict";var repeat=require("repeat-string");module.exports=function(e,r,t){return t="undefined"!=typeof t?t+"":" ",repeat(t,r)+e};

},{"repeat-string":239}],224:[function(require,module,exports){
module.exports=function(r,t){t||(t=[0,""]),r=String(r);var a=parseFloat(r,10);return t[0]=a,t[1]=r.match(/[\d.\-\+]*\s*(.*)/)[1]||"",t};

},{}],225:[function(require,module,exports){
module.exports=require("./lib/camera-perspective");

},{"./lib/camera-perspective":228}],226:[function(require,module,exports){
var assign=require("object-assign"),Ray=require("ray-3d"),cameraProject=require("camera-project"),cameraUnproject=require("camera-unproject"),cameraLookAt=require("./camera-look-at"),cameraPickRay=require("camera-picking-ray"),add=require("gl-vec3/add"),multiply4x4=require("gl-mat4/multiply"),invert4x4=require("gl-mat4/invert"),identity4x4=require("gl-mat4/identity"),setVec3=require("gl-vec3/set");module.exports=function(e){function i(){multiply4x4(u.projView,u.projection,u.view);var e=invert4x4(u.invProjView,u.projView);if(!e)throw new Error("camera projection * view is non-invertible")}function r(e){return cameraLookAt(u.direction,u.up,u.position,e),u}function t(){return setVec3(u.position,0,0,0),setVec3(u.direction,0,0,-1),setVec3(u.up,0,1,0),identity4x4(u.view),identity4x4(u.projection),identity4x4(u.projView),identity4x4(u.invProjView),u}function n(e){return add(u.position,u.position,e),u}function o(e){var i=new Ray;return cameraPickRay(i.origin,i.direction,e,u.viewport,u.invProjView),i}function a(e){return cameraProject([],e,u.viewport,u.projView)}function c(e){return cameraUnproject([],e,u.viewport,u.invProjView)}e=e||{};var u={projection:identity4x4([]),view:identity4x4([]),position:e.position||[0,0,0],direction:e.direction||[0,0,-1],up:e.up||[0,1,0],viewport:e.viewport||[-1,-1,1,1],projView:identity4x4([]),invProjView:identity4x4([])};return assign(u,{translate:n,identity:t,lookAt:r,createPickingRay:o,update:i,project:a,unproject:c})};

},{"./camera-look-at":227,"camera-picking-ray":69,"camera-project":70,"camera-unproject":71,"gl-mat4/identity":155,"gl-mat4/invert":157,"gl-mat4/multiply":159,"gl-vec3/add":189,"gl-vec3/set":197,"object-assign":229,"ray-3d":234}],227:[function(require,module,exports){
var cross=require("gl-vec3/cross"),sub=require("gl-vec3/subtract"),normalize=require("gl-vec3/normalize"),copy=require("gl-vec3/copy"),dot=require("gl-vec3/dot"),scale=require("gl-vec3/scale"),tmp=[0,0,0],epsilon=1e-9;module.exports=function(e,r,o,t){sub(tmp,t,o),normalize(tmp,tmp);var p=0===tmp[0]&&0===tmp[1]&&0===tmp[2];if(!p){var s=dot(tmp,r);Math.abs(s-1)<epsilon?scale(r,e,-1):Math.abs(s+1)<epsilon&&copy(r,e),copy(e,tmp),cross(tmp,e,r),normalize(tmp,tmp),cross(r,tmp,e),normalize(r,r)}};

},{"gl-vec3/copy":190,"gl-vec3/cross":191,"gl-vec3/dot":192,"gl-vec3/normalize":194,"gl-vec3/scale":195,"gl-vec3/subtract":199}],228:[function(require,module,exports){
var create=require("./camera-base"),assign=require("object-assign"),defined=require("defined"),perspective=require("gl-mat4/perspective"),lookAt4x4=require("gl-mat4/lookAt"),add=require("gl-vec3/add");module.exports=function(e){function r(){var e=a.viewport[2]/a.viewport[3];return perspective(a.projection,a.fov,e,Math.abs(a.near),Math.abs(a.far)),add(i,a.position,a.direction),lookAt4x4(a.view,a.position,i,a.up),t(),a}e=e||{};var a=create(e);a.fov=defined(e.fov,Math.PI/4),a.near=defined(e.near,1),a.far=defined(e.far,100);var i=[0,0,0],t=a.update;return r(),assign(a,{update:r})};

},{"./camera-base":226,"defined":80,"gl-mat4/lookAt":158,"gl-mat4/perspective":161,"gl-vec3/add":189,"object-assign":229}],229:[function(require,module,exports){
"use strict";function ToObject(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}module.exports=Object.assign||function(e,t){for(var n,r,c=ToObject(e),o=1;o<arguments.length;o++){n=arguments[o],r=Object.keys(Object(n));for(var u=0;u<r.length;u++)c[r[u]]=n[r[u]]}return c};

},{}],230:[function(require,module,exports){
function _delta(t,e){var n,a;return n=Date.now(),a=n-this.now,a=Math.min(a,MAX_DT),a=Math.max(a,MIN_DT),this.elapsed+=a,this.now=n,a}function _start(){this.now=Date.now()}function _reset(){this.now=0,this.elapsed=0}function _getValue(t){return this[t]}var MAX_DT=60,MIN_DT=1e3/60;module.exports=function(){var t={now:0,elapsed:0};return{start:_start.bind(t),reset:_reset.bind(t),now:_getValue.bind(t,"now"),elapsed:_getValue.bind(t,"elapsed"),delta:_delta.bind(t)}};

},{}],231:[function(require,module,exports){
function _startFn(t,e,r){return function(){r.started||(r.clockStarted||e.start(),t(),r.started=!0)}}function _stopFn(t){return function(){Raf.cancel(t.rafHandle),t.started=!1}}function _loopFn(t,e,r,n){var a={dt:0,unitDt:0,now:0,elapsed:0};return function o(){n.rafHandle=Raf.invoke(o),a.dt=e.delta(),a.unitDt=a.dt/16.66666667,a.now=e.now(),a.elapsed=e.elapsed(),r(a),t.emit("update",a),t.emit("updatedone",a),t.emit("draw",a),t.emit("drawdone",a)}}var Raf=require("./raf")(),EventEmitter=require("events").EventEmitter,CreateClock=require("./clock"),passThrough=function(t){return t};module.exports=function(t){var e,r;"object"==typeof t&&(e=t.emitter,r=t.customizeEvent),e=e?e:new EventEmitter,r=r?r:passThrough;var n=CreateClock(),a={clockStarted:!1,started:!1,rafHandle:null},o=_loopFn(e,n,r,a);return{start:_startFn(o,n,a),stop:_stopFn(a),reset:n.reset,emitter:e}};

},{"./clock":230,"./raf":232,"events":137}],232:[function(require,module,exports){
function _getNativeRAF(){for(var n=window.requestAnimationFrame,e=window.cancelAnimationFrame,i=["ms","moz","webkit","o"],o=0;!n&&o<i.length;++o)n=window[i[o]+"RequestAnimationFrame"],e=window[i[o]+"CancelAnimationFrame"]||window[i[o]+"CancelRequestAnimationFrame"];return{invoke:n.bind(window),cancel:e.bind(window)}}function _invokeFn(){var n=0;return function(e,i){var o=(new Date).getTime(),t=Math.max(0,16-(o-n)),a=window.setTimeout(function(){e(o+t)},t);return n=o+t,a}}function _cancel(n){clearTimeout(n)}module.exports=function(){var n=_getNativeRAF();return n.invoke=n.invoke?n.invoke:_invokeFn(),n.cancel=n.cancel?n.cancel:_cancel(),{invoke:function(e){return n.invoke(e)},cancel:function(e){n.cancel(e)}}};

},{}],233:[function(require,module,exports){
function quatFromUnitVec3(e,t,r){var o=dot(t,r)+1;return EPS>o?(o=0,Math.abs(t[0])>Math.abs(t[2])?set(tmp,-t[1],t[0],0):set(tmp,0,-t[2],t[1])):cross(tmp,t,r),e[0]=tmp[0],e[1]=tmp[1],e[2]=tmp[2],e[3]=o,normalize(e,e),e}var dot=require("gl-vec3/dot"),set=require("gl-vec3/set"),normalize=require("gl-quat/normalize"),cross=require("gl-vec3/cross"),tmp=[0,0,0],EPS=1e-6;module.exports=quatFromUnitVec3;

},{"gl-quat/normalize":173,"gl-vec3/cross":191,"gl-vec3/dot":192,"gl-vec3/set":197}],234:[function(require,module,exports){
function Ray(t,e){this.origin=t||[0,0,0],this.direction=e||[0,0,-1]}var intersectRayTriangle=require("ray-triangle-intersection"),intersectRayPlane=require("ray-plane-intersection"),intersectRaySphere=require("ray-sphere-intersection"),intersectRayBox=require("ray-aabb-intersection"),copy3=require("gl-vec3/copy"),tmpTriangle=[[0,0,0],[0,0,0],[0,0,0]],tmp3=[0,0,0];module.exports=Ray,Ray.prototype.set=function(t,e){this.origin=t,this.direction=e},Ray.prototype.copy=function(t){copy3(this.origin,t.origin),copy3(this.direction,t.direction)},Ray.prototype.clone=function(){var t=new Ray;return t.copy(this),t},Ray.prototype.intersectsSphere=function(t,e){return intersectRaySphere(tmp3,this.origin,this.direction,t,e)},Ray.prototype.intersectsPlane=function(t,e){return intersectRayPlane(tmp3,this.origin,this.direction,t,e)},Ray.prototype.intersectsTriangle=function(t){return intersectRayTriangle(tmp3,this.origin,this.direction,t)},Ray.prototype.intersectsBox=function(t){return intersectRayBox(tmp3,this.origin,this.direction,t)},Ray.prototype.intersectsTriangleCell=function(t,e){var i=t[0],r=t[1],n=t[2];return tmpTriangle[0]=e[i],tmpTriangle[1]=e[r],tmpTriangle[2]=e[n],this.intersectsTriangle(tmpTriangle)};

},{"gl-vec3/copy":190,"ray-aabb-intersection":235,"ray-plane-intersection":236,"ray-sphere-intersection":237,"ray-triangle-intersection":238}],235:[function(require,module,exports){
function intersection(e,n,r,t){var i=distance(n,r,t);if(i===1/0)e=null;else{e=e||[];for(var o=0;o<n.length;o++)e[o]=n[o]+r[o]*i}return e}function distance(e,n,r){for(var t=e.length,i=-(1/0),o=+(1/0),a=0;t>a;a++){var s=(r[0][a]-e[a])/n[a],c=(r[1][a]-e[a])/n[a];if(s>c){var u=s;s=c,c=u}if(i>c||s>o)return 1/0;s>i&&(i=s),o>c&&(o=c)}return i>o?1/0:i}module.exports=intersection,module.exports.distance=distance;

},{}],236:[function(require,module,exports){
function intersectRayPlane(e,r,a,l,c){var t=dot(a,l);if(0!==t){var d=-(dot(r,l)+c)/t;return 0>d?null:(scale(v0,a,d),add(e,r,v0))}return dot(l,r)+c===0?copy(e,r):null}var dot=require("gl-vec3/dot"),add=require("gl-vec3/add"),scale=require("gl-vec3/scale"),copy=require("gl-vec3/copy");module.exports=intersectRayPlane;var v0=[0,0,0];

},{"gl-vec3/add":189,"gl-vec3/copy":190,"gl-vec3/dot":192,"gl-vec3/scale":195}],237:[function(require,module,exports){
function intersectRaySphere(e,r,t,d,a){sub(tmp,d,r);var s=dot(t,tmp);if(0>s)return null;scaleAndAdd(tmp,r,t,s);var u=squaredDist(d,tmp),c=a*a;return u>c?null:(scale(e,t,s-Math.sqrt(c-u)),add(e,e,r))}var squaredDist=require("gl-vec3/squaredDistance"),dot=require("gl-vec3/dot"),sub=require("gl-vec3/subtract"),scaleAndAdd=require("gl-vec3/scaleAndAdd"),scale=require("gl-vec3/scale"),add=require("gl-vec3/add"),tmp=[0,0,0];module.exports=intersectRaySphere;

},{"gl-vec3/add":189,"gl-vec3/dot":192,"gl-vec3/scale":195,"gl-vec3/scaleAndAdd":196,"gl-vec3/squaredDistance":198,"gl-vec3/subtract":199}],238:[function(require,module,exports){
function intersectTriangle(e,r,c,t){sub(edge1,t[1],t[0]),sub(edge2,t[2],t[0]),cross(pvec,c,edge2);var v=dot(edge1,pvec);if(EPSILON>v)return null;sub(tvec,r,t[0]);var u=dot(tvec,pvec);if(0>u||u>v)return null;cross(qvec,tvec,edge1);var s=dot(c,qvec);if(0>s||u+s>v)return null;var d=dot(edge2,qvec)/v;return e[0]=r[0]+d*c[0],e[1]=r[1]+d*c[1],e[2]=r[2]+d*c[2],e}var cross=require("gl-vec3/cross"),dot=require("gl-vec3/dot"),sub=require("gl-vec3/subtract"),EPSILON=1e-6,edge1=[0,0,0],edge2=[0,0,0],tvec=[0,0,0],pvec=[0,0,0],qvec=[0,0,0];module.exports=intersectTriangle;

},{"gl-vec3/cross":191,"gl-vec3/dot":192,"gl-vec3/subtract":199}],239:[function(require,module,exports){
"use strict";function repeat(e,r){if("string"!=typeof e)throw new TypeError("repeat-string expects a string.");if(1===r)return e;if(2===r)return e+e;var t=e.length*r;for((cache!==e||"undefined"==typeof cache)&&(cache=e,res="");t>res.length&&r>0&&(1&r&&(res+=e),r>>=1);)e+=e;return res.substr(0,t)}module.exports=repeat;var res="",cache;

},{}],240:[function(require,module,exports){
!function(e){function n(){var e=arguments[0],t=n.cache;return t[e]&&t.hasOwnProperty(e)||(t[e]=n.parse(e)),n.format.call(null,t[e],arguments)}function t(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function r(e,n){return Array(n+1).join(e)}var s={not_string:/[^s]/,number:/[diefg]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijosuxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[\+\-]/};n.format=function(e,o){var a,i,l,c,f,p,u,g=1,d=e.length,h="",x=[],b=!0,y="";for(i=0;d>i;i++)if(h=t(e[i]),"string"===h)x[x.length]=e[i];else if("array"===h){if(c=e[i],c[2])for(a=o[g],l=0;l<c[2].length;l++){if(!a.hasOwnProperty(c[2][l]))throw new Error(n("[sprintf] property '%s' does not exist",c[2][l]));a=a[c[2][l]]}else a=c[1]?o[c[1]]:o[g++];if("function"==t(a)&&(a=a()),s.not_string.test(c[8])&&s.not_json.test(c[8])&&"number"!=t(a)&&isNaN(a))throw new TypeError(n("[sprintf] expecting number but found %s",t(a)));switch(s.number.test(c[8])&&(b=a>=0),c[8]){case"b":a=a.toString(2);break;case"c":a=String.fromCharCode(a);break;case"d":case"i":a=parseInt(a,10);break;case"j":a=JSON.stringify(a,null,c[6]?parseInt(c[6]):0);break;case"e":a=c[7]?a.toExponential(c[7]):a.toExponential();break;case"f":a=c[7]?parseFloat(a).toFixed(c[7]):parseFloat(a);break;case"g":a=c[7]?parseFloat(a).toPrecision(c[7]):parseFloat(a);break;case"o":a=a.toString(8);break;case"s":a=(a=String(a))&&c[7]?a.substring(0,c[7]):a;break;case"u":a>>>=0;break;case"x":a=a.toString(16);break;case"X":a=a.toString(16).toUpperCase()}s.json.test(c[8])?x[x.length]=a:(!s.number.test(c[8])||b&&!c[3]?y="":(y=b?"+":"-",a=a.toString().replace(s.sign,"")),p=c[4]?"0"===c[4]?"0":c[4].charAt(1):" ",u=c[6]-(y+a).length,f=c[6]&&u>0?r(p,u):"",x[x.length]=c[5]?y+a+f:"0"===p?y+f+a:f+y+a)}return x.join("")},n.cache={},n.parse=function(e){for(var n=e,t=[],r=[],o=0;n;){if(null!==(t=s.text.exec(n)))r[r.length]=t[0];else if(null!==(t=s.modulo.exec(n)))r[r.length]="%";else{if(null===(t=s.placeholder.exec(n)))throw new SyntaxError("[sprintf] unexpected placeholder");if(t[2]){o|=1;var a=[],i=t[2],l=[];if(null===(l=s.key.exec(i)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(a[a.length]=l[1];""!==(i=i.substring(l[0].length));)if(null!==(l=s.key_access.exec(i)))a[a.length]=l[1];else{if(null===(l=s.index_access.exec(i)))throw new SyntaxError("[sprintf] failed to parse named argument key");a[a.length]=l[1]}t[2]=a}else o|=2;if(3===o)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");r[r.length]=t}n=n.substring(t[0].length)}return r};var o=function(e,t,r){return r=(t||[]).slice(0),r.splice(0,0,e),n.apply(null,r)};"undefined"!=typeof exports?(exports.sprintf=n,exports.vsprintf=o):(e.sprintf=n,e.vsprintf=o,"function"==typeof define&&define.amd&&define(function(){return{sprintf:n,vsprintf:o}}))}("undefined"==typeof window?this:window);

},{}],241:[function(require,module,exports){
"use strict";function getPropertyInPX(e,t){var r=parseUnit(getComputedStyle(e).getPropertyValue(t));return r[0]*toPX(r[1],e)}function getSizeBrutal(e,t){var r=document.createElement("div");r.style["font-size"]="128"+e,t.appendChild(r);var n=getPropertyInPX(r,"font-size")/128;return t.removeChild(r),n}function toPX(e,t){switch(t=t||document.body,e=(e||"px").trim().toLowerCase(),(t===window||t===document)&&(t=document.body),e){case"%":return t.clientHeight/100;case"ch":case"ex":return getSizeBrutal(e,t);case"em":return getPropertyInPX(t,"font-size");case"rem":return getPropertyInPX(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return PIXELS_PER_INCH;case"cm":return PIXELS_PER_INCH/2.54;case"mm":return PIXELS_PER_INCH/25.4;case"pt":return PIXELS_PER_INCH/72;case"pc":return PIXELS_PER_INCH/6}return 1}var parseUnit=require("parse-unit");module.exports=toPX;var PIXELS_PER_INCH=96;

},{"parse-unit":224}],242:[function(require,module,exports){
function touchPinch(e){function t(e){for(var t=e.identifier,n=0;n<v.length;n++)if(v[n]&&v[n].touch&&v[n].touch.identifier===t)return n;return-1}function n(){d||(d=!0,e.addEventListener("touchstart",r,!1),e.addEventListener("touchmove",o,!1),e.addEventListener("touchend",c,!1),e.addEventListener("touchcancel",c,!1))}function i(){d&&(d=!1,e.removeEventListener("touchstart",r,!1),e.removeEventListener("touchmove",o,!1),e.removeEventListener("touchend",c,!1),e.removeEventListener("touchcancel",c,!1))}function r(n){for(var i=0;i<n.changedTouches.length;i++){var r=n.changedTouches[i],o=r.identifier,c=t(o);if(-1===c&&2>s){var d=0===s,l=v[0]?1:0,g=v[0]?0:1,p=new Finger;v[l]=p,s++,p.touch=r,eventOffset(r,e,p.position);var m=v[g]?v[g].touch:void 0;if(h.emit("place",r,m),!d){var E=u();f=!1,h.emit("start",E),a=E}}}}function o(n){for(var i=!1,r=0;r<n.changedTouches.length;r++){var o=n.changedTouches[r],c=t(o);-1!==c&&(i=!0,v[c].touch=o,eventOffset(o,e,v[c].position))}if(2===s&&i){var f=u();h.emit("change",f,a),a=f}}function c(e){for(var n=0;n<e.changedTouches.length;n++){var i=e.changedTouches[n],r=t(i);if(-1!==r){v[r]=null,s--;var o=0===r?1:0,c=v[o]?v[o].touch:void 0;h.emit("lift",i,c)}}f||2===s||(f=!0,h.emit("end"))}function u(){return 2>s?0:getDistance(v[0].position,v[1].position)}e=e||window;var h=new EventEmitter,v=[null,null],s=0,a=0,f=!1,d=!1;return Object.defineProperties(h,{pinching:dprop(function(){return 2===s}),fingers:dprop(function(){return v})}),n(),h.enable=n,h.disable=i,h.indexOfTouch=t,h}function Finger(){this.position=[0,0],this.touch=null}var getDistance=require("gl-vec2/distance"),EventEmitter=require("events").EventEmitter,dprop=require("dprop"),eventOffset=require("mouse-event-offset");module.exports=touchPinch;

},{"dprop":81,"events":137,"gl-vec2/distance":188,"mouse-event-offset":216}],243:[function(require,module,exports){
(function (global,Buffer){
"use strict";function freeArrayBuffer(r){if(r){var e=r.length||r.byteLength,t=bits.log2(e);DATA[t].push(r)}}function freeTypedArray(r){freeArrayBuffer(r.buffer)}function mallocArrayBuffer(r){var r=bits.nextPow2(r),e=bits.log2(r),t=DATA[e];return t.length>0?t.pop():new ArrayBuffer(r)}function mallocUint8(r){return new Uint8Array(mallocArrayBuffer(r),0,r)}function mallocUint16(r){return new Uint16Array(mallocArrayBuffer(2*r),0,r)}function mallocUint32(r){return new Uint32Array(mallocArrayBuffer(4*r),0,r)}function mallocInt8(r){return new Int8Array(mallocArrayBuffer(r),0,r)}function mallocInt16(r){return new Int16Array(mallocArrayBuffer(2*r),0,r)}function mallocInt32(r){return new Int32Array(mallocArrayBuffer(4*r),0,r)}function mallocFloat(r){return new Float32Array(mallocArrayBuffer(4*r),0,r)}function mallocDouble(r){return new Float64Array(mallocArrayBuffer(8*r),0,r)}function mallocUint8Clamped(r){return hasUint8C?new Uint8ClampedArray(mallocArrayBuffer(r),0,r):mallocUint8(r)}function mallocDataView(r){return new DataView(mallocArrayBuffer(r),0,r)}function mallocBuffer(r){r=bits.nextPow2(r);var e=bits.log2(r),t=BUFFER[e];return t.length>0?t.pop():new Buffer(r)}var bits=require("bit-twiddle"),dup=require("dup");global.__TYPEDARRAY_POOL||(global.__TYPEDARRAY_POOL={UINT8:dup([32,0]),UINT16:dup([32,0]),UINT32:dup([32,0]),INT8:dup([32,0]),INT16:dup([32,0]),INT32:dup([32,0]),FLOAT:dup([32,0]),DOUBLE:dup([32,0]),DATA:dup([32,0]),UINT8C:dup([32,0]),BUFFER:dup([32,0])});var hasUint8C="undefined"!=typeof Uint8ClampedArray,POOL=global.__TYPEDARRAY_POOL;POOL.UINT8C||(POOL.UINT8C=dup([32,0])),POOL.BUFFER||(POOL.BUFFER=dup([32,0]));var DATA=POOL.DATA,BUFFER=POOL.BUFFER;exports.free=function(r){if(Buffer.isBuffer(r))BUFFER[bits.log2(r.length)].push(r);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(r)&&(r=r.buffer),!r)return;var e=r.length||r.byteLength,t=0|bits.log2(e);DATA[t].push(r)}},exports.freeUint8=exports.freeUint16=exports.freeUint32=exports.freeInt8=exports.freeInt16=exports.freeInt32=exports.freeFloat32=exports.freeFloat=exports.freeFloat64=exports.freeDouble=exports.freeUint8Clamped=exports.freeDataView=freeTypedArray,exports.freeArrayBuffer=freeArrayBuffer,exports.freeBuffer=function(r){BUFFER[bits.log2(r.length)].push(r)},exports.malloc=function(r,e){if(void 0===e||"arraybuffer"===e)return mallocArrayBuffer(r);switch(e){case"uint8":return mallocUint8(r);case"uint16":return mallocUint16(r);case"uint32":return mallocUint32(r);case"int8":return mallocInt8(r);case"int16":return mallocInt16(r);case"int32":return mallocInt32(r);case"float":case"float32":return mallocFloat(r);case"double":case"float64":return mallocDouble(r);case"uint8_clamped":return mallocUint8Clamped(r);case"buffer":return mallocBuffer(r);case"data":case"dataview":return mallocDataView(r);default:return null}return null},exports.mallocArrayBuffer=mallocArrayBuffer,exports.mallocUint8=mallocUint8,exports.mallocUint16=mallocUint16,exports.mallocUint32=mallocUint32,exports.mallocInt8=mallocInt8,exports.mallocInt16=mallocInt16,exports.mallocInt32=mallocInt32,exports.mallocFloat32=exports.mallocFloat=mallocFloat,exports.mallocFloat64=exports.mallocDouble=mallocDouble,exports.mallocUint8Clamped=mallocUint8Clamped,exports.mallocDataView=mallocDataView,exports.mallocBuffer=mallocBuffer,exports.clearCache=function(){for(var r=0;32>r;++r)POOL.UINT8[r].length=0,POOL.UINT16[r].length=0,POOL.UINT32[r].length=0,POOL.INT8[r].length=0,POOL.INT16[r].length=0,POOL.INT32[r].length=0,POOL.FLOAT[r].length=0,POOL.DOUBLE[r].length=0,POOL.UINT8C[r].length=0,DATA[r].length=0,BUFFER[r].length=0};

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer)

},{"bit-twiddle":66,"buffer":67,"dup":83}],244:[function(require,module,exports){
"use strict";function unique_pred(n,e){for(var u=1,t=n.length,i=n[0],r=n[0],o=1;t>o;++o)if(r=i,i=n[o],e(i,r)){if(o===u){u++;continue}n[u++]=i}return n.length=u,n}function unique_eq(n){for(var e=1,u=n.length,t=n[0],i=n[0],r=1;u>r;++r,i=t)if(i=t,t=n[r],t!==i){if(r===e){e++;continue}n[e++]=t}return n.length=e,n}function unique(n,e,u){return 0===n.length?n:e?(u||n.sort(e),unique_pred(n,e)):(u||n.sort(),unique_eq(n))}module.exports=unique;

},{}],245:[function(require,module,exports){
function createStore(){var e={};return function(r){if(("object"!=typeof r||null===r)&&"function"!=typeof r)throw new Error("Weakmap-shim: Key must be object");var t=r.valueOf(e);return t&&t.identity===e?t:hiddenStore(r,e)}}var hiddenStore=require("./hidden-store.js");module.exports=createStore;

},{"./hidden-store.js":246}],246:[function(require,module,exports){
function hiddenStore(e,t){var r={identity:t},n=e.valueOf;return Object.defineProperty(e,"valueOf",{value:function(e){return e!==t?n.apply(this,arguments):r},writable:!0}),r}module.exports=hiddenStore;

},{}],247:[function(require,module,exports){
function weakMap(){var e=createStore();return{get:function(r,t){var a=e(r);return a.hasOwnProperty("value")?a.value:t},set:function(r,t){e(r).value=t},has:function(r){return"value"in e(r)},"delete":function(r){return delete e(r).value}}}var createStore=require("./create-store.js");module.exports=weakMap;

},{"./create-store.js":245}],248:[function(require,module,exports){
var getContext=require("get-canvas-context");module.exports=function(e){return getContext("webgl",e)};

},{"get-canvas-context":138}]},{},[20])
//# sourceMappingURL=glam.js.map
